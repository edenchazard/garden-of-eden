"use strict";var vp=Object.create;var sa=Object.defineProperty;var _p=Object.getOwnPropertyDescriptor;var Ep=Object.getOwnPropertyNames;var Sp=Object.getPrototypeOf,Rp=Object.prototype.hasOwnProperty;var ws=(e,t)=>()=>(e&&(t=e(e=0)),t);var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zu=(e,t)=>{for(var r in t)sa(e,r,{get:t[r],enumerable:!0})},Uu=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ep(t))!Rp.call(e,a)&&a!==r&&sa(e,a,{get:()=>t[a],enumerable:!(n=_p(t,a))||n.enumerable});return e};var Ct=(e,t,r)=>(r=e!=null?vp(Sp(e)):{},Uu(t||!e||!e.__esModule?sa(r,"default",{value:e,enumerable:!0}):r,e)),Tp=e=>Uu(sa({},"__esModule",{value:!0}),e);var ut=H((Z_,Gu)=>{"use strict";var Hu=function(e){return typeof e<"u"&&e!==null},xp=function(e){return typeof e=="object"},Pp=function(e){return Object.prototype.toString.call(e)==="[object Object]"},Ap=function(e){return typeof e=="function"},kp=function(e){return typeof e=="boolean"},Cp=function(e){return e instanceof Buffer},Ip=function(e){if(Hu(e))switch(e.constructor){case Uint8Array:case Uint8ClampedArray:case Int8Array:case Uint16Array:case Int16Array:case Uint32Array:case Int32Array:case Float32Array:case Float64Array:return!0}return!1},Op=function(e){return e instanceof ArrayBuffer},jp=function(e){return typeof e=="string"&&e.length>0},Bp=function(e){return typeof e=="number"&&!Number.isNaN(e)},Lp=function(e){return Number.isInteger(e)},$p=function(e,t,r){return e>=t&&e<=r},qp=function(e,t){return t.includes(e)},Dp=function(e,t,r){return new Error(`Expected ${t} for ${e} but received ${r} of type ${typeof r}`)},Fp=function(e,t){return t.message=e.message,t};Gu.exports={defined:Hu,object:xp,plainObject:Pp,fn:Ap,bool:kp,buffer:Cp,typedArray:Ip,arrayBuffer:Op,string:jp,number:Bp,integer:Lp,inRange:$p,inArray:qp,invalidParameterError:Dp,nativeError:Fp}});var Qu=H((Q_,Zu)=>{"use strict";var Vu=()=>process.platform==="linux",la=null,Np=()=>{if(!la)if(Vu()&&process.report){let e=process.report.excludeNetwork;process.report.excludeNetwork=!0,la=process.report.getReport(),process.report.excludeNetwork=e}else la={};return la};Zu.exports={isLinux:Vu,getReport:Np}});var Ju=H((Y_,Xu)=>{"use strict";var Yu=require("fs"),Mp="/usr/bin/ldd",Wp=e=>Yu.readFileSync(e,"utf-8"),zp=e=>new Promise((t,r)=>{Yu.readFile(e,"utf-8",(n,a)=>{n?r(n):t(a)})});Xu.exports={LDD_PATH:Mp,readFileSync:Wp,readFile:zp}});var ua=H((X_,pd)=>{"use strict";var ed=require("child_process"),{isLinux:cn,getReport:td}=Qu(),{LDD_PATH:ca,readFile:rd,readFileSync:nd}=Ju(),dt,ft,id="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",Jt="",ad=()=>Jt||new Promise(e=>{ed.exec(id,(t,r)=>{Jt=t?" ":r,e(Jt)})}),od=()=>{if(!Jt)try{Jt=ed.execSync(id,{encoding:"utf8"})}catch{Jt=" "}return Jt},Kt="glibc",sd=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,ln="musl",Up=e=>e.includes("libc.musl-")||e.includes("ld-musl-"),ld=()=>{let e=td();return e.header&&e.header.glibcVersionRuntime?Kt:Array.isArray(e.sharedObjects)&&e.sharedObjects.some(Up)?ln:null},cd=e=>{let[t,r]=e.split(/[\r\n]+/);return t&&t.includes(Kt)?Kt:r&&r.includes(ln)?ln:null},ud=e=>e.includes("musl")?ln:e.includes("GNU C Library")?Kt:null,Hp=async()=>{if(dt!==void 0)return dt;dt=null;try{let e=await rd(ca);dt=ud(e)}catch{}return dt},Gp=()=>{if(dt!==void 0)return dt;dt=null;try{let e=nd(ca);dt=ud(e)}catch{}return dt},dd=async()=>{let e=null;if(cn()&&(e=await Hp(),e||(e=ld()),!e)){let t=await ad();e=cd(t)}return e},fd=()=>{let e=null;if(cn()&&(e=Gp(),e||(e=ld()),!e)){let t=od();e=cd(t)}return e},Vp=async()=>cn()&&await dd()!==Kt,Zp=()=>cn()&&fd()!==Kt,Qp=async()=>{if(ft!==void 0)return ft;ft=null;try{let t=(await rd(ca)).match(sd);t&&(ft=t[1])}catch{}return ft},Yp=()=>{if(ft!==void 0)return ft;ft=null;try{let t=nd(ca).match(sd);t&&(ft=t[1])}catch{}return ft},hd=()=>{let e=td();return e.header&&e.header.glibcVersionRuntime?e.header.glibcVersionRuntime:null},Ku=e=>e.trim().split(/\s+/)[1],md=e=>{let[t,r,n]=e.split(/[\r\n]+/);return t&&t.includes(Kt)?Ku(t):r&&n&&r.includes(ln)?Ku(n):null},Xp=async()=>{let e=null;if(cn()&&(e=await Qp(),e||(e=hd()),!e)){let t=await ad();e=md(t)}return e},Jp=()=>{let e=null;if(cn()&&(e=Yp(),e||(e=hd()),!e)){let t=od();e=md(t)}return e};pd.exports={GLIBC:Kt,MUSL:ln,family:dd,familySync:fd,isNonGlibcLinux:Vp,isNonGlibcLinuxSync:Zp,version:Xp,versionSync:Jp}});var ii=H((J_,gd)=>{var Kp=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};gd.exports=Kp});var da=H((K_,bd)=>{var eg="2.0.0",tg=Number.MAX_SAFE_INTEGER||9007199254740991,rg=16,ng=250,ig=["major","premajor","minor","preminor","patch","prepatch","prerelease"];bd.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:rg,MAX_SAFE_BUILD_LENGTH:ng,MAX_SAFE_INTEGER:tg,RELEASE_TYPES:ig,SEMVER_SPEC_VERSION:eg,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ai=H((It,yd)=>{var{MAX_SAFE_COMPONENT_LENGTH:vs,MAX_SAFE_BUILD_LENGTH:ag,MAX_LENGTH:og}=da(),sg=ii();It=yd.exports={};var lg=It.re=[],cg=It.safeRe=[],I=It.src=[],O=It.t={},ug=0,_s="[a-zA-Z0-9-]",dg=[["\\s",1],["\\d",og],[_s,ag]],fg=e=>{for(let[t,r]of dg)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},Z=(e,t,r)=>{let n=fg(t),a=ug++;sg(e,a,t),O[e]=a,I[a]=t,lg[a]=new RegExp(t,r?"g":void 0),cg[a]=new RegExp(n,r?"g":void 0)};Z("NUMERICIDENTIFIER","0|[1-9]\\d*");Z("NUMERICIDENTIFIERLOOSE","\\d+");Z("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_s}*`);Z("MAINVERSION",`(${I[O.NUMERICIDENTIFIER]})\\.(${I[O.NUMERICIDENTIFIER]})\\.(${I[O.NUMERICIDENTIFIER]})`);Z("MAINVERSIONLOOSE",`(${I[O.NUMERICIDENTIFIERLOOSE]})\\.(${I[O.NUMERICIDENTIFIERLOOSE]})\\.(${I[O.NUMERICIDENTIFIERLOOSE]})`);Z("PRERELEASEIDENTIFIER",`(?:${I[O.NUMERICIDENTIFIER]}|${I[O.NONNUMERICIDENTIFIER]})`);Z("PRERELEASEIDENTIFIERLOOSE",`(?:${I[O.NUMERICIDENTIFIERLOOSE]}|${I[O.NONNUMERICIDENTIFIER]})`);Z("PRERELEASE",`(?:-(${I[O.PRERELEASEIDENTIFIER]}(?:\\.${I[O.PRERELEASEIDENTIFIER]})*))`);Z("PRERELEASELOOSE",`(?:-?(${I[O.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${I[O.PRERELEASEIDENTIFIERLOOSE]})*))`);Z("BUILDIDENTIFIER",`${_s}+`);Z("BUILD",`(?:\\+(${I[O.BUILDIDENTIFIER]}(?:\\.${I[O.BUILDIDENTIFIER]})*))`);Z("FULLPLAIN",`v?${I[O.MAINVERSION]}${I[O.PRERELEASE]}?${I[O.BUILD]}?`);Z("FULL",`^${I[O.FULLPLAIN]}$`);Z("LOOSEPLAIN",`[v=\\s]*${I[O.MAINVERSIONLOOSE]}${I[O.PRERELEASELOOSE]}?${I[O.BUILD]}?`);Z("LOOSE",`^${I[O.LOOSEPLAIN]}$`);Z("GTLT","((?:<|>)?=?)");Z("XRANGEIDENTIFIERLOOSE",`${I[O.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Z("XRANGEIDENTIFIER",`${I[O.NUMERICIDENTIFIER]}|x|X|\\*`);Z("XRANGEPLAIN",`[v=\\s]*(${I[O.XRANGEIDENTIFIER]})(?:\\.(${I[O.XRANGEIDENTIFIER]})(?:\\.(${I[O.XRANGEIDENTIFIER]})(?:${I[O.PRERELEASE]})?${I[O.BUILD]}?)?)?`);Z("XRANGEPLAINLOOSE",`[v=\\s]*(${I[O.XRANGEIDENTIFIERLOOSE]})(?:\\.(${I[O.XRANGEIDENTIFIERLOOSE]})(?:\\.(${I[O.XRANGEIDENTIFIERLOOSE]})(?:${I[O.PRERELEASELOOSE]})?${I[O.BUILD]}?)?)?`);Z("XRANGE",`^${I[O.GTLT]}\\s*${I[O.XRANGEPLAIN]}$`);Z("XRANGELOOSE",`^${I[O.GTLT]}\\s*${I[O.XRANGEPLAINLOOSE]}$`);Z("COERCEPLAIN",`(^|[^\\d])(\\d{1,${vs}})(?:\\.(\\d{1,${vs}}))?(?:\\.(\\d{1,${vs}}))?`);Z("COERCE",`${I[O.COERCEPLAIN]}(?:$|[^\\d])`);Z("COERCEFULL",I[O.COERCEPLAIN]+`(?:${I[O.PRERELEASE]})?(?:${I[O.BUILD]})?(?:$|[^\\d])`);Z("COERCERTL",I[O.COERCE],!0);Z("COERCERTLFULL",I[O.COERCEFULL],!0);Z("LONETILDE","(?:~>?)");Z("TILDETRIM",`(\\s*)${I[O.LONETILDE]}\\s+`,!0);It.tildeTrimReplace="$1~";Z("TILDE",`^${I[O.LONETILDE]}${I[O.XRANGEPLAIN]}$`);Z("TILDELOOSE",`^${I[O.LONETILDE]}${I[O.XRANGEPLAINLOOSE]}$`);Z("LONECARET","(?:\\^)");Z("CARETTRIM",`(\\s*)${I[O.LONECARET]}\\s+`,!0);It.caretTrimReplace="$1^";Z("CARET",`^${I[O.LONECARET]}${I[O.XRANGEPLAIN]}$`);Z("CARETLOOSE",`^${I[O.LONECARET]}${I[O.XRANGEPLAINLOOSE]}$`);Z("COMPARATORLOOSE",`^${I[O.GTLT]}\\s*(${I[O.LOOSEPLAIN]})$|^$`);Z("COMPARATOR",`^${I[O.GTLT]}\\s*(${I[O.FULLPLAIN]})$|^$`);Z("COMPARATORTRIM",`(\\s*)${I[O.GTLT]}\\s*(${I[O.LOOSEPLAIN]}|${I[O.XRANGEPLAIN]})`,!0);It.comparatorTrimReplace="$1$2$3";Z("HYPHENRANGE",`^\\s*(${I[O.XRANGEPLAIN]})\\s+-\\s+(${I[O.XRANGEPLAIN]})\\s*$`);Z("HYPHENRANGELOOSE",`^\\s*(${I[O.XRANGEPLAINLOOSE]})\\s+-\\s+(${I[O.XRANGEPLAINLOOSE]})\\s*$`);Z("STAR","(<|>)?=?\\s*\\*");Z("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Z("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var fa=H((eE,wd)=>{var hg=Object.freeze({loose:!0}),mg=Object.freeze({}),pg=e=>e?typeof e!="object"?hg:e:mg;wd.exports=pg});var Sd=H((tE,Ed)=>{var vd=/^[0-9]+$/,_d=(e,t)=>{let r=vd.test(e),n=vd.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},gg=(e,t)=>_d(t,e);Ed.exports={compareIdentifiers:_d,rcompareIdentifiers:gg}});var dn=H((rE,Pd)=>{var ha=ii(),{MAX_LENGTH:Rd,MAX_SAFE_INTEGER:ma}=da(),{safeRe:Td,t:xd}=ai(),bg=fa(),{compareIdentifiers:un}=Sd(),Es=class e{constructor(t,r){if(r=bg(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Rd)throw new TypeError(`version is longer than ${Rd} characters`);ha("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Td[xd.LOOSE]:Td[xd.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ma||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ma||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ma||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let o=+a;if(o>=0&&o<ma)return o}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ha("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),un(this.major,t.major)||un(this.minor,t.minor)||un(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],a=t.prerelease[r];if(ha("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return un(n,a)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],a=t.build[r];if(ha("build compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return un(n,a)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let a=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let o=[r,a];n===!1&&(o=[r]),un(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Pd.exports=Es});var Cd=H((nE,kd)=>{var Ad=dn(),yg=(e,t,r=!1)=>{if(e instanceof Ad)return e;try{return new Ad(e,t)}catch(n){if(!r)return null;throw n}};kd.exports=yg});var Od=H((iE,Id)=>{var wg=dn(),vg=Cd(),{safeRe:pa,t:ga}=ai(),_g=(e,t)=>{if(e instanceof wg)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?pa[ga.COERCEFULL]:pa[ga.COERCE]);else{let f=t.includePrerelease?pa[ga.COERCERTLFULL]:pa[ga.COERCERTL],p;for(;(p=f.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||p.index+p[0].length!==r.index+r[0].length)&&(r=p),f.lastIndex=p.index+p[1].length+p[2].length;f.lastIndex=-1}if(r===null)return null;let n=r[2],a=r[3]||"0",o=r[4]||"0",l=t.includePrerelease&&r[5]?`-${r[5]}`:"",c=t.includePrerelease&&r[6]?`+${r[6]}`:"";return vg(`${n}.${a}.${o}${l}${c}`,t)};Id.exports=_g});var vr=H((aE,Bd)=>{var jd=dn(),Eg=(e,t,r)=>new jd(e,r).compare(new jd(t,r));Bd.exports=Eg});var Ss=H((oE,Ld)=>{var Sg=vr(),Rg=(e,t,r)=>Sg(e,t,r)>=0;Ld.exports=Rg});var qd=H((sE,$d)=>{var Rs=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let a=this.map.keys().next().value;this.delete(a)}this.map.set(t,r)}return this}};$d.exports=Rs});var Fd=H((lE,Dd)=>{var Tg=vr(),xg=(e,t,r)=>Tg(e,t,r)===0;Dd.exports=xg});var Md=H((cE,Nd)=>{var Pg=vr(),Ag=(e,t,r)=>Pg(e,t,r)!==0;Nd.exports=Ag});var zd=H((uE,Wd)=>{var kg=vr(),Cg=(e,t,r)=>kg(e,t,r)>0;Wd.exports=Cg});var Hd=H((dE,Ud)=>{var Ig=vr(),Og=(e,t,r)=>Ig(e,t,r)<0;Ud.exports=Og});var Vd=H((fE,Gd)=>{var jg=vr(),Bg=(e,t,r)=>jg(e,t,r)<=0;Gd.exports=Bg});var Qd=H((hE,Zd)=>{var Lg=Fd(),$g=Md(),qg=zd(),Dg=Ss(),Fg=Hd(),Ng=Vd(),Mg=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Lg(e,r,n);case"!=":return $g(e,r,n);case">":return qg(e,r,n);case">=":return Dg(e,r,n);case"<":return Fg(e,r,n);case"<=":return Ng(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};Zd.exports=Mg});var rf=H((mE,tf)=>{var oi=Symbol("SemVer ANY"),Ps=class e{static get ANY(){return oi}constructor(t,r){if(r=Yd(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),xs("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===oi?this.value="":this.value=this.operator+this.semver.version,xs("comp",this)}parse(t){let r=this.options.loose?Xd[Jd.COMPARATORLOOSE]:Xd[Jd.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Kd(n[2],this.options.loose):this.semver=oi}toString(){return this.value}test(t){if(xs("Comparator.test",t,this.options.loose),this.semver===oi||t===oi)return!0;if(typeof t=="string")try{t=new Kd(t,this.options)}catch{return!1}return Ts(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new ef(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new ef(this.value,r).test(t.semver):(r=Yd(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||Ts(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||Ts(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};tf.exports=Ps;var Yd=fa(),{safeRe:Xd,t:Jd}=ai(),Ts=Qd(),xs=ii(),Kd=dn(),ef=As()});var As=H((pE,sf)=>{var Wg=/\s+/g,ks=class e{constructor(t,r){if(r=Ug(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof Cs)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(Wg," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(a=>!af(a[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let a of this.set)if(a.length===1&&Xg(a[0])){this.set=[a];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&Qg)|(this.options.loose&&Yg))+":"+t,a=nf.get(n);if(a)return a;let o=this.options.loose,l=o?Be[xe.HYPHENRANGELOOSE]:Be[xe.HYPHENRANGE];t=t.replace(l,sb(this.options.includePrerelease)),ue("hyphen replace",t),t=t.replace(Be[xe.COMPARATORTRIM],Gg),ue("comparator trim",t),t=t.replace(Be[xe.TILDETRIM],Vg),ue("tilde trim",t),t=t.replace(Be[xe.CARETTRIM],Zg),ue("caret trim",t);let c=t.split(" ").map(b=>Jg(b,this.options)).join(" ").split(/\s+/).map(b=>ob(b,this.options));o&&(c=c.filter(b=>(ue("loose invalid filter",b,this.options),!!b.match(Be[xe.COMPARATORLOOSE])))),ue("range list",c);let f=new Map,p=c.map(b=>new Cs(b,this.options));for(let b of p){if(af(b))return[b];f.set(b.value,b)}f.size>1&&f.has("")&&f.delete("");let m=[...f.values()];return nf.set(n,m),m}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>of(n,r)&&t.set.some(a=>of(a,r)&&n.every(o=>a.every(l=>o.intersects(l,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Hg(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(lb(this.set[r],t,this.options))return!0;return!1}};sf.exports=ks;var zg=qd(),nf=new zg,Ug=fa(),Cs=rf(),ue=ii(),Hg=dn(),{safeRe:Be,t:xe,comparatorTrimReplace:Gg,tildeTrimReplace:Vg,caretTrimReplace:Zg}=ai(),{FLAG_INCLUDE_PRERELEASE:Qg,FLAG_LOOSE:Yg}=da(),af=e=>e.value==="<0.0.0-0",Xg=e=>e.value==="",of=(e,t)=>{let r=!0,n=e.slice(),a=n.pop();for(;r&&n.length;)r=n.every(o=>a.intersects(o,t)),a=n.pop();return r},Jg=(e,t)=>(ue("comp",e,t),e=tb(e,t),ue("caret",e),e=Kg(e,t),ue("tildes",e),e=nb(e,t),ue("xrange",e),e=ab(e,t),ue("stars",e),e),Pe=e=>!e||e.toLowerCase()==="x"||e==="*",Kg=(e,t)=>e.trim().split(/\s+/).map(r=>eb(r,t)).join(" "),eb=(e,t)=>{let r=t.loose?Be[xe.TILDELOOSE]:Be[xe.TILDE];return e.replace(r,(n,a,o,l,c)=>{ue("tilde",e,n,a,o,l,c);let f;return Pe(a)?f="":Pe(o)?f=`>=${a}.0.0 <${+a+1}.0.0-0`:Pe(l)?f=`>=${a}.${o}.0 <${a}.${+o+1}.0-0`:c?(ue("replaceTilde pr",c),f=`>=${a}.${o}.${l}-${c} <${a}.${+o+1}.0-0`):f=`>=${a}.${o}.${l} <${a}.${+o+1}.0-0`,ue("tilde return",f),f})},tb=(e,t)=>e.trim().split(/\s+/).map(r=>rb(r,t)).join(" "),rb=(e,t)=>{ue("caret",e,t);let r=t.loose?Be[xe.CARETLOOSE]:Be[xe.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(a,o,l,c,f)=>{ue("caret",e,a,o,l,c,f);let p;return Pe(o)?p="":Pe(l)?p=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Pe(c)?o==="0"?p=`>=${o}.${l}.0${n} <${o}.${+l+1}.0-0`:p=`>=${o}.${l}.0${n} <${+o+1}.0.0-0`:f?(ue("replaceCaret pr",f),o==="0"?l==="0"?p=`>=${o}.${l}.${c}-${f} <${o}.${l}.${+c+1}-0`:p=`>=${o}.${l}.${c}-${f} <${o}.${+l+1}.0-0`:p=`>=${o}.${l}.${c}-${f} <${+o+1}.0.0-0`):(ue("no pr"),o==="0"?l==="0"?p=`>=${o}.${l}.${c}${n} <${o}.${l}.${+c+1}-0`:p=`>=${o}.${l}.${c}${n} <${o}.${+l+1}.0-0`:p=`>=${o}.${l}.${c} <${+o+1}.0.0-0`),ue("caret return",p),p})},nb=(e,t)=>(ue("replaceXRanges",e,t),e.split(/\s+/).map(r=>ib(r,t)).join(" ")),ib=(e,t)=>{e=e.trim();let r=t.loose?Be[xe.XRANGELOOSE]:Be[xe.XRANGE];return e.replace(r,(n,a,o,l,c,f)=>{ue("xRange",e,n,a,o,l,c,f);let p=Pe(o),m=p||Pe(l),b=m||Pe(c),_=b;return a==="="&&_&&(a=""),f=t.includePrerelease?"-0":"",p?a===">"||a==="<"?n="<0.0.0-0":n="*":a&&_?(m&&(l=0),c=0,a===">"?(a=">=",m?(o=+o+1,l=0,c=0):(l=+l+1,c=0)):a==="<="&&(a="<",m?o=+o+1:l=+l+1),a==="<"&&(f="-0"),n=`${a+o}.${l}.${c}${f}`):m?n=`>=${o}.0.0${f} <${+o+1}.0.0-0`:b&&(n=`>=${o}.${l}.0${f} <${o}.${+l+1}.0-0`),ue("xRange return",n),n})},ab=(e,t)=>(ue("replaceStars",e,t),e.trim().replace(Be[xe.STAR],"")),ob=(e,t)=>(ue("replaceGTE0",e,t),e.trim().replace(Be[t.includePrerelease?xe.GTE0PRE:xe.GTE0],"")),sb=e=>(t,r,n,a,o,l,c,f,p,m,b,_)=>(Pe(n)?r="":Pe(a)?r=`>=${n}.0.0${e?"-0":""}`:Pe(o)?r=`>=${n}.${a}.0${e?"-0":""}`:l?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Pe(p)?f="":Pe(m)?f=`<${+p+1}.0.0-0`:Pe(b)?f=`<${p}.${+m+1}.0-0`:_?f=`<=${p}.${m}.${b}-${_}`:e?f=`<${p}.${m}.${+b+1}-0`:f=`<=${f}`,`${r} ${f}`.trim()),lb=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(ue(e[n].semver),e[n].semver!==Cs.ANY&&e[n].semver.prerelease.length>0){let a=e[n].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}});var cf=H((gE,lf)=>{var cb=As(),ub=(e,t,r)=>{try{t=new cb(t,r)}catch{return!1}return t.test(e)};lf.exports=ub});var Is=H((bE,db)=>{db.exports={name:"sharp",description:"High performance Node.js image processing, the fastest module to resize JPEG, PNG, WebP, GIF, AVIF and TIFF images",version:"0.33.5",author:"Lovell Fuller <npm@lovell.info>",homepage:"https://sharp.pixelplumbing.com",contributors:["Pierre Inglebert <pierre.inglebert@gmail.com>","Jonathan Ong <jonathanrichardong@gmail.com>","Chanon Sajjamanochai <chanon.s@gmail.com>","Juliano Julio <julianojulio@gmail.com>","Daniel Gasienica <daniel@gasienica.ch>","Julian Walker <julian@fiftythree.com>","Amit Pitaru <pitaru.amit@gmail.com>","Brandon Aaron <hello.brandon@aaron.sh>","Andreas Lind <andreas@one.com>","Maurus Cuelenaere <mcuelenaere@gmail.com>","Linus Unneb\xE4ck <linus@folkdatorn.se>","Victor Mateevitsi <mvictoras@gmail.com>","Alaric Holloway <alaric.holloway@gmail.com>","Bernhard K. Weisshuhn <bkw@codingforce.com>","Chris Riley <criley@primedia.com>","David Carley <dacarley@gmail.com>","John Tobin <john@limelightmobileinc.com>","Kenton Gray <kentongray@gmail.com>","Felix B\xFCnemann <Felix.Buenemann@gmail.com>","Samy Al Zahrani <samyalzahrany@gmail.com>","Chintan Thakkar <lemnisk8@gmail.com>","F. Orlando Galashan <frulo@gmx.de>","Kleis Auke Wolthuizen <info@kleisauke.nl>","Matt Hirsch <mhirsch@media.mit.edu>","Matthias Thoemmes <thoemmes@gmail.com>","Patrick Paskaris <patrick@paskaris.gr>","J\xE9r\xE9my Lal <kapouer@melix.org>","Rahul Nanwani <r.nanwani@gmail.com>","Alice Monday <alice0meta@gmail.com>","Kristo Jorgenson <kristo.jorgenson@gmail.com>","YvesBos <yves_bos@outlook.com>","Guy Maliar <guy@tailorbrands.com>","Nicolas Coden <nicolas@ncoden.fr>","Matt Parrish <matt.r.parrish@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Matthew McEachen <matthew+github@mceachen.org>","Jarda Kot\u011B\u0161ovec <jarda.kotesovec@gmail.com>","Kenric D'Souza <kenric.dsouza@gmail.com>","Oleh Aleinyk <oleg.aleynik@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Andrea Bianco <andrea.bianco@unibas.ch>","Rik Heywood <rik@rik.org>","Thomas Parisot <hi@oncletom.io>","Nathan Graves <nathanrgraves+github@gmail.com>","Tom Lokhorst <tom@lokhorst.eu>","Espen Hovlandsdal <espen@hovlandsdal.com>","Sylvain Dumont <sylvain.dumont35@gmail.com>","Alun Davies <alun.owain.davies@googlemail.com>","Aidan Hoolachan <ajhoolachan21@gmail.com>","Axel Eirola <axel.eirola@iki.fi>","Freezy <freezy@xbmc.org>","Daiz <taneli.vatanen@gmail.com>","Julian Aubourg <j@ubourg.net>","Keith Belovay <keith@picthrive.com>","Michael B. Klein <mbklein@gmail.com>","Jordan Prudhomme <jordan@raboland.fr>","Ilya Ovdin <iovdin@gmail.com>","Andargor <andargor@yahoo.com>","Paul Neave <paul.neave@gmail.com>","Brendan Kennedy <brenwken@gmail.com>","Brychan Bennett-Odlum <git@brychan.io>","Edward Silverton <e.silverton@gmail.com>","Roman Malieiev <aromaleev@gmail.com>","Tomas Szabo <tomas.szabo@deftomat.com>","Robert O'Rourke <robert@o-rourke.org>","Guillermo Alfonso Varela Chouci\xF1o <guillevch@gmail.com>","Christian Flintrup <chr@gigahost.dk>","Manan Jadhav <manan@motionden.com>","Leon Radley <leon@radley.se>","alza54 <alza54@thiocod.in>","Jacob Smith <jacob@frende.me>","Michael Nutt <michael@nutt.im>","Brad Parham <baparham@gmail.com>","Taneli Vatanen <taneli.vatanen@gmail.com>","Joris Dugu\xE9 <zaruike10@gmail.com>","Chris Banks <christopher.bradley.banks@gmail.com>","Ompal Singh <ompal.hitm09@gmail.com>","Brodan <christopher.hranj@gmail.com>","Ankur Parihar <ankur.github@gmail.com>","Brahim Ait elhaj <brahima@gmail.com>","Mart Jansink <m.jansink@gmail.com>","Lachlan Newman <lachnewman007@gmail.com>","Dennis Beatty <dennis@dcbeatty.com>","Ingvar Stepanyan <me@rreverser.com>","Don Denton <don@happycollision.com>"],scripts:{install:"node install/check",clean:"rm -rf src/build/ .nyc_output/ coverage/ test/fixtures/output.*",test:"npm run test-lint && npm run test-unit && npm run test-licensing && npm run test-types","test-lint":"semistandard && cpplint","test-unit":"nyc --reporter=lcov --reporter=text --check-coverage --branches=100 mocha","test-licensing":'license-checker --production --summary --onlyAllow="Apache-2.0;BSD;ISC;LGPL-3.0-or-later;MIT"',"test-leak":"./test/leak/leak.sh","test-types":"tsd","package-from-local-build":"node npm/from-local-build","package-from-github-release":"node npm/from-github-release","docs-build":"node docs/build && node docs/search-index/build","docs-serve":"cd docs && npx serve","docs-publish":"cd docs && npx firebase-tools deploy --project pixelplumbing --only hosting:pixelplumbing-sharp"},type:"commonjs",main:"lib/index.js",types:"lib/index.d.ts",files:["install","lib","src/*.{cc,h,gyp}"],repository:{type:"git",url:"git://github.com/lovell/sharp.git"},keywords:["jpeg","png","webp","avif","tiff","gif","svg","jp2","dzi","image","resize","thumbnail","crop","embed","libvips","vips"],dependencies:{color:"^4.2.3","detect-libc":"^2.0.3",semver:"^7.6.3"},optionalDependencies:{"@img/sharp-darwin-arm64":"0.33.5","@img/sharp-darwin-x64":"0.33.5","@img/sharp-libvips-darwin-arm64":"1.0.4","@img/sharp-libvips-darwin-x64":"1.0.4","@img/sharp-libvips-linux-arm":"1.0.5","@img/sharp-libvips-linux-arm64":"1.0.4","@img/sharp-libvips-linux-s390x":"1.0.4","@img/sharp-libvips-linux-x64":"1.0.4","@img/sharp-libvips-linuxmusl-arm64":"1.0.4","@img/sharp-libvips-linuxmusl-x64":"1.0.4","@img/sharp-linux-arm":"0.33.5","@img/sharp-linux-arm64":"0.33.5","@img/sharp-linux-s390x":"0.33.5","@img/sharp-linux-x64":"0.33.5","@img/sharp-linuxmusl-arm64":"0.33.5","@img/sharp-linuxmusl-x64":"0.33.5","@img/sharp-wasm32":"0.33.5","@img/sharp-win32-ia32":"0.33.5","@img/sharp-win32-x64":"0.33.5"},devDependencies:{"@emnapi/runtime":"^1.2.0","@img/sharp-libvips-dev":"1.0.4","@img/sharp-libvips-dev-wasm32":"1.0.5","@img/sharp-libvips-win32-ia32":"1.0.4","@img/sharp-libvips-win32-x64":"1.0.4","@types/node":"*",async:"^3.2.5",cc:"^3.0.1",emnapi:"^1.2.0","exif-reader":"^2.0.1","extract-zip":"^2.0.1",icc:"^3.0.0","jsdoc-to-markdown":"^8.0.3","license-checker":"^25.0.1",mocha:"^10.7.3","node-addon-api":"^8.1.0",nyc:"^17.0.0",prebuild:"^13.0.1",semistandard:"^17.0.0","tar-fs":"^3.0.6",tsd:"^0.31.1"},license:"Apache-2.0",engines:{node:"^18.17.0 || ^20.3.0 || >=21.0.0"},config:{libvips:">=8.15.3"},funding:{url:"https://opencollective.com/libvips"},binary:{napi_versions:[9]},semistandard:{env:["mocha"]},cc:{linelength:"120",filter:["build/include"]},nyc:{include:["lib"]},tsd:{directory:"test/types/"}}});var js=H((yE,wf)=>{"use strict";var{spawnSync:ba}=require("node:child_process"),{createHash:fb}=require("node:crypto"),hf=Od(),hb=Ss(),mb=cf(),uf=ua(),{config:pb,engines:df,optionalDependencies:gb}=Is(),bb=process.env.npm_package_config_libvips||pb.libvips,mf=hf(bb).version,yb=["darwin-arm64","darwin-x64","linux-arm","linux-arm64","linux-s390x","linux-x64","linuxmusl-arm64","linuxmusl-x64","win32-ia32","win32-x64"],ya={encoding:"utf8",shell:!0},wb=e=>{e instanceof Error?console.error(`sharp: Installation error: ${e.message}`):console.log(`sharp: ${e}`)},pf=()=>uf.isNonGlibcLinuxSync()?uf.familySync():"",vb=()=>`${process.platform}${pf()}-${process.arch}`,fn=()=>{if(gf())return"wasm32";let{npm_config_arch:e,npm_config_platform:t,npm_config_libc:r}=process.env,n=typeof r=="string"?r:pf();return`${t||process.platform}${n}-${e||process.arch}`},_b=()=>{try{return require(`@img/sharp-libvips-dev-${fn()}/include`)}catch{try{return require("@img/sharp-libvips-dev/include")}catch{}}return""},Eb=()=>{try{return require("@img/sharp-libvips-dev/cplusplus")}catch{}return""},Sb=()=>{try{return require(`@img/sharp-libvips-dev-${fn()}/lib`)}catch{try{return require(`@img/sharp-libvips-${fn()}/lib`)}catch{}}return""},Rb=()=>{if(process.release?.name==="node"&&process.versions&&!mb(process.versions.node,df.node))return{found:process.versions.node,expected:df.node}},gf=()=>{let{CC:e}=process.env;return!!(e&&e.endsWith("/emcc"))},Tb=()=>process.platform==="darwin"&&process.arch==="x64"?(ba("sysctl sysctl.proc_translated",ya).stdout||"").trim()==="sysctl.proc_translated: 1":!1,ff=e=>fb("sha512").update(e).digest("hex"),xb=()=>{try{let e=ff(`imgsharp-libvips-${fn()}`),t=hf(gb[`@img/sharp-libvips-${fn()}`]).version;return ff(`${e}npm:${t}`).slice(0,10)}catch{}return""},Pb=()=>ba(`node-gyp rebuild --directory=src ${gf()?"--nodedir=emscripten":""}`,{...ya,stdio:"inherit"}).status,bf=()=>process.platform!=="win32"?(ba("pkg-config --modversion vips-cpp",{...ya,env:{...process.env,PKG_CONFIG_PATH:yf()}}).stdout||"").trim():"",yf=()=>process.platform!=="win32"?[(ba('which brew >/dev/null 2>&1 && brew environment --plain | grep PKG_CONFIG_LIBDIR | cut -d" " -f2',ya).stdout||"").trim(),process.env.PKG_CONFIG_PATH,"/usr/local/lib/pkgconfig","/usr/lib/pkgconfig","/usr/local/libdata/pkgconfig","/usr/libdata/pkgconfig"].filter(Boolean).join(":"):"",Os=(e,t,r)=>(r&&r(`Detected ${t}, skipping search for globally-installed libvips`),e),Ab=e=>{if(process.env.SHARP_IGNORE_GLOBAL_LIBVIPS)return Os(!1,"SHARP_IGNORE_GLOBAL_LIBVIPS",e);if(process.env.SHARP_FORCE_GLOBAL_LIBVIPS)return Os(!0,"SHARP_FORCE_GLOBAL_LIBVIPS",e);if(Tb())return Os(!1,"Rosetta",e);let t=bf();return!!t&&hb(t,mf)};wf.exports={minimumLibvipsVersion:mf,prebuiltPlatforms:yb,buildPlatformArch:fn,buildSharpLibvipsIncludeDir:_b,buildSharpLibvipsCPlusPlusDir:Eb,buildSharpLibvipsLibDir:Sb,isUnsupportedNodeRuntime:Rb,runtimePlatformArch:vb,log:wb,yarnLocator:xb,spawnRebuild:Pb,globalLibvipsVersion:bf,pkgConfigPath:yf,useGlobalLibvips:Ab}});var si=H((wE,_f)=>{"use strict";var{familySync:kb,versionSync:Cb}=ua(),{runtimePlatformArch:Ib,isUnsupportedNodeRuntime:vf,prebuiltPlatforms:Ob,minimumLibvipsVersion:jb}=js(),_r=Ib(),Bb=[`../src/build/Release/sharp-${_r}.node`,"../src/build/Release/sharp-wasm32.node",`@img/sharp-${_r}/sharp.node`,"@img/sharp-wasm32/sharp.node"],Bs,wa=[];for(let e of Bb)try{Bs=require(e);break}catch(t){wa.push(t)}if(Bs)_f.exports=Bs;else{let[e,t,r]=["linux","darwin","win32"].map(o=>_r.startsWith(o)),n=[`Could not load the "sharp" module using the ${_r} runtime`];wa.forEach(o=>{o.code!=="MODULE_NOT_FOUND"&&n.push(`${o.code}: ${o.message}`)});let a=wa.map(o=>o.message).join(" ");if(n.push("Possible solutions:"),vf()){let{found:o,expected:l}=vf();n.push("- Please upgrade Node.js:",`    Found ${o}`,`    Requires ${l}`)}else if(Ob.includes(_r)){let[o,l]=_r.split("-"),c=o.endsWith("musl")?" --libc=musl":"";n.push("- Ensure optional dependencies can be installed:","    npm install --include=optional sharp","- Ensure your package manager supports multi-platform installation:","    See https://sharp.pixelplumbing.com/install#cross-platform","- Add platform-specific dependencies:",`    npm install --os=${o.replace("musl","")}${c} --cpu=${l} sharp`)}else n.push(`- Manually install libvips >= ${jb}`,"- Add experimental WebAssembly-based dependencies:","    npm install --cpu=wasm32 sharp","    npm install @img/sharp-wasm32");if(e&&/(symbol not found|CXXABI_)/i.test(a))try{let{config:o}=require(`@img/sharp-libvips-${_r}/package`),l=`${kb()} ${Cb()}`,c=`${o.musl?"musl":"glibc"} ${o.musl||o.glibc}`;n.push("- Update your OS:",`    Found ${l}`,`    Requires ${c}`)}catch{}throw e&&/\/snap\/core[0-9]{2}/.test(a)&&n.push("- Remove the Node.js Snap, which does not support native modules","    snap remove node"),t&&/Incompatible library version/.test(a)&&n.push("- Update Homebrew:","    brew update && brew upgrade vips"),wa.some(o=>o.code==="ERR_DLOPEN_DISABLED")&&n.push("- Run Node.js without using the --no-addons flag"),r&&/The specified procedure could not be found/.test(a)&&n.push("- Using the canvas package on Windows?","    See https://sharp.pixelplumbing.com/install#canvas-and-windows","- Check for outdated versions of sharp in the dependency tree:","    npm ls sharp"),n.push("- Consult the installation documentation:","    See https://sharp.pixelplumbing.com/install"),new Error(n.join(`
`))}});var Sf=H((vE,Ef)=>{"use strict";var Lb=require("node:util"),Ls=require("node:stream"),$b=ut();si();var qb=Lb.debuglog("sharp"),Er=function(e,t){if(arguments.length===1&&!$b.defined(e))throw new Error("Invalid input");return this instanceof Er?(Ls.Duplex.call(this),this.options={topOffsetPre:-1,leftOffsetPre:-1,widthPre:-1,heightPre:-1,topOffsetPost:-1,leftOffsetPost:-1,widthPost:-1,heightPost:-1,width:-1,height:-1,canvas:"crop",position:0,resizeBackground:[0,0,0,255],useExifOrientation:!1,angle:0,rotationAngle:0,rotationBackground:[0,0,0,255],rotateBeforePreExtract:!1,flip:!1,flop:!1,extendTop:0,extendBottom:0,extendLeft:0,extendRight:0,extendBackground:[0,0,0,255],extendWith:"background",withoutEnlargement:!1,withoutReduction:!1,affineMatrix:[],affineBackground:[0,0,0,255],affineIdx:0,affineIdy:0,affineOdx:0,affineOdy:0,affineInterpolator:this.constructor.interpolators.bilinear,kernel:"lanczos3",fastShrinkOnLoad:!0,tint:[-1,0,0,0],flatten:!1,flattenBackground:[0,0,0],unflatten:!1,negate:!1,negateAlpha:!0,medianSize:0,blurSigma:0,precision:"integer",minAmpl:.2,sharpenSigma:0,sharpenM1:1,sharpenM2:2,sharpenX1:2,sharpenY2:10,sharpenY3:20,threshold:0,thresholdGrayscale:!0,trimBackground:[],trimThreshold:-1,trimLineArt:!1,gamma:0,gammaOut:0,greyscale:!1,normalise:!1,normaliseLower:1,normaliseUpper:99,claheWidth:0,claheHeight:0,claheMaxSlope:3,brightness:1,saturation:1,hue:0,lightness:0,booleanBufferIn:null,booleanFileIn:"",joinChannelIn:[],extractChannel:-1,removeAlpha:!1,ensureAlpha:-1,colourspace:"srgb",colourspacePipeline:"last",composite:[],fileOut:"",formatOut:"input",streamOut:!1,keepMetadata:0,withMetadataOrientation:-1,withMetadataDensity:0,withIccProfile:"",withExif:{},withExifMerge:!0,resolveWithObject:!1,jpegQuality:80,jpegProgressive:!1,jpegChromaSubsampling:"4:2:0",jpegTrellisQuantisation:!1,jpegOvershootDeringing:!1,jpegOptimiseScans:!1,jpegOptimiseCoding:!0,jpegQuantisationTable:0,pngProgressive:!1,pngCompressionLevel:6,pngAdaptiveFiltering:!1,pngPalette:!1,pngQuality:100,pngEffort:7,pngBitdepth:8,pngDither:1,jp2Quality:80,jp2TileHeight:512,jp2TileWidth:512,jp2Lossless:!1,jp2ChromaSubsampling:"4:4:4",webpQuality:80,webpAlphaQuality:100,webpLossless:!1,webpNearLossless:!1,webpSmartSubsample:!1,webpPreset:"default",webpEffort:4,webpMinSize:!1,webpMixed:!1,gifBitdepth:8,gifEffort:7,gifDither:1,gifInterFrameMaxError:0,gifInterPaletteMaxError:3,gifReuse:!0,gifProgressive:!1,tiffQuality:80,tiffCompression:"jpeg",tiffPredictor:"horizontal",tiffPyramid:!1,tiffMiniswhite:!1,tiffBitdepth:8,tiffTile:!1,tiffTileHeight:256,tiffTileWidth:256,tiffXres:1,tiffYres:1,tiffResolutionUnit:"inch",heifQuality:50,heifLossless:!1,heifCompression:"av1",heifEffort:4,heifChromaSubsampling:"4:4:4",heifBitdepth:8,jxlDistance:1,jxlDecodingTier:0,jxlEffort:7,jxlLossless:!1,rawDepth:"uchar",tileSize:256,tileOverlap:0,tileContainer:"fs",tileLayout:"dz",tileFormat:"last",tileDepth:"last",tileAngle:0,tileSkipBlanks:-1,tileBackground:[255,255,255,255],tileCentre:!1,tileId:"https://example.com/iiif",tileBasename:"",timeoutSeconds:0,linearA:[],linearB:[],debuglog:r=>{this.emit("warning",r),qb(r)},queueListener:function(r){Er.queue.emit("change",r)}},this.options.input=this._createInputDescriptor(e,t,{allowStream:!0}),this):new Er(e,t)};Object.setPrototypeOf(Er.prototype,Ls.Duplex.prototype);Object.setPrototypeOf(Er,Ls.Duplex);function Db(){let e=this.constructor.call(),{debuglog:t,queueListener:r,...n}=this.options;return e.options=structuredClone(n),e.options.debuglog=t,e.options.queueListener=r,this._isStreamInput()&&this.on("finish",()=>{this._flattenBufferIn(),e.options.input.buffer=this.options.input.buffer,e.emit("finish")}),e}Object.assign(Er.prototype,{clone:Db});Ef.exports=Er});var $s=H((_E,Rf)=>{"use strict";Rf.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var xf=H((EE,Tf)=>{Tf.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var kf=H((SE,Af)=>{"use strict";var Fb=xf(),Nb=Array.prototype.concat,Mb=Array.prototype.slice,Pf=Af.exports=function(t){for(var r=[],n=0,a=t.length;n<a;n++){var o=t[n];Fb(o)?r=Nb.call(r,Mb.call(o)):r.push(o)}return r};Pf.wrap=function(e){return function(){return e(Pf(arguments))}}});var jf=H((RE,Of)=>{var li=$s(),ci=kf(),Cf=Object.hasOwnProperty,If=Object.create(null);for(va in li)Cf.call(li,va)&&(If[li[va]]=va);var va,Ne=Of.exports={to:{},get:{}};Ne.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Ne.get.hsl(e),n="hsl";break;case"hwb":r=Ne.get.hwb(e),n="hwb";break;default:r=Ne.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Ne.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,l=[0,0,0,1],c,f,p;if(c=e.match(r)){for(p=c[2],c=c[1],f=0;f<3;f++){var m=f*2;l[f]=parseInt(c.slice(m,m+2),16)}p&&(l[3]=parseInt(p,16)/255)}else if(c=e.match(t)){for(c=c[1],p=c[3],f=0;f<3;f++)l[f]=parseInt(c[f]+c[f],16);p&&(l[3]=parseInt(p+p,16)/255)}else if(c=e.match(n)){for(f=0;f<3;f++)l[f]=parseInt(c[f+1],0);c[4]&&(c[5]?l[3]=parseFloat(c[4])*.01:l[3]=parseFloat(c[4]))}else if(c=e.match(a)){for(f=0;f<3;f++)l[f]=Math.round(parseFloat(c[f+1])*2.55);c[4]&&(c[5]?l[3]=parseFloat(c[4])*.01:l[3]=parseFloat(c[4]))}else return(c=e.match(o))?c[1]==="transparent"?[0,0,0,0]:Cf.call(li,c[1])?(l=li[c[1]],l[3]=1,l):null:null;for(f=0;f<3;f++)l[f]=er(l[f],0,255);return l[3]=er(l[3],0,1),l};Ne.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,o=er(parseFloat(r[2]),0,100),l=er(parseFloat(r[3]),0,100),c=er(isNaN(n)?1:n,0,1);return[a,o,l,c]}return null};Ne.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,o=er(parseFloat(r[2]),0,100),l=er(parseFloat(r[3]),0,100),c=er(isNaN(n)?1:n,0,1);return[a,o,l,c]}return null};Ne.to.hex=function(){var e=ci(arguments);return"#"+_a(e[0])+_a(e[1])+_a(e[2])+(e[3]<1?_a(Math.round(e[3]*255)):"")};Ne.to.rgb=function(){var e=ci(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Ne.to.rgb.percent=function(){var e=ci(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Ne.to.hsl=function(){var e=ci(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Ne.to.hwb=function(){var e=ci(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Ne.to.keyword=function(e){return If[e.slice(0,3)]};function er(e,t,r){return Math.min(Math.max(t,e),r)}function _a(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var qs=H((TE,Lf)=>{var ui=$s(),Bf={};for(let e of Object.keys(ui))Bf[ui[e]]=e;var B={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Lf.exports=B;for(let e of Object.keys(B)){if(!("channels"in B[e]))throw new Error("missing channels property: "+e);if(!("labels"in B[e]))throw new Error("missing channel labels property: "+e);if(B[e].labels.length!==B[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=B[e];delete B[e].channels,delete B[e].labels,Object.defineProperty(B[e],"channels",{value:t}),Object.defineProperty(B[e],"labels",{value:r})}B.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.min(t,r,n),o=Math.max(t,r,n),l=o-a,c,f;o===a?c=0:t===o?c=(r-n)/l:r===o?c=2+(n-t)/l:n===o&&(c=4+(t-r)/l),c=Math.min(c*60,360),c<0&&(c+=360);let p=(a+o)/2;return o===a?f=0:p<=.5?f=l/(o+a):f=l/(2-o-a),[c,f*100,p*100]};B.rgb.hsv=function(e){let t,r,n,a,o,l=e[0]/255,c=e[1]/255,f=e[2]/255,p=Math.max(l,c,f),m=p-Math.min(l,c,f),b=function(_){return(p-_)/6/m+1/2};return m===0?(a=0,o=0):(o=m/p,t=b(l),r=b(c),n=b(f),l===p?a=n-r:c===p?a=1/3+t-n:f===p&&(a=2/3+r-t),a<0?a+=1:a>1&&(a-=1)),[a*360,o*100,p*100]};B.rgb.hwb=function(e){let t=e[0],r=e[1],n=e[2],a=B.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[a,o*100,n*100]};B.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.min(1-t,1-r,1-n),o=(1-t-a)/(1-a)||0,l=(1-r-a)/(1-a)||0,c=(1-n-a)/(1-a)||0;return[o*100,l*100,c*100,a*100]};function Wb(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}B.rgb.keyword=function(e){let t=Bf[e];if(t)return t;let r=1/0,n;for(let a of Object.keys(ui)){let o=ui[a],l=Wb(e,o);l<r&&(r=l,n=a)}return n};B.keyword.rgb=function(e){return ui[e]};B.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let a=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,l=t*.0193+r*.1192+n*.9505;return[a*100,o*100,l*100]};B.rgb.lab=function(e){let t=B.rgb.xyz(e),r=t[0],n=t[1],a=t[2];r/=95.047,n/=100,a/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;let o=116*n-16,l=500*(r-n),c=200*(n-a);return[o,l,c]};B.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100,a,o,l;if(r===0)return l=n*255,[l,l,l];n<.5?a=n*(1+r):a=n+r-n*r;let c=2*n-a,f=[0,0,0];for(let p=0;p<3;p++)o=t+1/3*-(p-1),o<0&&o++,o>1&&o--,6*o<1?l=c+(a-c)*6*o:2*o<1?l=a:3*o<2?l=c+(a-c)*(2/3-o)*6:l=c,f[p]=l*255;return f};B.hsl.hsv=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,a=r,o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,a*=o<=1?o:2-o;let l=(n+r)/2,c=n===0?2*a/(o+a):2*r/(n+r);return[t,c*100,l*100]};B.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,n=e[2]/100,a=Math.floor(t)%6,o=t-Math.floor(t),l=255*n*(1-r),c=255*n*(1-r*o),f=255*n*(1-r*(1-o));switch(n*=255,a){case 0:return[n,f,l];case 1:return[c,n,l];case 2:return[l,n,f];case 3:return[l,c,n];case 4:return[f,l,n];case 5:return[n,l,c]}};B.hsv.hsl=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,a=Math.max(n,.01),o,l;l=(2-r)*n;let c=(2-r)*a;return o=r*a,o/=c<=1?c:2-c,o=o||0,l/=2,[t,o*100,l*100]};B.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100,a=r+n,o;a>1&&(r/=a,n/=a);let l=Math.floor(6*t),c=1-n;o=6*t-l,l&1&&(o=1-o);let f=r+o*(c-r),p,m,b;switch(l){default:case 6:case 0:p=c,m=f,b=r;break;case 1:p=f,m=c,b=r;break;case 2:p=r,m=c,b=f;break;case 3:p=r,m=f,b=c;break;case 4:p=f,m=r,b=c;break;case 5:p=c,m=r,b=f;break}return[p*255,m*255,b*255]};B.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,a=e[3]/100,o=1-Math.min(1,t*(1-a)+a),l=1-Math.min(1,r*(1-a)+a),c=1-Math.min(1,n*(1-a)+a);return[o*255,l*255,c*255]};B.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,a,o,l;return a=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,l=t*.0557+r*-.204+n*1.057,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),l=Math.min(Math.max(0,l),1),[a*255,o*255,l*255]};B.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let a=116*r-16,o=500*(t-r),l=200*(r-n);return[a,o,l]};B.lab.xyz=function(e){let t=e[0],r=e[1],n=e[2],a,o,l;o=(t+16)/116,a=r/500+o,l=o-n/200;let c=o**3,f=a**3,p=l**3;return o=c>.008856?c:(o-16/116)/7.787,a=f>.008856?f:(a-16/116)/7.787,l=p>.008856?p:(l-16/116)/7.787,a*=95.047,o*=100,l*=108.883,[a,o,l]};B.lab.lch=function(e){let t=e[0],r=e[1],n=e[2],a;a=Math.atan2(n,r)*360/2/Math.PI,a<0&&(a+=360);let l=Math.sqrt(r*r+n*n);return[t,l,a]};B.lch.lab=function(e){let t=e[0],r=e[1],a=e[2]/360*2*Math.PI,o=r*Math.cos(a),l=r*Math.sin(a);return[t,o,l]};B.rgb.ansi16=function(e,t=null){let[r,n,a]=e,o=t===null?B.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let l=30+(Math.round(a/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(l+=60),l};B.hsv.ansi16=function(e){return B.rgb.ansi16(B.hsv.rgb(e),e[2])};B.rgb.ansi256=function(e){let t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};B.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,n=(t&1)*r*255,a=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,a,o]};B.ansi256.rgb=function(e){if(e>=232){let o=(e-232)*10+8;return[o,o,o]}e-=16;let t,r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255,a=t%6/5*255;return[r,n,a]};B.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};B.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(c=>c+c).join(""));let n=parseInt(r,16),a=n>>16&255,o=n>>8&255,l=n&255;return[a,o,l]};B.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),l=a-o,c,f;return l<1?c=o/(1-l):c=0,l<=0?f=0:a===t?f=(r-n)/l%6:a===r?f=2+(n-t)/l:f=4+(t-r)/l,f/=6,f%=1,[f*360,l*100,c*100]};B.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r),a=0;return n<1&&(a=(r-.5*n)/(1-n)),[e[0],n*100,a*100]};B.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=t*r,a=0;return n<1&&(a=(r-n)/(1-n)),[e[0],n*100,a*100]};B.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];let a=[0,0,0],o=t%1*6,l=o%1,c=1-l,f=0;switch(Math.floor(o)){case 0:a[0]=1,a[1]=l,a[2]=0;break;case 1:a[0]=c,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=l;break;case 3:a[0]=0,a[1]=c,a[2]=1;break;case 4:a[0]=l,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=c}return f=(1-r)*n,[(r*a[0]+f)*255,(r*a[1]+f)*255,(r*a[2]+f)*255]};B.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t),a=0;return n>0&&(a=t/n),[e[0],a*100,n*100]};B.hcg.hsl=function(e){let t=e[1]/100,n=e[2]/100*(1-t)+.5*t,a=0;return n>0&&n<.5?a=t/(2*n):n>=.5&&n<1&&(a=t/(2*(1-n))),[e[0],a*100,n*100]};B.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};B.hwb.hcg=function(e){let t=e[1]/100,n=1-e[2]/100,a=n-t,o=0;return a<1&&(o=(n-a)/(1-a)),[e[0],a*100,o*100]};B.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};B.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};B.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};B.gray.hsl=function(e){return[0,0,e[0]]};B.gray.hsv=B.gray.hsl;B.gray.hwb=function(e){return[0,100,e[0]]};B.gray.cmyk=function(e){return[0,0,0,e[0]]};B.gray.lab=function(e){return[e[0],0,0]};B.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};B.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var qf=H((xE,$f)=>{var Ea=qs();function zb(){let e={},t=Object.keys(Ea);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function Ub(e){let t=zb(),r=[e];for(t[e].distance=0;r.length;){let n=r.pop(),a=Object.keys(Ea[n]);for(let o=a.length,l=0;l<o;l++){let c=a[l],f=t[c];f.distance===-1&&(f.distance=t[n].distance+1,f.parent=n,r.unshift(c))}}return t}function Hb(e,t){return function(r){return t(e(r))}}function Gb(e,t){let r=[t[e].parent,e],n=Ea[t[e].parent][e],a=t[e].parent;for(;t[a].parent;)r.unshift(t[a].parent),n=Hb(Ea[t[a].parent][a],n),a=t[a].parent;return n.conversion=r,n}$f.exports=function(e){let t=Ub(e),r={},n=Object.keys(t);for(let a=n.length,o=0;o<a;o++){let l=n[o];t[l].parent!==null&&(r[l]=Gb(l,t))}return r}});var Ff=H((PE,Df)=>{var Ds=qs(),Vb=qf(),hn={},Zb=Object.keys(Ds);function Qb(e){let t=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function Yb(e){let t=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let a=e(r);if(typeof a=="object")for(let o=a.length,l=0;l<o;l++)a[l]=Math.round(a[l]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}Zb.forEach(e=>{hn[e]={},Object.defineProperty(hn[e],"channels",{value:Ds[e].channels}),Object.defineProperty(hn[e],"labels",{value:Ds[e].labels});let t=Vb(e);Object.keys(t).forEach(n=>{let a=t[n];hn[e][n]=Yb(a),hn[e][n].raw=Qb(a)})});Df.exports=hn});var Ra=H((AE,Mf)=>{var mn=jf(),Me=Ff(),Nf=["keyword","gray","hex"],Fs={};for(let e of Object.keys(Me))Fs[[...Me[e].labels].sort().join("")]=e;var Sa={};function ye(e,t){if(!(this instanceof ye))return new ye(e,t);if(t&&t in Nf&&(t=null),t&&!(t in Me))throw new Error("Unknown model: "+t);let r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof ye)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){let a=mn.get(e);if(a===null)throw new Error("Unable to parse color from string: "+e);this.model=a.model,n=Me[this.model].channels,this.color=a.value.slice(0,n),this.valpha=typeof a.value[n]=="number"?a.value[n]:1}else if(e.length>0){this.model=t||"rgb",n=Me[this.model].channels;let a=Array.prototype.slice.call(e,0,n);this.color=Ns(a,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;let a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);let o=a.sort().join("");if(!(o in Fs))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Fs[o];let{labels:l}=Me[this.model],c=[];for(r=0;r<l.length;r++)c.push(e[l[r]]);this.color=Ns(c)}if(Sa[this.model])for(n=Me[this.model].channels,r=0;r<n;r++){let a=Sa[this.model][r];a&&(this.color[r]=a(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ye.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in mn.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);let r=t.valpha===1?t.color:[...t.color,this.valpha];return mn.to[t.model](r)},percentString(e){let t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:[...t.color,this.valpha];return mn.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let e={},{channels:t}=Me[this.model],{labels:r}=Me[this.model];for(let n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){let e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){let e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new ye([...this.color.map(Jb(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new ye([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:me("rgb",0,be(255)),green:me("rgb",1,be(255)),blue:me("rgb",2,be(255)),hue:me(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:me("hsl",1,be(100)),lightness:me("hsl",2,be(100)),saturationv:me("hsv",1,be(100)),value:me("hsv",2,be(100)),chroma:me("hcg",1,be(100)),gray:me("hcg",2,be(100)),white:me("hwb",1,be(100)),wblack:me("hwb",2,be(100)),cyan:me("cmyk",0,be(100)),magenta:me("cmyk",1,be(100)),yellow:me("cmyk",2,be(100)),black:me("cmyk",3,be(100)),x:me("xyz",0,be(95.047)),y:me("xyz",1,be(100)),z:me("xyz",2,be(108.833)),l:me("lab",0,be(100)),a:me("lab",1),b:me("lab",2),keyword(e){return e!==void 0?new ye(e):Me[this.model].keyword(this.color)},hex(e){return e!==void 0?new ye(e):mn.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new ye(e);let t=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),mn.to.hex(t)+r},rgbNumber(){let e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){let e=this.rgb().color,t=[];for(let[r,n]of e.entries()){let a=n/255;t[r]=a<=.04045?a/12.92:((a+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){let t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){let t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){let e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){let t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){let t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){let t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){let t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){let t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){let t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){let e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return ye.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){let t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);let r=e.rgb(),n=this.rgb(),a=t===void 0?.5:t,o=2*a-1,l=r.alpha()-n.alpha(),c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2,f=1-c;return ye.rgb(c*r.red()+f*n.red(),c*r.green()+f*n.green(),c*r.blue()+f*n.blue(),r.alpha()*a+n.alpha()*(1-a))}};for(let e of Object.keys(Me)){if(Nf.includes(e))continue;let{channels:t}=Me[e];ye.prototype[e]=function(...r){return this.model===e?new ye(this):r.length>0?new ye(r,e):new ye([...Kb(Me[this.model][e].raw(this.color)),this.valpha],e)},ye[e]=function(...r){let n=r[0];return typeof n=="number"&&(n=Ns(r,t)),new ye(n,e)}}function Xb(e,t){return Number(e.toFixed(t))}function Jb(e){return function(t){return Xb(t,e)}}function me(e,t,r){e=Array.isArray(e)?e:[e];for(let n of e)(Sa[n]||(Sa[n]=[]))[t]=r;return e=e[0],function(n){let a;return n!==void 0?(r&&(n=r(n)),a=this[e](),a.color[t]=n,a):(a=this[e]().color[t],r&&(a=r(a)),a)}}function be(e){return function(t){return Math.max(0,Math.min(e,t))}}function Kb(e){return Array.isArray(e)?e:[e]}function Ns(e,t){for(let r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}Mf.exports=ye});var Uf=H((kE,zf)=>{"use strict";var ey=Ra(),E=ut(),tr=si(),ty={left:"low",center:"centre",centre:"centre",right:"high"};function Wf(e){let{raw:t,density:r,limitInputPixels:n,ignoreIcc:a,unlimited:o,sequentialRead:l,failOn:c,failOnError:f,animated:p,page:m,pages:b,subifd:_}=e;return[t,r,n,a,o,l,c,f,p,m,b,_].some(E.defined)?{raw:t,density:r,limitInputPixels:n,ignoreIcc:a,unlimited:o,sequentialRead:l,failOn:c,failOnError:f,animated:p,page:m,pages:b,subifd:_}:void 0}function ry(e,t,r){let n={failOn:"warning",limitInputPixels:Math.pow(16383,2),ignoreIcc:!1,unlimited:!1,sequentialRead:!0};if(E.string(e))n.file=e;else if(E.buffer(e)){if(e.length===0)throw Error("Input Buffer is empty");n.buffer=e}else if(E.arrayBuffer(e)){if(e.byteLength===0)throw Error("Input bit Array is empty");n.buffer=Buffer.from(e,0,e.byteLength)}else if(E.typedArray(e)){if(e.length===0)throw Error("Input Bit Array is empty");n.buffer=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}else if(E.plainObject(e)&&!E.defined(t))t=e,Wf(t)&&(n.buffer=[]);else if(!E.defined(e)&&!E.defined(t)&&E.object(r)&&r.allowStream)n.buffer=[];else throw new Error(`Unsupported input '${e}' of type ${typeof e}${E.defined(t)?` when also providing options of type ${typeof t}`:""}`);if(E.object(t)){if(E.defined(t.failOnError))if(E.bool(t.failOnError))n.failOn=t.failOnError?"warning":"none";else throw E.invalidParameterError("failOnError","boolean",t.failOnError);if(E.defined(t.failOn))if(E.string(t.failOn)&&E.inArray(t.failOn,["none","truncated","error","warning"]))n.failOn=t.failOn;else throw E.invalidParameterError("failOn","one of: none, truncated, error, warning",t.failOn);if(E.defined(t.density))if(E.inRange(t.density,1,1e5))n.density=t.density;else throw E.invalidParameterError("density","number between 1 and 100000",t.density);if(E.defined(t.ignoreIcc))if(E.bool(t.ignoreIcc))n.ignoreIcc=t.ignoreIcc;else throw E.invalidParameterError("ignoreIcc","boolean",t.ignoreIcc);if(E.defined(t.limitInputPixels))if(E.bool(t.limitInputPixels))n.limitInputPixels=t.limitInputPixels?Math.pow(16383,2):0;else if(E.integer(t.limitInputPixels)&&E.inRange(t.limitInputPixels,0,Number.MAX_SAFE_INTEGER))n.limitInputPixels=t.limitInputPixels;else throw E.invalidParameterError("limitInputPixels","positive integer",t.limitInputPixels);if(E.defined(t.unlimited))if(E.bool(t.unlimited))n.unlimited=t.unlimited;else throw E.invalidParameterError("unlimited","boolean",t.unlimited);if(E.defined(t.sequentialRead))if(E.bool(t.sequentialRead))n.sequentialRead=t.sequentialRead;else throw E.invalidParameterError("sequentialRead","boolean",t.sequentialRead);if(E.defined(t.raw))if(E.object(t.raw)&&E.integer(t.raw.width)&&t.raw.width>0&&E.integer(t.raw.height)&&t.raw.height>0&&E.integer(t.raw.channels)&&E.inRange(t.raw.channels,1,4))switch(n.rawWidth=t.raw.width,n.rawHeight=t.raw.height,n.rawChannels=t.raw.channels,n.rawPremultiplied=!!t.raw.premultiplied,e.constructor){case Uint8Array:case Uint8ClampedArray:n.rawDepth="uchar";break;case Int8Array:n.rawDepth="char";break;case Uint16Array:n.rawDepth="ushort";break;case Int16Array:n.rawDepth="short";break;case Uint32Array:n.rawDepth="uint";break;case Int32Array:n.rawDepth="int";break;case Float32Array:n.rawDepth="float";break;case Float64Array:n.rawDepth="double";break;default:n.rawDepth="uchar";break}else throw new Error("Expected width, height and channels for raw pixel input");if(E.defined(t.animated))if(E.bool(t.animated))n.pages=t.animated?-1:1;else throw E.invalidParameterError("animated","boolean",t.animated);if(E.defined(t.pages))if(E.integer(t.pages)&&E.inRange(t.pages,-1,1e5))n.pages=t.pages;else throw E.invalidParameterError("pages","integer between -1 and 100000",t.pages);if(E.defined(t.page))if(E.integer(t.page)&&E.inRange(t.page,0,1e5))n.page=t.page;else throw E.invalidParameterError("page","integer between 0 and 100000",t.page);if(E.defined(t.level))if(E.integer(t.level)&&E.inRange(t.level,0,256))n.level=t.level;else throw E.invalidParameterError("level","integer between 0 and 256",t.level);if(E.defined(t.subifd))if(E.integer(t.subifd)&&E.inRange(t.subifd,-1,1e5))n.subifd=t.subifd;else throw E.invalidParameterError("subifd","integer between -1 and 100000",t.subifd);if(E.defined(t.create))if(E.object(t.create)&&E.integer(t.create.width)&&t.create.width>0&&E.integer(t.create.height)&&t.create.height>0&&E.integer(t.create.channels)){if(n.createWidth=t.create.width,n.createHeight=t.create.height,n.createChannels=t.create.channels,E.defined(t.create.noise)){if(!E.object(t.create.noise))throw new Error("Expected noise to be an object");if(!E.inArray(t.create.noise.type,["gaussian"]))throw new Error("Only gaussian noise is supported at the moment");if(!E.inRange(t.create.channels,1,4))throw E.invalidParameterError("create.channels","number between 1 and 4",t.create.channels);if(n.createNoiseType=t.create.noise.type,E.number(t.create.noise.mean)&&E.inRange(t.create.noise.mean,0,1e4))n.createNoiseMean=t.create.noise.mean;else throw E.invalidParameterError("create.noise.mean","number between 0 and 10000",t.create.noise.mean);if(E.number(t.create.noise.sigma)&&E.inRange(t.create.noise.sigma,0,1e4))n.createNoiseSigma=t.create.noise.sigma;else throw E.invalidParameterError("create.noise.sigma","number between 0 and 10000",t.create.noise.sigma)}else if(E.defined(t.create.background)){if(!E.inRange(t.create.channels,3,4))throw E.invalidParameterError("create.channels","number between 3 and 4",t.create.channels);let a=ey(t.create.background);n.createBackground=[a.red(),a.green(),a.blue(),Math.round(a.alpha()*255)]}else throw new Error("Expected valid noise or background to create a new input image");delete n.buffer}else throw new Error("Expected valid width, height and channels to create a new input image");if(E.defined(t.text))if(E.object(t.text)&&E.string(t.text.text)){if(n.textValue=t.text.text,E.defined(t.text.height)&&E.defined(t.text.dpi))throw new Error("Expected only one of dpi or height");if(E.defined(t.text.font))if(E.string(t.text.font))n.textFont=t.text.font;else throw E.invalidParameterError("text.font","string",t.text.font);if(E.defined(t.text.fontfile))if(E.string(t.text.fontfile))n.textFontfile=t.text.fontfile;else throw E.invalidParameterError("text.fontfile","string",t.text.fontfile);if(E.defined(t.text.width))if(E.integer(t.text.width)&&t.text.width>0)n.textWidth=t.text.width;else throw E.invalidParameterError("text.width","positive integer",t.text.width);if(E.defined(t.text.height))if(E.integer(t.text.height)&&t.text.height>0)n.textHeight=t.text.height;else throw E.invalidParameterError("text.height","positive integer",t.text.height);if(E.defined(t.text.align))if(E.string(t.text.align)&&E.string(this.constructor.align[t.text.align]))n.textAlign=this.constructor.align[t.text.align];else throw E.invalidParameterError("text.align","valid alignment",t.text.align);if(E.defined(t.text.justify))if(E.bool(t.text.justify))n.textJustify=t.text.justify;else throw E.invalidParameterError("text.justify","boolean",t.text.justify);if(E.defined(t.text.dpi))if(E.integer(t.text.dpi)&&E.inRange(t.text.dpi,1,1e6))n.textDpi=t.text.dpi;else throw E.invalidParameterError("text.dpi","integer between 1 and 1000000",t.text.dpi);if(E.defined(t.text.rgba))if(E.bool(t.text.rgba))n.textRgba=t.text.rgba;else throw E.invalidParameterError("text.rgba","bool",t.text.rgba);if(E.defined(t.text.spacing))if(E.integer(t.text.spacing)&&E.inRange(t.text.spacing,-1e6,1e6))n.textSpacing=t.text.spacing;else throw E.invalidParameterError("text.spacing","integer between -1000000 and 1000000",t.text.spacing);if(E.defined(t.text.wrap))if(E.string(t.text.wrap)&&E.inArray(t.text.wrap,["word","char","word-char","none"]))n.textWrap=t.text.wrap;else throw E.invalidParameterError("text.wrap","one of: word, char, word-char, none",t.text.wrap);delete n.buffer}else throw new Error("Expected a valid string to create an image with text.")}else if(E.defined(t))throw new Error("Invalid input options "+t);return n}function ny(e,t,r){Array.isArray(this.options.input.buffer)?E.buffer(e)?(this.options.input.buffer.length===0&&this.on("finish",()=>{this.streamInFinished=!0}),this.options.input.buffer.push(e),r()):r(new Error("Non-Buffer data on Writable Stream")):r(new Error("Unexpected data on Writable Stream"))}function iy(){this._isStreamInput()&&(this.options.input.buffer=Buffer.concat(this.options.input.buffer))}function ay(){return Array.isArray(this.options.input.buffer)}function oy(e){let t=Error();return E.fn(e)?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),tr.metadata(this.options,(r,n)=>{r?e(E.nativeError(r,t)):e(null,n)})}):tr.metadata(this.options,(r,n)=>{r?e(E.nativeError(r,t)):e(null,n)}),this):this._isStreamInput()?new Promise((r,n)=>{let a=()=>{this._flattenBufferIn(),tr.metadata(this.options,(o,l)=>{o?n(E.nativeError(o,t)):r(l)})};this.writableFinished?a():this.once("finish",a)}):new Promise((r,n)=>{tr.metadata(this.options,(a,o)=>{a?n(E.nativeError(a,t)):r(o)})})}function sy(e){let t=Error();return E.fn(e)?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),tr.stats(this.options,(r,n)=>{r?e(E.nativeError(r,t)):e(null,n)})}):tr.stats(this.options,(r,n)=>{r?e(E.nativeError(r,t)):e(null,n)}),this):this._isStreamInput()?new Promise((r,n)=>{this.on("finish",function(){this._flattenBufferIn(),tr.stats(this.options,(a,o)=>{a?n(E.nativeError(a,t)):r(o)})})}):new Promise((r,n)=>{tr.stats(this.options,(a,o)=>{a?n(E.nativeError(a,t)):r(o)})})}zf.exports=function(e){Object.assign(e.prototype,{_inputOptionsFromObject:Wf,_createInputDescriptor:ry,_write:ny,_flattenBufferIn:iy,_isStreamInput:ay,metadata:oy,stats:sy}),e.align=ty}});var Yf=H((CE,Qf)=>{"use strict";var $=ut(),Gf={center:0,centre:0,north:1,east:2,south:3,west:4,northeast:5,southeast:6,southwest:7,northwest:8},Vf={top:1,right:2,bottom:3,left:4,"right top":5,"right bottom":6,"left bottom":7,"left top":8},Hf={background:"background",copy:"copy",repeat:"repeat",mirror:"mirror"},Zf={entropy:16,attention:17},Ms={nearest:"nearest",linear:"linear",cubic:"cubic",mitchell:"mitchell",lanczos2:"lanczos2",lanczos3:"lanczos3"},ly={contain:"contain",cover:"cover",fill:"fill",inside:"inside",outside:"outside"},cy={contain:"embed",cover:"crop",fill:"ignore_aspect",inside:"max",outside:"min"};function Ws(e){return e.angle%360!==0||e.useExifOrientation===!0||e.rotationAngle!==0}function Ta(e){return e.width!==-1||e.height!==-1}function uy(e,t,r){if(Ta(this.options)&&this.options.debuglog("ignoring previous resize options"),this.options.widthPost!==-1&&this.options.debuglog("operation order will be: extract, resize, extract"),$.defined(e))if($.object(e)&&!$.defined(r))r=e;else if($.integer(e)&&e>0)this.options.width=e;else throw $.invalidParameterError("width","positive integer",e);else this.options.width=-1;if($.defined(t))if($.integer(t)&&t>0)this.options.height=t;else throw $.invalidParameterError("height","positive integer",t);else this.options.height=-1;if($.object(r)){if($.defined(r.width))if($.integer(r.width)&&r.width>0)this.options.width=r.width;else throw $.invalidParameterError("width","positive integer",r.width);if($.defined(r.height))if($.integer(r.height)&&r.height>0)this.options.height=r.height;else throw $.invalidParameterError("height","positive integer",r.height);if($.defined(r.fit)){let n=cy[r.fit];if($.string(n))this.options.canvas=n;else throw $.invalidParameterError("fit","valid fit",r.fit)}if($.defined(r.position)){let n=$.integer(r.position)?r.position:Zf[r.position]||Vf[r.position]||Gf[r.position];if($.integer(n)&&($.inRange(n,0,8)||$.inRange(n,16,17)))this.options.position=n;else throw $.invalidParameterError("position","valid position/gravity/strategy",r.position)}if(this._setBackgroundColourOption("resizeBackground",r.background),$.defined(r.kernel))if($.string(Ms[r.kernel]))this.options.kernel=Ms[r.kernel];else throw $.invalidParameterError("kernel","valid kernel name",r.kernel);$.defined(r.withoutEnlargement)&&this._setBooleanOption("withoutEnlargement",r.withoutEnlargement),$.defined(r.withoutReduction)&&this._setBooleanOption("withoutReduction",r.withoutReduction),$.defined(r.fastShrinkOnLoad)&&this._setBooleanOption("fastShrinkOnLoad",r.fastShrinkOnLoad)}return Ws(this.options)&&Ta(this.options)&&(this.options.rotateBeforePreExtract=!0),this}function dy(e){if($.integer(e)&&e>0)this.options.extendTop=e,this.options.extendBottom=e,this.options.extendLeft=e,this.options.extendRight=e;else if($.object(e)){if($.defined(e.top))if($.integer(e.top)&&e.top>=0)this.options.extendTop=e.top;else throw $.invalidParameterError("top","positive integer",e.top);if($.defined(e.bottom))if($.integer(e.bottom)&&e.bottom>=0)this.options.extendBottom=e.bottom;else throw $.invalidParameterError("bottom","positive integer",e.bottom);if($.defined(e.left))if($.integer(e.left)&&e.left>=0)this.options.extendLeft=e.left;else throw $.invalidParameterError("left","positive integer",e.left);if($.defined(e.right))if($.integer(e.right)&&e.right>=0)this.options.extendRight=e.right;else throw $.invalidParameterError("right","positive integer",e.right);if(this._setBackgroundColourOption("extendBackground",e.background),$.defined(e.extendWith))if($.string(Hf[e.extendWith]))this.options.extendWith=Hf[e.extendWith];else throw $.invalidParameterError("extendWith","one of: background, copy, repeat, mirror",e.extendWith)}else throw $.invalidParameterError("extend","integer or object",e);return this}function fy(e){let t=Ta(this.options)||this.options.widthPre!==-1?"Post":"Pre";return this.options[`width${t}`]!==-1&&this.options.debuglog("ignoring previous extract options"),["left","top","width","height"].forEach(function(r){let n=e[r];if($.integer(n)&&n>=0)this.options[r+(r==="left"||r==="top"?"Offset":"")+t]=n;else throw $.invalidParameterError(r,"integer",n)},this),Ws(this.options)&&!Ta(this.options)&&(this.options.widthPre===-1||this.options.widthPost===-1)&&(this.options.rotateBeforePreExtract=!0),this}function hy(e){if(this.options.trimThreshold=10,$.defined(e))if($.object(e)){if($.defined(e.background)&&this._setBackgroundColourOption("trimBackground",e.background),$.defined(e.threshold))if($.number(e.threshold)&&e.threshold>=0)this.options.trimThreshold=e.threshold;else throw $.invalidParameterError("threshold","positive number",e.threshold);$.defined(e.lineArt)&&this._setBooleanOption("trimLineArt",e.lineArt)}else throw $.invalidParameterError("trim","object",e);return Ws(this.options)&&(this.options.rotateBeforePreExtract=!0),this}Qf.exports=function(e){Object.assign(e.prototype,{resize:uy,extend:dy,extract:fy,trim:hy}),e.gravity=Gf,e.strategy=Zf,e.kernel=Ms,e.fit=ly,e.position=Vf}});var Jf=H((IE,Xf)=>{"use strict";var oe=ut(),zs={clear:"clear",source:"source",over:"over",in:"in",out:"out",atop:"atop",dest:"dest","dest-over":"dest-over","dest-in":"dest-in","dest-out":"dest-out","dest-atop":"dest-atop",xor:"xor",add:"add",saturate:"saturate",multiply:"multiply",screen:"screen",overlay:"overlay",darken:"darken",lighten:"lighten","colour-dodge":"colour-dodge","color-dodge":"colour-dodge","colour-burn":"colour-burn","color-burn":"colour-burn","hard-light":"hard-light","soft-light":"soft-light",difference:"difference",exclusion:"exclusion"};function my(e){if(!Array.isArray(e))throw oe.invalidParameterError("images to composite","array",e);return this.options.composite=e.map(t=>{if(!oe.object(t))throw oe.invalidParameterError("image to composite","object",t);let r=this._inputOptionsFromObject(t),n={input:this._createInputDescriptor(t.input,r,{allowStream:!1}),blend:"over",tile:!1,left:0,top:0,hasOffset:!1,gravity:0,premultiplied:!1};if(oe.defined(t.blend))if(oe.string(zs[t.blend]))n.blend=zs[t.blend];else throw oe.invalidParameterError("blend","valid blend name",t.blend);if(oe.defined(t.tile))if(oe.bool(t.tile))n.tile=t.tile;else throw oe.invalidParameterError("tile","boolean",t.tile);if(oe.defined(t.left))if(oe.integer(t.left))n.left=t.left;else throw oe.invalidParameterError("left","integer",t.left);if(oe.defined(t.top))if(oe.integer(t.top))n.top=t.top;else throw oe.invalidParameterError("top","integer",t.top);if(oe.defined(t.top)!==oe.defined(t.left))throw new Error("Expected both left and top to be set");if(n.hasOffset=oe.integer(t.top)&&oe.integer(t.left),oe.defined(t.gravity))if(oe.integer(t.gravity)&&oe.inRange(t.gravity,0,8))n.gravity=t.gravity;else if(oe.string(t.gravity)&&oe.integer(this.constructor.gravity[t.gravity]))n.gravity=this.constructor.gravity[t.gravity];else throw oe.invalidParameterError("gravity","valid gravity",t.gravity);if(oe.defined(t.premultiplied))if(oe.bool(t.premultiplied))n.premultiplied=t.premultiplied;else throw oe.invalidParameterError("premultiplied","boolean",t.premultiplied);return n}),this}Xf.exports=function(e){e.prototype.composite=my,e.blend=zs}});var th=H((OE,eh)=>{"use strict";var py=Ra(),w=ut(),Kf={integer:"integer",float:"float",approximate:"approximate"};function gy(e,t){if((this.options.useExifOrientation||this.options.angle||this.options.rotationAngle)&&this.options.debuglog("ignoring previous rotate options"),!w.defined(e))this.options.useExifOrientation=!0;else if(w.integer(e)&&!(e%90))this.options.angle=e;else if(w.number(e)){if(this.options.rotationAngle=e,w.object(t)&&t.background){let r=py(t.background);this.options.rotationBackground=[r.red(),r.green(),r.blue(),Math.round(r.alpha()*255)]}}else throw w.invalidParameterError("angle","numeric",e);return this}function by(e){return this.options.flip=w.bool(e)?e:!0,this}function yy(e){return this.options.flop=w.bool(e)?e:!0,this}function wy(e,t){let r=[].concat(...e);if(r.length===4&&r.every(w.number))this.options.affineMatrix=r;else throw w.invalidParameterError("matrix","1x4 or 2x2 array",e);if(w.defined(t))if(w.object(t)){if(this._setBackgroundColourOption("affineBackground",t.background),w.defined(t.idx))if(w.number(t.idx))this.options.affineIdx=t.idx;else throw w.invalidParameterError("options.idx","number",t.idx);if(w.defined(t.idy))if(w.number(t.idy))this.options.affineIdy=t.idy;else throw w.invalidParameterError("options.idy","number",t.idy);if(w.defined(t.odx))if(w.number(t.odx))this.options.affineOdx=t.odx;else throw w.invalidParameterError("options.odx","number",t.odx);if(w.defined(t.ody))if(w.number(t.ody))this.options.affineOdy=t.ody;else throw w.invalidParameterError("options.ody","number",t.ody);if(w.defined(t.interpolator))if(w.inArray(t.interpolator,Object.values(this.constructor.interpolators)))this.options.affineInterpolator=t.interpolator;else throw w.invalidParameterError("options.interpolator","valid interpolator name",t.interpolator)}else throw w.invalidParameterError("options","object",t);return this}function vy(e,t,r){if(!w.defined(e))this.options.sharpenSigma=-1;else if(w.bool(e))this.options.sharpenSigma=e?-1:0;else if(w.number(e)&&w.inRange(e,.01,1e4)){if(this.options.sharpenSigma=e,w.defined(t))if(w.number(t)&&w.inRange(t,0,1e4))this.options.sharpenM1=t;else throw w.invalidParameterError("flat","number between 0 and 10000",t);if(w.defined(r))if(w.number(r)&&w.inRange(r,0,1e4))this.options.sharpenM2=r;else throw w.invalidParameterError("jagged","number between 0 and 10000",r)}else if(w.plainObject(e)){if(w.number(e.sigma)&&w.inRange(e.sigma,1e-6,10))this.options.sharpenSigma=e.sigma;else throw w.invalidParameterError("options.sigma","number between 0.000001 and 10",e.sigma);if(w.defined(e.m1))if(w.number(e.m1)&&w.inRange(e.m1,0,1e6))this.options.sharpenM1=e.m1;else throw w.invalidParameterError("options.m1","number between 0 and 1000000",e.m1);if(w.defined(e.m2))if(w.number(e.m2)&&w.inRange(e.m2,0,1e6))this.options.sharpenM2=e.m2;else throw w.invalidParameterError("options.m2","number between 0 and 1000000",e.m2);if(w.defined(e.x1))if(w.number(e.x1)&&w.inRange(e.x1,0,1e6))this.options.sharpenX1=e.x1;else throw w.invalidParameterError("options.x1","number between 0 and 1000000",e.x1);if(w.defined(e.y2))if(w.number(e.y2)&&w.inRange(e.y2,0,1e6))this.options.sharpenY2=e.y2;else throw w.invalidParameterError("options.y2","number between 0 and 1000000",e.y2);if(w.defined(e.y3))if(w.number(e.y3)&&w.inRange(e.y3,0,1e6))this.options.sharpenY3=e.y3;else throw w.invalidParameterError("options.y3","number between 0 and 1000000",e.y3)}else throw w.invalidParameterError("sigma","number between 0.01 and 10000",e);return this}function _y(e){if(!w.defined(e))this.options.medianSize=3;else if(w.integer(e)&&w.inRange(e,1,1e3))this.options.medianSize=e;else throw w.invalidParameterError("size","integer between 1 and 1000",e);return this}function Ey(e){let t;if(w.number(e))t=e;else if(w.plainObject(e)){if(!w.number(e.sigma))throw w.invalidParameterError("options.sigma","number between 0.3 and 1000",t);if(t=e.sigma,"precision"in e)if(w.string(Kf[e.precision]))this.options.precision=Kf[e.precision];else throw w.invalidParameterError("precision","one of: integer, float, approximate",e.precision);if("minAmplitude"in e)if(w.number(e.minAmplitude)&&w.inRange(e.minAmplitude,.001,1))this.options.minAmpl=e.minAmplitude;else throw w.invalidParameterError("minAmplitude","number between 0.001 and 1",e.minAmplitude)}if(!w.defined(e))this.options.blurSigma=-1;else if(w.bool(e))this.options.blurSigma=e?-1:0;else if(w.number(t)&&w.inRange(t,.3,1e3))this.options.blurSigma=t;else throw w.invalidParameterError("sigma","number between 0.3 and 1000",t);return this}function Sy(e){return this.options.flatten=w.bool(e)?e:!0,w.object(e)&&this._setBackgroundColourOption("flattenBackground",e.background),this}function Ry(){return this.options.unflatten=!0,this}function Ty(e,t){if(!w.defined(e))this.options.gamma=2.2;else if(w.number(e)&&w.inRange(e,1,3))this.options.gamma=e;else throw w.invalidParameterError("gamma","number between 1.0 and 3.0",e);if(!w.defined(t))this.options.gammaOut=this.options.gamma;else if(w.number(t)&&w.inRange(t,1,3))this.options.gammaOut=t;else throw w.invalidParameterError("gammaOut","number between 1.0 and 3.0",t);return this}function xy(e){if(this.options.negate=w.bool(e)?e:!0,w.plainObject(e)&&"alpha"in e)if(w.bool(e.alpha))this.options.negateAlpha=e.alpha;else throw w.invalidParameterError("alpha","should be boolean value",e.alpha);return this}function Py(e){if(w.plainObject(e)){if(w.defined(e.lower))if(w.number(e.lower)&&w.inRange(e.lower,0,99))this.options.normaliseLower=e.lower;else throw w.invalidParameterError("lower","number between 0 and 99",e.lower);if(w.defined(e.upper))if(w.number(e.upper)&&w.inRange(e.upper,1,100))this.options.normaliseUpper=e.upper;else throw w.invalidParameterError("upper","number between 1 and 100",e.upper)}if(this.options.normaliseLower>=this.options.normaliseUpper)throw w.invalidParameterError("range","lower to be less than upper",`${this.options.normaliseLower} >= ${this.options.normaliseUpper}`);return this.options.normalise=!0,this}function Ay(e){return this.normalise(e)}function ky(e){if(w.plainObject(e)){if(w.integer(e.width)&&e.width>0)this.options.claheWidth=e.width;else throw w.invalidParameterError("width","integer greater than zero",e.width);if(w.integer(e.height)&&e.height>0)this.options.claheHeight=e.height;else throw w.invalidParameterError("height","integer greater than zero",e.height);if(w.defined(e.maxSlope))if(w.integer(e.maxSlope)&&w.inRange(e.maxSlope,0,100))this.options.claheMaxSlope=e.maxSlope;else throw w.invalidParameterError("maxSlope","integer between 0 and 100",e.maxSlope)}else throw w.invalidParameterError("options","plain object",e);return this}function Cy(e){if(!w.object(e)||!Array.isArray(e.kernel)||!w.integer(e.width)||!w.integer(e.height)||!w.inRange(e.width,3,1001)||!w.inRange(e.height,3,1001)||e.height*e.width!==e.kernel.length)throw new Error("Invalid convolution kernel");return w.integer(e.scale)||(e.scale=e.kernel.reduce(function(t,r){return t+r},0)),e.scale<1&&(e.scale=1),w.integer(e.offset)||(e.offset=0),this.options.convKernel=e,this}function Iy(e,t){if(!w.defined(e))this.options.threshold=128;else if(w.bool(e))this.options.threshold=e?128:0;else if(w.integer(e)&&w.inRange(e,0,255))this.options.threshold=e;else throw w.invalidParameterError("threshold","integer between 0 and 255",e);return!w.object(t)||t.greyscale===!0||t.grayscale===!0?this.options.thresholdGrayscale=!0:this.options.thresholdGrayscale=!1,this}function Oy(e,t,r){if(this.options.boolean=this._createInputDescriptor(e,r),w.string(t)&&w.inArray(t,["and","or","eor"]))this.options.booleanOp=t;else throw w.invalidParameterError("operator","one of: and, or, eor",t);return this}function jy(e,t){if(!w.defined(e)&&w.number(t)?e=1:w.number(e)&&!w.defined(t)&&(t=0),!w.defined(e))this.options.linearA=[];else if(w.number(e))this.options.linearA=[e];else if(Array.isArray(e)&&e.length&&e.every(w.number))this.options.linearA=e;else throw w.invalidParameterError("a","number or array of numbers",e);if(!w.defined(t))this.options.linearB=[];else if(w.number(t))this.options.linearB=[t];else if(Array.isArray(t)&&t.length&&t.every(w.number))this.options.linearB=t;else throw w.invalidParameterError("b","number or array of numbers",t);if(this.options.linearA.length!==this.options.linearB.length)throw new Error("Expected a and b to be arrays of the same length");return this}function By(e){if(!Array.isArray(e))throw w.invalidParameterError("inputMatrix","array",e);if(e.length!==3&&e.length!==4)throw w.invalidParameterError("inputMatrix","3x3 or 4x4 array",e.length);let t=e.flat().map(Number);if(t.length!==9&&t.length!==16)throw w.invalidParameterError("inputMatrix","cardinality of 9 or 16",t.length);return this.options.recombMatrix=t,this}function Ly(e){if(!w.plainObject(e))throw w.invalidParameterError("options","plain object",e);if("brightness"in e)if(w.number(e.brightness)&&e.brightness>=0)this.options.brightness=e.brightness;else throw w.invalidParameterError("brightness","number above zero",e.brightness);if("saturation"in e)if(w.number(e.saturation)&&e.saturation>=0)this.options.saturation=e.saturation;else throw w.invalidParameterError("saturation","number above zero",e.saturation);if("hue"in e)if(w.integer(e.hue))this.options.hue=e.hue%360;else throw w.invalidParameterError("hue","number",e.hue);if("lightness"in e)if(w.number(e.lightness))this.options.lightness=e.lightness;else throw w.invalidParameterError("lightness","number",e.lightness);return this}eh.exports=function(e){Object.assign(e.prototype,{rotate:gy,flip:by,flop:yy,affine:wy,sharpen:vy,median:_y,blur:Ey,flatten:Sy,unflatten:Ry,gamma:Ty,negate:xy,normalise:Py,normalize:Ay,clahe:ky,convolve:Cy,threshold:Iy,boolean:Oy,linear:jy,recomb:By,modulate:Ly})}});var ih=H((jE,nh)=>{"use strict";var $y=Ra(),Ot=ut(),rh={multiband:"multiband","b-w":"b-w",bw:"b-w",cmyk:"cmyk",srgb:"srgb"};function qy(e){return this._setBackgroundColourOption("tint",e),this}function Dy(e){return this.options.greyscale=Ot.bool(e)?e:!0,this}function Fy(e){return this.greyscale(e)}function Ny(e){if(!Ot.string(e))throw Ot.invalidParameterError("colourspace","string",e);return this.options.colourspacePipeline=e,this}function My(e){return this.pipelineColourspace(e)}function Wy(e){if(!Ot.string(e))throw Ot.invalidParameterError("colourspace","string",e);return this.options.colourspace=e,this}function zy(e){return this.toColourspace(e)}function Uy(e,t){if(Ot.defined(t))if(Ot.object(t)||Ot.string(t)){let r=$y(t);this.options[e]=[r.red(),r.green(),r.blue(),Math.round(r.alpha()*255)]}else throw Ot.invalidParameterError("background","object or string",t)}nh.exports=function(e){Object.assign(e.prototype,{tint:qy,greyscale:Dy,grayscale:Fy,pipelineColourspace:Ny,pipelineColorspace:My,toColourspace:Wy,toColorspace:zy,_setBackgroundColourOption:Uy}),e.colourspace=rh,e.colorspace=rh}});var oh=H((BE,ah)=>{"use strict";var ht=ut(),Hy={and:"and",or:"or",eor:"eor"};function Gy(){return this.options.removeAlpha=!0,this}function Vy(e){if(ht.defined(e))if(ht.number(e)&&ht.inRange(e,0,1))this.options.ensureAlpha=e;else throw ht.invalidParameterError("alpha","number between 0 and 1",e);else this.options.ensureAlpha=1;return this}function Zy(e){let t={red:0,green:1,blue:2,alpha:3};if(Object.keys(t).includes(e)&&(e=t[e]),ht.integer(e)&&ht.inRange(e,0,4))this.options.extractChannel=e;else throw ht.invalidParameterError("channel","integer or one of: red, green, blue, alpha",e);return this}function Qy(e,t){return Array.isArray(e)?e.forEach(function(r){this.options.joinChannelIn.push(this._createInputDescriptor(r,t))},this):this.options.joinChannelIn.push(this._createInputDescriptor(e,t)),this}function Yy(e){if(ht.string(e)&&ht.inArray(e,["and","or","eor"]))this.options.bandBoolOp=e;else throw ht.invalidParameterError("boolOp","one of: and, or, eor",e);return this}ah.exports=function(e){Object.assign(e.prototype,{removeAlpha:Gy,ensureAlpha:Vy,extractChannel:Zy,joinChannel:Qy,bandbool:Yy}),e.bool=Hy}});var fh=H((LE,dh)=>{"use strict";var Us=require("node:path"),h=ut(),pn=si(),sh=new Map([["heic","heif"],["heif","heif"],["avif","avif"],["jpeg","jpeg"],["jpg","jpeg"],["jpe","jpeg"],["tile","tile"],["dz","tile"],["png","png"],["raw","raw"],["tiff","tiff"],["tif","tiff"],["webp","webp"],["gif","gif"],["jp2","jp2"],["jpx","jp2"],["j2k","jp2"],["j2c","jp2"],["jxl","jxl"]]),Xy=/\.(jp[2x]|j2[kc])$/i,lh=()=>new Error("JP2 output requires libvips with support for OpenJPEG"),ch=e=>1<<31-Math.clz32(Math.ceil(Math.log2(e)));function Jy(e,t){let r;if(h.string(e)?h.string(this.options.input.file)&&Us.resolve(this.options.input.file)===Us.resolve(e)?r=new Error("Cannot use same file for input and output"):Xy.test(Us.extname(e))&&!this.constructor.format.jp2k.output.file&&(r=lh()):r=new Error("Missing output file path"),r)if(h.fn(t))t(r);else return Promise.reject(r);else{this.options.fileOut=e;let n=Error();return this._pipeline(t,n)}return this}function Ky(e,t){h.object(e)?this._setBooleanOption("resolveWithObject",e.resolveWithObject):this.options.resolveWithObject&&(this.options.resolveWithObject=!1),this.options.fileOut="";let r=Error();return this._pipeline(h.fn(e)?e:t,r)}function e0(){return this.options.keepMetadata|=1,this}function t0(e){if(h.object(e))for(let[t,r]of Object.entries(e))if(h.object(r))for(let[n,a]of Object.entries(r))if(h.string(a))this.options.withExif[`exif-${t.toLowerCase()}-${n}`]=a;else throw h.invalidParameterError(`${t}.${n}`,"string",a);else throw h.invalidParameterError(t,"object",r);else throw h.invalidParameterError("exif","object",e);return this.options.withExifMerge=!1,this.keepExif()}function r0(e){return this.withExif(e),this.options.withExifMerge=!0,this}function n0(){return this.options.keepMetadata|=8,this}function i0(e,t){if(h.string(e))this.options.withIccProfile=e;else throw h.invalidParameterError("icc","string",e);if(this.keepIccProfile(),h.object(t)&&h.defined(t.attach))if(h.bool(t.attach))t.attach||(this.options.keepMetadata&=-9);else throw h.invalidParameterError("attach","boolean",t.attach);return this}function a0(){return this.options.keepMetadata=31,this}function o0(e){if(this.keepMetadata(),this.withIccProfile("srgb"),h.object(e)){if(h.defined(e.orientation))if(h.integer(e.orientation)&&h.inRange(e.orientation,1,8))this.options.withMetadataOrientation=e.orientation;else throw h.invalidParameterError("orientation","integer between 1 and 8",e.orientation);if(h.defined(e.density))if(h.number(e.density)&&e.density>0)this.options.withMetadataDensity=e.density;else throw h.invalidParameterError("density","positive number",e.density);h.defined(e.icc)&&this.withIccProfile(e.icc),h.defined(e.exif)&&this.withExifMerge(e.exif)}return this}function s0(e,t){let r=sh.get((h.object(e)&&h.string(e.id)?e.id:e).toLowerCase());if(!r)throw h.invalidParameterError("format",`one of: ${[...sh.keys()].join(", ")}`,e);return this[r](t)}function l0(e){if(h.object(e)){if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,1,100))this.options.jpegQuality=e.quality;else throw h.invalidParameterError("quality","integer between 1 and 100",e.quality);if(h.defined(e.progressive)&&this._setBooleanOption("jpegProgressive",e.progressive),h.defined(e.chromaSubsampling))if(h.string(e.chromaSubsampling)&&h.inArray(e.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jpegChromaSubsampling=e.chromaSubsampling;else throw h.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",e.chromaSubsampling);let t=h.bool(e.optimizeCoding)?e.optimizeCoding:e.optimiseCoding;if(h.defined(t)&&this._setBooleanOption("jpegOptimiseCoding",t),h.defined(e.mozjpeg))if(h.bool(e.mozjpeg))e.mozjpeg&&(this.options.jpegTrellisQuantisation=!0,this.options.jpegOvershootDeringing=!0,this.options.jpegOptimiseScans=!0,this.options.jpegProgressive=!0,this.options.jpegQuantisationTable=3);else throw h.invalidParameterError("mozjpeg","boolean",e.mozjpeg);let r=h.bool(e.trellisQuantization)?e.trellisQuantization:e.trellisQuantisation;h.defined(r)&&this._setBooleanOption("jpegTrellisQuantisation",r),h.defined(e.overshootDeringing)&&this._setBooleanOption("jpegOvershootDeringing",e.overshootDeringing);let n=h.bool(e.optimizeScans)?e.optimizeScans:e.optimiseScans;h.defined(n)&&(this._setBooleanOption("jpegOptimiseScans",n),n&&(this.options.jpegProgressive=!0));let a=h.number(e.quantizationTable)?e.quantizationTable:e.quantisationTable;if(h.defined(a))if(h.integer(a)&&h.inRange(a,0,8))this.options.jpegQuantisationTable=a;else throw h.invalidParameterError("quantisationTable","integer between 0 and 8",a)}return this._updateFormatOut("jpeg",e)}function c0(e){if(h.object(e)){if(h.defined(e.progressive)&&this._setBooleanOption("pngProgressive",e.progressive),h.defined(e.compressionLevel))if(h.integer(e.compressionLevel)&&h.inRange(e.compressionLevel,0,9))this.options.pngCompressionLevel=e.compressionLevel;else throw h.invalidParameterError("compressionLevel","integer between 0 and 9",e.compressionLevel);h.defined(e.adaptiveFiltering)&&this._setBooleanOption("pngAdaptiveFiltering",e.adaptiveFiltering);let t=e.colours||e.colors;if(h.defined(t))if(h.integer(t)&&h.inRange(t,2,256))this.options.pngBitdepth=ch(t);else throw h.invalidParameterError("colours","integer between 2 and 256",t);if(h.defined(e.palette)?this._setBooleanOption("pngPalette",e.palette):[e.quality,e.effort,e.colours,e.colors,e.dither].some(h.defined)&&this._setBooleanOption("pngPalette",!0),this.options.pngPalette){if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,0,100))this.options.pngQuality=e.quality;else throw h.invalidParameterError("quality","integer between 0 and 100",e.quality);if(h.defined(e.effort))if(h.integer(e.effort)&&h.inRange(e.effort,1,10))this.options.pngEffort=e.effort;else throw h.invalidParameterError("effort","integer between 1 and 10",e.effort);if(h.defined(e.dither))if(h.number(e.dither)&&h.inRange(e.dither,0,1))this.options.pngDither=e.dither;else throw h.invalidParameterError("dither","number between 0.0 and 1.0",e.dither)}}return this._updateFormatOut("png",e)}function u0(e){if(h.object(e)){if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,1,100))this.options.webpQuality=e.quality;else throw h.invalidParameterError("quality","integer between 1 and 100",e.quality);if(h.defined(e.alphaQuality))if(h.integer(e.alphaQuality)&&h.inRange(e.alphaQuality,0,100))this.options.webpAlphaQuality=e.alphaQuality;else throw h.invalidParameterError("alphaQuality","integer between 0 and 100",e.alphaQuality);if(h.defined(e.lossless)&&this._setBooleanOption("webpLossless",e.lossless),h.defined(e.nearLossless)&&this._setBooleanOption("webpNearLossless",e.nearLossless),h.defined(e.smartSubsample)&&this._setBooleanOption("webpSmartSubsample",e.smartSubsample),h.defined(e.preset))if(h.string(e.preset)&&h.inArray(e.preset,["default","photo","picture","drawing","icon","text"]))this.options.webpPreset=e.preset;else throw h.invalidParameterError("preset","one of: default, photo, picture, drawing, icon, text",e.preset);if(h.defined(e.effort))if(h.integer(e.effort)&&h.inRange(e.effort,0,6))this.options.webpEffort=e.effort;else throw h.invalidParameterError("effort","integer between 0 and 6",e.effort);h.defined(e.minSize)&&this._setBooleanOption("webpMinSize",e.minSize),h.defined(e.mixed)&&this._setBooleanOption("webpMixed",e.mixed)}return uh(e,this.options),this._updateFormatOut("webp",e)}function d0(e){if(h.object(e)){h.defined(e.reuse)&&this._setBooleanOption("gifReuse",e.reuse),h.defined(e.progressive)&&this._setBooleanOption("gifProgressive",e.progressive);let t=e.colours||e.colors;if(h.defined(t))if(h.integer(t)&&h.inRange(t,2,256))this.options.gifBitdepth=ch(t);else throw h.invalidParameterError("colours","integer between 2 and 256",t);if(h.defined(e.effort))if(h.number(e.effort)&&h.inRange(e.effort,1,10))this.options.gifEffort=e.effort;else throw h.invalidParameterError("effort","integer between 1 and 10",e.effort);if(h.defined(e.dither))if(h.number(e.dither)&&h.inRange(e.dither,0,1))this.options.gifDither=e.dither;else throw h.invalidParameterError("dither","number between 0.0 and 1.0",e.dither);if(h.defined(e.interFrameMaxError))if(h.number(e.interFrameMaxError)&&h.inRange(e.interFrameMaxError,0,32))this.options.gifInterFrameMaxError=e.interFrameMaxError;else throw h.invalidParameterError("interFrameMaxError","number between 0.0 and 32.0",e.interFrameMaxError);if(h.defined(e.interPaletteMaxError))if(h.number(e.interPaletteMaxError)&&h.inRange(e.interPaletteMaxError,0,256))this.options.gifInterPaletteMaxError=e.interPaletteMaxError;else throw h.invalidParameterError("interPaletteMaxError","number between 0.0 and 256.0",e.interPaletteMaxError)}return uh(e,this.options),this._updateFormatOut("gif",e)}function f0(e){if(!this.constructor.format.jp2k.output.buffer)throw lh();if(h.object(e)){if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,1,100))this.options.jp2Quality=e.quality;else throw h.invalidParameterError("quality","integer between 1 and 100",e.quality);if(h.defined(e.lossless))if(h.bool(e.lossless))this.options.jp2Lossless=e.lossless;else throw h.invalidParameterError("lossless","boolean",e.lossless);if(h.defined(e.tileWidth))if(h.integer(e.tileWidth)&&h.inRange(e.tileWidth,1,32768))this.options.jp2TileWidth=e.tileWidth;else throw h.invalidParameterError("tileWidth","integer between 1 and 32768",e.tileWidth);if(h.defined(e.tileHeight))if(h.integer(e.tileHeight)&&h.inRange(e.tileHeight,1,32768))this.options.jp2TileHeight=e.tileHeight;else throw h.invalidParameterError("tileHeight","integer between 1 and 32768",e.tileHeight);if(h.defined(e.chromaSubsampling))if(h.string(e.chromaSubsampling)&&h.inArray(e.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jp2ChromaSubsampling=e.chromaSubsampling;else throw h.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",e.chromaSubsampling)}return this._updateFormatOut("jp2",e)}function uh(e,t){if(h.object(e)&&h.defined(e.loop))if(h.integer(e.loop)&&h.inRange(e.loop,0,65535))t.loop=e.loop;else throw h.invalidParameterError("loop","integer between 0 and 65535",e.loop);if(h.object(e)&&h.defined(e.delay))if(h.integer(e.delay)&&h.inRange(e.delay,0,65535))t.delay=[e.delay];else if(Array.isArray(e.delay)&&e.delay.every(h.integer)&&e.delay.every(r=>h.inRange(r,0,65535)))t.delay=e.delay;else throw h.invalidParameterError("delay","integer or an array of integers between 0 and 65535",e.delay)}function h0(e){if(h.object(e)){if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,1,100))this.options.tiffQuality=e.quality;else throw h.invalidParameterError("quality","integer between 1 and 100",e.quality);if(h.defined(e.bitdepth))if(h.integer(e.bitdepth)&&h.inArray(e.bitdepth,[1,2,4,8]))this.options.tiffBitdepth=e.bitdepth;else throw h.invalidParameterError("bitdepth","1, 2, 4 or 8",e.bitdepth);if(h.defined(e.tile)&&this._setBooleanOption("tiffTile",e.tile),h.defined(e.tileWidth))if(h.integer(e.tileWidth)&&e.tileWidth>0)this.options.tiffTileWidth=e.tileWidth;else throw h.invalidParameterError("tileWidth","integer greater than zero",e.tileWidth);if(h.defined(e.tileHeight))if(h.integer(e.tileHeight)&&e.tileHeight>0)this.options.tiffTileHeight=e.tileHeight;else throw h.invalidParameterError("tileHeight","integer greater than zero",e.tileHeight);if(h.defined(e.miniswhite)&&this._setBooleanOption("tiffMiniswhite",e.miniswhite),h.defined(e.pyramid)&&this._setBooleanOption("tiffPyramid",e.pyramid),h.defined(e.xres))if(h.number(e.xres)&&e.xres>0)this.options.tiffXres=e.xres;else throw h.invalidParameterError("xres","number greater than zero",e.xres);if(h.defined(e.yres))if(h.number(e.yres)&&e.yres>0)this.options.tiffYres=e.yres;else throw h.invalidParameterError("yres","number greater than zero",e.yres);if(h.defined(e.compression))if(h.string(e.compression)&&h.inArray(e.compression,["none","jpeg","deflate","packbits","ccittfax4","lzw","webp","zstd","jp2k"]))this.options.tiffCompression=e.compression;else throw h.invalidParameterError("compression","one of: none, jpeg, deflate, packbits, ccittfax4, lzw, webp, zstd, jp2k",e.compression);if(h.defined(e.predictor))if(h.string(e.predictor)&&h.inArray(e.predictor,["none","horizontal","float"]))this.options.tiffPredictor=e.predictor;else throw h.invalidParameterError("predictor","one of: none, horizontal, float",e.predictor);if(h.defined(e.resolutionUnit))if(h.string(e.resolutionUnit)&&h.inArray(e.resolutionUnit,["inch","cm"]))this.options.tiffResolutionUnit=e.resolutionUnit;else throw h.invalidParameterError("resolutionUnit","one of: inch, cm",e.resolutionUnit)}return this._updateFormatOut("tiff",e)}function m0(e){return this.heif({...e,compression:"av1"})}function p0(e){if(h.object(e)){if(h.string(e.compression)&&h.inArray(e.compression,["av1","hevc"]))this.options.heifCompression=e.compression;else throw h.invalidParameterError("compression","one of: av1, hevc",e.compression);if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,1,100))this.options.heifQuality=e.quality;else throw h.invalidParameterError("quality","integer between 1 and 100",e.quality);if(h.defined(e.lossless))if(h.bool(e.lossless))this.options.heifLossless=e.lossless;else throw h.invalidParameterError("lossless","boolean",e.lossless);if(h.defined(e.effort))if(h.integer(e.effort)&&h.inRange(e.effort,0,9))this.options.heifEffort=e.effort;else throw h.invalidParameterError("effort","integer between 0 and 9",e.effort);if(h.defined(e.chromaSubsampling))if(h.string(e.chromaSubsampling)&&h.inArray(e.chromaSubsampling,["4:2:0","4:4:4"]))this.options.heifChromaSubsampling=e.chromaSubsampling;else throw h.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",e.chromaSubsampling);if(h.defined(e.bitdepth))if(h.integer(e.bitdepth)&&h.inArray(e.bitdepth,[8,10,12])){if(e.bitdepth!==8&&this.constructor.versions.heif)throw h.invalidParameterError("bitdepth when using prebuilt binaries",8,e.bitdepth);this.options.heifBitdepth=e.bitdepth}else throw h.invalidParameterError("bitdepth","8, 10 or 12",e.bitdepth)}else throw h.invalidParameterError("options","Object",e);return this._updateFormatOut("heif",e)}function g0(e){if(h.object(e)){if(h.defined(e.quality))if(h.integer(e.quality)&&h.inRange(e.quality,1,100))this.options.jxlDistance=e.quality>=30?.1+(100-e.quality)*.09:53/3e3*e.quality*e.quality-23/20*e.quality+25;else throw h.invalidParameterError("quality","integer between 1 and 100",e.quality);else if(h.defined(e.distance))if(h.number(e.distance)&&h.inRange(e.distance,0,15))this.options.jxlDistance=e.distance;else throw h.invalidParameterError("distance","number between 0.0 and 15.0",e.distance);if(h.defined(e.decodingTier))if(h.integer(e.decodingTier)&&h.inRange(e.decodingTier,0,4))this.options.jxlDecodingTier=e.decodingTier;else throw h.invalidParameterError("decodingTier","integer between 0 and 4",e.decodingTier);if(h.defined(e.lossless))if(h.bool(e.lossless))this.options.jxlLossless=e.lossless;else throw h.invalidParameterError("lossless","boolean",e.lossless);if(h.defined(e.effort))if(h.integer(e.effort)&&h.inRange(e.effort,3,9))this.options.jxlEffort=e.effort;else throw h.invalidParameterError("effort","integer between 3 and 9",e.effort)}return this._updateFormatOut("jxl",e)}function b0(e){if(h.object(e)&&h.defined(e.depth))if(h.string(e.depth)&&h.inArray(e.depth,["char","uchar","short","ushort","int","uint","float","complex","double","dpcomplex"]))this.options.rawDepth=e.depth;else throw h.invalidParameterError("depth","one of: char, uchar, short, ushort, int, uint, float, complex, double, dpcomplex",e.depth);return this._updateFormatOut("raw")}function y0(e){if(h.object(e)){if(h.defined(e.size))if(h.integer(e.size)&&h.inRange(e.size,1,8192))this.options.tileSize=e.size;else throw h.invalidParameterError("size","integer between 1 and 8192",e.size);if(h.defined(e.overlap))if(h.integer(e.overlap)&&h.inRange(e.overlap,0,8192)){if(e.overlap>this.options.tileSize)throw h.invalidParameterError("overlap",`<= size (${this.options.tileSize})`,e.overlap);this.options.tileOverlap=e.overlap}else throw h.invalidParameterError("overlap","integer between 0 and 8192",e.overlap);if(h.defined(e.container))if(h.string(e.container)&&h.inArray(e.container,["fs","zip"]))this.options.tileContainer=e.container;else throw h.invalidParameterError("container","one of: fs, zip",e.container);if(h.defined(e.layout))if(h.string(e.layout)&&h.inArray(e.layout,["dz","google","iiif","iiif3","zoomify"]))this.options.tileLayout=e.layout;else throw h.invalidParameterError("layout","one of: dz, google, iiif, iiif3, zoomify",e.layout);if(h.defined(e.angle))if(h.integer(e.angle)&&!(e.angle%90))this.options.tileAngle=e.angle;else throw h.invalidParameterError("angle","positive/negative multiple of 90",e.angle);if(this._setBackgroundColourOption("tileBackground",e.background),h.defined(e.depth))if(h.string(e.depth)&&h.inArray(e.depth,["onepixel","onetile","one"]))this.options.tileDepth=e.depth;else throw h.invalidParameterError("depth","one of: onepixel, onetile, one",e.depth);if(h.defined(e.skipBlanks))if(h.integer(e.skipBlanks)&&h.inRange(e.skipBlanks,-1,65535))this.options.tileSkipBlanks=e.skipBlanks;else throw h.invalidParameterError("skipBlanks","integer between -1 and 255/65535",e.skipBlanks);else h.defined(e.layout)&&e.layout==="google"&&(this.options.tileSkipBlanks=5);let t=h.bool(e.center)?e.center:e.centre;if(h.defined(t)&&this._setBooleanOption("tileCentre",t),h.defined(e.id))if(h.string(e.id))this.options.tileId=e.id;else throw h.invalidParameterError("id","string",e.id);if(h.defined(e.basename))if(h.string(e.basename))this.options.tileBasename=e.basename;else throw h.invalidParameterError("basename","string",e.basename)}if(h.inArray(this.options.formatOut,["jpeg","png","webp"]))this.options.tileFormat=this.options.formatOut;else if(this.options.formatOut!=="input")throw h.invalidParameterError("format","one of: jpeg, png, webp",this.options.formatOut);return this._updateFormatOut("dz")}function w0(e){if(!h.plainObject(e))throw h.invalidParameterError("options","object",e);if(h.integer(e.seconds)&&h.inRange(e.seconds,0,3600))this.options.timeoutSeconds=e.seconds;else throw h.invalidParameterError("seconds","integer between 0 and 3600",e.seconds);return this}function v0(e,t){return h.object(t)&&t.force===!1||(this.options.formatOut=e),this}function _0(e,t){if(h.bool(t))this.options[e]=t;else throw h.invalidParameterError(e,"boolean",t)}function E0(){if(!this.options.streamOut){this.options.streamOut=!0;let e=Error();this._pipeline(void 0,e)}}function S0(e,t){return typeof e=="function"?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),pn.pipeline(this.options,(r,n,a)=>{r?e(h.nativeError(r,t)):e(null,n,a)})}):pn.pipeline(this.options,(r,n,a)=>{r?e(h.nativeError(r,t)):e(null,n,a)}),this):this.options.streamOut?(this._isStreamInput()?(this.once("finish",()=>{this._flattenBufferIn(),pn.pipeline(this.options,(r,n,a)=>{r?this.emit("error",h.nativeError(r,t)):(this.emit("info",a),this.push(n)),this.push(null),this.on("end",()=>this.emit("close"))})}),this.streamInFinished&&this.emit("finish")):pn.pipeline(this.options,(r,n,a)=>{r?this.emit("error",h.nativeError(r,t)):(this.emit("info",a),this.push(n)),this.push(null),this.on("end",()=>this.emit("close"))}),this):this._isStreamInput()?new Promise((r,n)=>{this.once("finish",()=>{this._flattenBufferIn(),pn.pipeline(this.options,(a,o,l)=>{a?n(h.nativeError(a,t)):this.options.resolveWithObject?r({data:o,info:l}):r(o)})})}):new Promise((r,n)=>{pn.pipeline(this.options,(a,o,l)=>{a?n(h.nativeError(a,t)):this.options.resolveWithObject?r({data:o,info:l}):r(o)})})}dh.exports=function(e){Object.assign(e.prototype,{toFile:Jy,toBuffer:Ky,keepExif:e0,withExif:t0,withExifMerge:r0,keepIccProfile:n0,withIccProfile:i0,keepMetadata:a0,withMetadata:o0,toFormat:s0,jpeg:l0,jp2:f0,png:c0,webp:u0,tiff:h0,avif:m0,heif:p0,jxl:g0,gif:d0,raw:b0,tile:y0,timeout:w0,_updateFormatOut:v0,_setBooleanOption:_0,_read:E0,_pipeline:S0})}});var gh=H(($E,ph)=>{"use strict";var R0=require("node:events"),xa=ua(),Qe=ut(),{runtimePlatformArch:T0}=js(),Ae=si(),hh=T0(),Hs=Ae.libvipsVersion(),rr=Ae.format();rr.heif.output.alias=["avif","heic"];rr.jpeg.output.alias=["jpe","jpg"];rr.tiff.output.alias=["tif"];rr.jp2k.output.alias=["j2c","j2k","jp2","jpx"];var x0={nearest:"nearest",bilinear:"bilinear",bicubic:"bicubic",locallyBoundedBicubic:"lbb",nohalo:"nohalo",vertexSplitQuadraticBasisSpline:"vsqbs"},gn={vips:Hs.semver};if(!Hs.isGlobal)if(Hs.isWasm)try{gn=require("@img/sharp-wasm32/versions")}catch{}else try{gn=require(`@img/sharp-${hh}/versions`)}catch{try{gn=require(`@img/sharp-libvips-${hh}/versions`)}catch{}}gn.sharp=Is().version;gn.heif&&rr.heif&&(rr.heif.input.fileSuffix=[".avif"],rr.heif.output.alias=["avif"]);function mh(e){return Qe.bool(e)?e?Ae.cache(50,20,100):Ae.cache(0,0,0):Qe.object(e)?Ae.cache(e.memory,e.files,e.items):Ae.cache()}mh(!0);function P0(e){return Ae.concurrency(Qe.integer(e)?e:null)}xa.familySync()===xa.GLIBC&&!Ae._isUsingJemalloc()?Ae.concurrency(1):xa.familySync()===xa.MUSL&&Ae.concurrency()===1024&&Ae.concurrency(require("node:os").availableParallelism());var A0=new R0.EventEmitter;function k0(){return Ae.counters()}function C0(e){return Ae.simd(Qe.bool(e)?e:null)}function I0(e){if(Qe.object(e))if(Array.isArray(e.operation)&&e.operation.every(Qe.string))Ae.block(e.operation,!0);else throw Qe.invalidParameterError("operation","Array<string>",e.operation);else throw Qe.invalidParameterError("options","object",e)}function O0(e){if(Qe.object(e))if(Array.isArray(e.operation)&&e.operation.every(Qe.string))Ae.block(e.operation,!1);else throw Qe.invalidParameterError("operation","Array<string>",e.operation);else throw Qe.invalidParameterError("options","object",e)}ph.exports=function(e){e.cache=mh,e.concurrency=P0,e.counters=k0,e.simd=C0,e.format=rr,e.interpolators=x0,e.versions=gn,e.queue=A0,e.block=I0,e.unblock=O0}});var Gs=H((qE,bh)=>{"use strict";var jt=Sf();Uf()(jt);Yf()(jt);Jf()(jt);th()(jt);ih()(jt);oh()(jt);fh()(jt);gh()(jt);bh.exports=jt});var Ch=H(Ys=>{var _h=Object.defineProperty,j0=e=>_h(e,"__esModule",{value:!0}),B0=(e,t)=>{for(var r in t)_h(e,r,{get:t[r],enumerable:!0})};j0(Ys);B0(Ys,{GIFEncoder:()=>Ah,applyPalette:()=>z0,default:()=>K0,nearestColor:()=>V0,nearestColorIndex:()=>xh,nearestColorIndexWithDistance:()=>Ph,prequantize:()=>W0,quantize:()=>N0,snapColorsToPalette:()=>G0});var L0={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function Eh(e=256){let t=0,r=new Uint8Array(e);return{get buffer(){return r.buffer},reset(){t=0},bytesView(){return r.subarray(0,t)},bytes(){return r.slice(0,t)},writeByte(a){n(t+1),r[t]=a,t++},writeBytes(a,o=0,l=a.length){n(t+l);for(let c=0;c<l;c++)r[t++]=a[c+o]},writeBytesView(a,o=0,l=a.byteLength){n(t+l),r.set(a.subarray(o,o+l),t),t+=l}};function n(a){var o=r.length;if(o>=a)return;var l=1024*1024;a=Math.max(a,o*(o<l?2:1.125)>>>0),o!=0&&(a=Math.max(a,256));let c=r;r=new Uint8Array(a),t>0&&r.set(c.subarray(0,t),0)}}var Vs=12,yh=5003,$0=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function q0(e,t,r,n,a=Eh(512),o=new Uint8Array(256),l=new Int32Array(yh),c=new Int32Array(yh)){let f=l.length,p=Math.max(2,n);o.fill(0),c.fill(0),l.fill(-1);let m=0,b=0,_=p+1,A=_,R=!1,L=A,F=(1<<L)-1,x=1<<_-1,te=x+1,K=x+2,j=0,z=r[0],G=0;for(let ie=f;ie<65536;ie*=2)++G;G=8-G,a.writeByte(p),ee(x);let V=r.length;for(let ie=1;ie<V;ie++)e:{let Ce=r[ie],_e=(Ce<<Vs)+z,de=Ce<<G^z;if(l[de]===_e){z=c[de];break e}let wt=de===0?1:f-de;for(;l[de]>=0;)if(de-=wt,de<0&&(de+=f),l[de]===_e){z=c[de];break e}ee(z),z=Ce,K<1<<Vs?(c[de]=K++,l[de]=_e):(l.fill(-1),K=x+2,R=!0,ee(x))}return ee(z),ee(te),a.writeByte(0),a.bytesView();function ee(ie){for(m&=$0[b],b>0?m|=ie<<b:m=ie,b+=L;b>=8;)o[j++]=m&255,j>=254&&(a.writeByte(j),a.writeBytesView(o,0,j),j=0),m>>=8,b-=8;if((K>F||R)&&(R?(L=A,F=(1<<L)-1,R=!1):(++L,F=L===Vs?1<<L:(1<<L)-1)),ie==te){for(;b>0;)o[j++]=m&255,j>=254&&(a.writeByte(j),a.writeBytesView(o,0,j),j=0),m>>=8,b-=8;j>0&&(a.writeByte(j),a.writeBytesView(o,0,j),j=0)}}}var D0=q0;function Sh(e,t,r){return e<<8&63488|t<<2&992|r>>3}function Rh(e,t,r,n){return e>>4|t&240|(r&240)<<4|(n&240)<<8}function Th(e,t,r){return e>>4<<8|t&240|r>>4}function Pa(e,t,r){return e<t?t:e>r?r:e}function di(e){return e*e}function wh(e,t,r){var n=0,a=1e100;let o=e[t],l=o.cnt,c=o.ac,f=o.rc,p=o.gc,m=o.bc;for(var b=o.fw;b!=0;b=e[b].fw){let A=e[b],R=A.cnt,L=l*R/(l+R);if(!(L>=a)){var _=0;r&&(_+=L*di(A.ac-c),_>=a)||(_+=L*di(A.rc-f),!(_>=a)&&(_+=L*di(A.gc-p),!(_>=a)&&(_+=L*di(A.bc-m),!(_>=a)&&(a=_,n=b))))}}o.err=a,o.nn=n}function Zs(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function F0(e,t){let r=t==="rgb444"?4096:65536,n=new Array(r),a=e.length;if(t==="rgba4444")for(let o=0;o<a;++o){let l=e[o],c=l>>24&255,f=l>>16&255,p=l>>8&255,m=l&255,b=Rh(m,p,f,c),_=b in n?n[b]:n[b]=Zs();_.rc+=m,_.gc+=p,_.bc+=f,_.ac+=c,_.cnt++}else if(t==="rgb444")for(let o=0;o<a;++o){let l=e[o],c=l>>16&255,f=l>>8&255,p=l&255,m=Th(p,f,c),b=m in n?n[m]:n[m]=Zs();b.rc+=p,b.gc+=f,b.bc+=c,b.cnt++}else for(let o=0;o<a;++o){let l=e[o],c=l>>16&255,f=l>>8&255,p=l&255,m=Sh(p,f,c),b=m in n?n[m]:n[m]=Zs();b.rc+=p,b.gc+=f,b.bc+=c,b.cnt++}return n}function N0(e,t,r={}){let{format:n="rgb565",clearAlpha:a=!0,clearAlphaColor:o=0,clearAlphaThreshold:l=0,oneBitAlpha:c=!1}=r;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");let f=new Uint32Array(e.buffer),p=r.useSqrt!==!1,m=n==="rgba4444",b=F0(f,n),_=b.length,A=_-1,R=new Uint32Array(_+1);for(var L=0,x=0;x<_;++x){let pe=b[x];if(pe!=null){var F=1/pe.cnt;m&&(pe.ac*=F),pe.rc*=F,pe.gc*=F,pe.bc*=F,b[L++]=pe}}di(t)/L<.022&&(p=!1);for(var x=0;x<L-1;++x)b[x].fw=x+1,b[x+1].bk=x,p&&(b[x].cnt=Math.sqrt(b[x].cnt));p&&(b[x].cnt=Math.sqrt(b[x].cnt));var te,K,j;for(x=0;x<L;++x){wh(b,x,!1);var z=b[x].err;for(K=++R[0];K>1&&(j=K>>1,!(b[te=R[j]].err<=z));K=j)R[K]=te;R[K]=x}var G=L-t;for(x=0;x<G;){for(var V;;){var ee=R[1];if(V=b[ee],V.tm>=V.mtm&&b[V.nn].mtm<=V.tm)break;V.mtm==A?ee=R[1]=R[R[0]--]:(wh(b,ee,!1),V.tm=x);var z=b[ee].err;for(K=1;(j=K+K)<=R[0]&&(j<R[0]&&b[R[j]].err>b[R[j+1]].err&&j++,!(z<=b[te=R[j]].err));K=j)R[K]=te;R[K]=ee}var ie=b[V.nn],Ce=V.cnt,_e=ie.cnt,F=1/(Ce+_e);m&&(V.ac=F*(Ce*V.ac+_e*ie.ac)),V.rc=F*(Ce*V.rc+_e*ie.rc),V.gc=F*(Ce*V.gc+_e*ie.gc),V.bc=F*(Ce*V.bc+_e*ie.bc),V.cnt+=ie.cnt,V.mtm=++x,b[ie.bk].fw=ie.fw,b[ie.fw].bk=ie.bk,ie.mtm=A}let de=[];var wt=0;for(x=0;;++wt){let et=Pa(Math.round(b[x].rc),0,255),pe=Pa(Math.round(b[x].gc),0,255),Ie=Pa(Math.round(b[x].bc),0,255),He=255;m&&(He=Pa(Math.round(b[x].ac),0,255),c&&(He=He<=(typeof c=="number"?c:127)?0:255),a&&He<=l&&(et=pe=Ie=o,He=0));let dr=m?[et,pe,Ie,He]:[et,pe,Ie];if(M0(de,dr)||de.push(dr),(x=b[x].fw)==0)break}return de}function M0(e,t){for(let r=0;r<e.length;r++){let n=e[r],a=n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2],o=n.length>=4&&t.length>=4?n[3]===t[3]:!0;if(a&&o)return!0}return!1}function ka(e,t){var r=0,n;for(n=0;n<e.length;n++){let a=e[n]-t[n];r+=a*a}return r}function Aa(e,t){return t>1?Math.round(e/t)*t:e}function W0(e,{roundRGB:t=5,roundAlpha:r=10,oneBitAlpha:n=null}={}){let a=new Uint32Array(e.buffer);for(let o=0;o<a.length;o++){let l=a[o],c=l>>24&255,f=l>>16&255,p=l>>8&255,m=l&255;c=Aa(c,r),n&&(c=c<=(typeof n=="number"?n:127)?0:255),m=Aa(m,t),p=Aa(p,t),f=Aa(f,t),a[o]=c<<24|f<<16|p<<8|m<<0}}function z0(e,t,r="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(t.length>256)throw new Error("applyPalette() only works with 256 colors or less");let n=new Uint32Array(e.buffer),a=n.length,o=r==="rgb444"?4096:65536,l=new Uint8Array(a),c=new Array(o),f=r==="rgba4444";if(r==="rgba4444")for(let p=0;p<a;p++){let m=n[p],b=m>>24&255,_=m>>16&255,A=m>>8&255,R=m&255,L=Rh(R,A,_,b),F=L in c?c[L]:c[L]=U0(R,A,_,b,t);l[p]=F}else{let p=r==="rgb444"?Th:Sh;for(let m=0;m<a;m++){let b=n[m],_=b>>16&255,A=b>>8&255,R=b&255,L=p(R,A,_),F=L in c?c[L]:c[L]=H0(R,A,_,t);l[m]=F}}return l}function U0(e,t,r,n,a){let o=0,l=1e100;for(let c=0;c<a.length;c++){let f=a[c],p=f[3],m=Sr(p-n);if(m>l)continue;let b=f[0];if(m+=Sr(b-e),m>l)continue;let _=f[1];if(m+=Sr(_-t),m>l)continue;let A=f[2];m+=Sr(A-r),!(m>l)&&(l=m,o=c)}return o}function H0(e,t,r,n){let a=0,o=1e100;for(let l=0;l<n.length;l++){let c=n[l],f=c[0],p=Sr(f-e);if(p>o)continue;let m=c[1];if(p+=Sr(m-t),p>o)continue;let b=c[2];p+=Sr(b-r),!(p>o)&&(o=p,a=l)}return a}function G0(e,t,r=5){if(!e.length||!t.length)return;let n=e.map(l=>l.slice(0,3)),a=r*r,o=e[0].length;for(let l=0;l<t.length;l++){let c=t[l];c.length<o?c=[c[0],c[1],c[2],255]:c.length>o?c=c.slice(0,3):c=c.slice();let f=Ph(n,c.slice(0,3),ka),p=f[0],m=f[1];m>0&&m<=a&&(e[p]=c)}}function Sr(e){return e*e}function xh(e,t,r=ka){let n=1/0,a=-1;for(let o=0;o<e.length;o++){let l=e[o],c=r(t,l);c<n&&(n=c,a=o)}return a}function Ph(e,t,r=ka){let n=1/0,a=-1;for(let o=0;o<e.length;o++){let l=e[o],c=r(t,l);c<n&&(n=c,a=o)}return[a,n]}function V0(e,t,r=ka){return e[xh(e,t,r)]}function Ah(e={}){let{initialCapacity:t=4096,auto:r=!0}=e,n=Eh(t),a=5003,o=new Uint8Array(256),l=new Int32Array(a),c=new Int32Array(a),f=!1;return{reset(){n.reset(),f=!1},finish(){n.writeByte(L0.trailer)},bytes(){return n.bytes()},bytesView(){return n.bytesView()},get buffer(){return n.buffer},get stream(){return n},writeHeader:p,writeFrame(m,b,_,A={}){let{transparent:R=!1,transparentIndex:L=0,delay:F=0,palette:x=null,repeat:te=0,colorDepth:K=8,dispose:j=-1}=A,z=!1;if(r?f||(z=!0,p(),f=!0):z=!!A.first,b=Math.max(0,Math.floor(b)),_=Math.max(0,Math.floor(_)),z){if(!x)throw new Error("First frame must include a { palette } option");Q0(n,b,_,x,K),vh(n,x),te>=0&&Y0(n,te)}let G=Math.round(F/10);Z0(n,j,G,R,L);let V=!!x&&!z;X0(n,b,_,V?x:null),V&&vh(n,x),J0(n,m,b,_,K,o,l,c)}};function p(){kh(n,"GIF89a")}}function Z0(e,t,r,n,a){e.writeByte(33),e.writeByte(249),e.writeByte(4),a<0&&(a=0,n=!1);var o,l;n?(o=1,l=2):(o=0,l=0),t>=0&&(l=t&7),l<<=2,e.writeByte(0|l|0|o),nr(e,r),e.writeByte(a||0),e.writeByte(0)}function Q0(e,t,r,n,a=8){let c=Qs(n.length)-1,f=128|a-1<<4|0|c,p=0,m=0;nr(e,t),nr(e,r),e.writeBytes([f,p,m])}function Y0(e,t){e.writeByte(33),e.writeByte(255),e.writeByte(11),kh(e,"NETSCAPE2.0"),e.writeByte(3),e.writeByte(1),nr(e,t),e.writeByte(0)}function vh(e,t){let r=1<<Qs(t.length);for(let n=0;n<r;n++){let a=[0,0,0];n<t.length&&(a=t[n]),e.writeByte(a[0]),e.writeByte(a[1]),e.writeByte(a[2])}}function X0(e,t,r,n){if(e.writeByte(44),nr(e,0),nr(e,0),nr(e,t),nr(e,r),n){let l=Qs(n.length)-1;e.writeByte(128|l)}else e.writeByte(0)}function J0(e,t,r,n,a=8,o,l,c){D0(r,n,t,a,e,o,l,c)}function nr(e,t){e.writeByte(t&255),e.writeByte(t>>8&255)}function kh(e,t){for(var r=0;r<t.length;r++)e.writeByte(t.charCodeAt(r))}function Qs(e){return Math.max(Math.ceil(Math.log2(e)),1)}var K0=Ah});var jh=H((FE,Oh)=>{var Xs=Gs(),{GIFEncoder:Ih,quantize:ew,applyPalette:tw}=Ch(),Ca=class{constructor(t){this.image=t}async toFrames(t=()=>{}){let{image:r}=this,{pages:n,width:a,pageHeight:o}=await r.metadata(),l=[];if(n>1){r=Xs(await r.png().toBuffer());for(let c=0;c<n;c++){t({cutted:c,total:n});let f=r.clone().extract({left:0,top:o*c,width:a,height:o});l.push(Xs(await f.toBuffer()))}}else l.push(r);return this.frames=l,l}async toGif(t={}){return new Ia(t).addFrame(this.frames||await this.toFrames())}},Ia=class{constructor(t={}){this.options=t,this.frames=[]}addFrame(t){return Array.isArray(t)?this.frames.push(...t):this.frames.push(t),this}getEncoder(t){return new Ih(t)}async toBuffer(t=()=>{},r){let{options:n,frames:a}=this,{width:o,height:l,delay:c=[],repeat:f=0,transparent:p=!1,maxColors:m=256,format:b="rgb565",resizeTo:_="largest",resizeType:A="zoom",resizeOptions:R={},extendBackground:L={r:0,g:0,b:0,alpha:0},rawOptions:F,gifEncoderOptions:x={},gifEncoderQuantizeOptions:te={},gifEncoderFrameOptions:K={}}=n;typeof c=="number"&&(c=new Array(a.length).fill(c)),f===1&&(f=-1);let{fit:j}=R;(j==="inside"||j==="outside")&&(R.fit="contain");let z=[];for(let G=0;G<a.length;G++)z.push(...await new Ca(a[G]).toFrames());if(!o||!l){let G=await Promise.all(a.map(ee=>ee.metadata())),V=_==="largest"?Math.max:Math.min;o=o||V(...G.map(ee=>ee.width)),l=l||V(...G.map(ee=>ee.pageHeight||ee.height))}r||(r=Ih(x));for(let G=0;G<z.length;G++){let V=z[G],{width:ee,height:ie}=await V.metadata();if(ee!==o||ie!==l)if(A==="zoom")V.resize({...R,width:o,height:l});else{let et=Math.abs(o-ee)/2;ee<o?V.extend({left:et,right:et,background:L}):ee>o&&V.extract({left:et,top:0,width:o,height:l});let pe=Math.abs(l-ie)/2;ie<l?V.extend({top:pe,bottom:pe,background:L}):ie>l&&V.extract({left:0,top:pe,width:o,height:l})}let{buffer:Ce}=await V.ensureAlpha().raw(F).toBuffer(),_e=new Uint8ClampedArray(Ce),de=ew(_e,m,{format:b,...te}),wt=tw(_e,de,b);r.writeFrame(wt,o,l,{transparent:p,delay:c[G],repeat:f,...K,palette:de}),t({total:z.length,encoded:G+1})}return r.finish(),r.bytes()}async toSharp(t,r){let n=await this.toBuffer(t,r);return Xs(n,{animated:!0,...this.options.sharpOptions}).gif({loop:this.options.repeat||0,delay:this.options.delay})}};Oh.exports={createGif:(e={})=>new Ia(e),readGif:e=>new Ca(e)}});function Js(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rw,nw,Oa,ja=ws(()=>{rw=Object.defineProperty,nw=(e,t)=>rw(e,"name",{value:t,configurable:!0}),Oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};nw(Js,"getDefaultExportFromCjs")});var Dh={};zu(Dh,{toFormData:()=>qh});function $h(e){let t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let r=t[2]||t[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(a,o)=>String.fromCharCode(o)),n}async function qh(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let r=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new uw(r[1]||r[2]),a,o,l,c,f,p,m=[],b=new Tr,_=We(x=>{l+=F.decode(x,{stream:!0})},"onPartData"),A=We(x=>{m.push(x)},"appendToFile"),R=We(()=>{let x=new bn(m,p,{type:f});b.append(c,x)},"appendFileToFormData"),L=We(()=>{b.append(c,l)},"appendEntryToFormData"),F=new TextDecoder("utf-8");F.decode(),n.onPartBegin=function(){n.onPartData=_,n.onPartEnd=L,a="",o="",l="",c="",f="",p=null,m.length=0},n.onHeaderField=function(x){a+=F.decode(x,{stream:!0})},n.onHeaderValue=function(x){o+=F.decode(x,{stream:!0})},n.onHeaderEnd=function(){if(o+=F.decode(),a=a.toLowerCase(),a==="content-disposition"){let x=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);x&&(c=x[2]||x[3]||""),p=$h(o),p&&(n.onPartData=A,n.onPartEnd=R)}else a==="content-type"&&(f=o);o="",a=""};for await(let x of e)n.write(x);return n.end(),b}var iw,We,mt,le,Bh,ir,Ba,La,aw,fi,ow,sw,lw,cw,Rr,Lh,uw,Fh=ws(()=>{$a();ja();iw=Object.defineProperty,We=(e,t)=>iw(e,"name",{value:t,configurable:!0}),mt=0,le={START_BOUNDARY:mt++,HEADER_FIELD_START:mt++,HEADER_FIELD:mt++,HEADER_VALUE_START:mt++,HEADER_VALUE:mt++,HEADER_VALUE_ALMOST_DONE:mt++,HEADERS_ALMOST_DONE:mt++,PART_DATA_START:mt++,PART_DATA:mt++,END:mt++},Bh=1,ir={PART_BOUNDARY:Bh,LAST_BOUNDARY:Bh*=2},Ba=10,La=13,aw=32,fi=45,ow=58,sw=97,lw=122,cw=We(e=>e|32,"lower"),Rr=We(()=>{},"noop"),Lh=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Rr,this.onHeaderField=Rr,this.onHeadersEnd=Rr,this.onHeaderValue=Rr,this.onPartBegin=Rr,this.onPartData=Rr,this.onPartEnd=Rr,this.boundaryChars={},t=`\r
--`+t;let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=le.START_BOUNDARY}write(t){let r=0,n=t.length,a=this.index,{lookbehind:o,boundary:l,boundaryChars:c,index:f,state:p,flags:m}=this,b=this.boundary.length,_=b-1,A=t.length,R,L,F=We(j=>{this[j+"Mark"]=r},"mark"),x=We(j=>{delete this[j+"Mark"]},"clear"),te=We((j,z,G,V)=>{(z===void 0||z!==G)&&this[j](V&&V.subarray(z,G))},"callback"),K=We((j,z)=>{let G=j+"Mark";G in this&&(z?(te(j,this[G],r,t),delete this[G]):(te(j,this[G],t.length,t),this[G]=0))},"dataCallback");for(r=0;r<n;r++)switch(R=t[r],p){case le.START_BOUNDARY:if(f===l.length-2){if(R===fi)m|=ir.LAST_BOUNDARY;else if(R!==La)return;f++;break}else if(f-1===l.length-2){if(m&ir.LAST_BOUNDARY&&R===fi)p=le.END,m=0;else if(!(m&ir.LAST_BOUNDARY)&&R===Ba)f=0,te("onPartBegin"),p=le.HEADER_FIELD_START;else return;break}R!==l[f+2]&&(f=-2),R===l[f+2]&&f++;break;case le.HEADER_FIELD_START:p=le.HEADER_FIELD,F("onHeaderField"),f=0;case le.HEADER_FIELD:if(R===La){x("onHeaderField"),p=le.HEADERS_ALMOST_DONE;break}if(f++,R===fi)break;if(R===ow){if(f===1)return;K("onHeaderField",!0),p=le.HEADER_VALUE_START;break}if(L=cw(R),L<sw||L>lw)return;break;case le.HEADER_VALUE_START:if(R===aw)break;F("onHeaderValue"),p=le.HEADER_VALUE;case le.HEADER_VALUE:R===La&&(K("onHeaderValue",!0),te("onHeaderEnd"),p=le.HEADER_VALUE_ALMOST_DONE);break;case le.HEADER_VALUE_ALMOST_DONE:if(R!==Ba)return;p=le.HEADER_FIELD_START;break;case le.HEADERS_ALMOST_DONE:if(R!==Ba)return;te("onHeadersEnd"),p=le.PART_DATA_START;break;case le.PART_DATA_START:p=le.PART_DATA,F("onPartData");case le.PART_DATA:if(a=f,f===0){for(r+=_;r<A&&!(t[r]in c);)r+=b;r-=_,R=t[r]}if(f<l.length)l[f]===R?(f===0&&K("onPartData",!0),f++):f=0;else if(f===l.length)f++,R===La?m|=ir.PART_BOUNDARY:R===fi?m|=ir.LAST_BOUNDARY:f=0;else if(f-1===l.length)if(m&ir.PART_BOUNDARY){if(f=0,R===Ba){m&=~ir.PART_BOUNDARY,te("onPartEnd"),te("onPartBegin"),p=le.HEADER_FIELD_START;break}}else m&ir.LAST_BOUNDARY&&R===fi?(te("onPartEnd"),p=le.END,m=0):f=0;if(f>0)o[f-1]=R;else if(a>0){let j=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);te("onPartData",0,a,j),a=0,F("onPartData"),r--}break;case le.END:break;default:throw new Error(`Unexpected state entered: ${p}`)}K("onHeaderField"),K("onHeaderValue"),K("onPartData"),this.index=f,this.state=p,this.flags=m}end(){if(this.state===le.HEADER_FIELD_START&&this.index===0||this.state===le.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==le.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}};We(Lh,"MultipartParser");uw=Lh;We($h,"_fileName");We(qh,"toFormData")});function Xh(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');e=e.replace(/\r?\n/g,"");let t=e.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let r=e.substring(5,t).split(";"),n="",a=!1,o=r[0]||"text/plain",l=o;for(let m=1;m<r.length;m++)r[m]==="base64"?a=!0:r[m]&&(l+=`;${r[m]}`,r[m].indexOf("charset=")===0&&(n=r[m].substring(8)));!r[0]&&!n.length&&(l+=";charset=US-ASCII",n="US-ASCII");let c=a?"base64":"ascii",f=unescape(e.substring(t+1)),p=Buffer.from(f,c);return p.type=o,p.typeFull=l,p.charset=n,p}function Jh(){return Nh||(Nh=1,function(e,t){(function(r,n){n(t)})(Oa,function(r){function n(){}d(n,"noop");function a(i){return typeof i=="object"&&i!==null||typeof i=="function"}d(a,"typeIsObject");let o=n;function l(i,s){try{Object.defineProperty(i,"name",{value:s,configurable:!0})}catch{}}d(l,"setFunctionName");let c=Promise,f=Promise.prototype.then,p=Promise.reject.bind(c);function m(i){return new c(i)}d(m,"newPromise");function b(i){return m(s=>s(i))}d(b,"promiseResolvedWith");function _(i){return p(i)}d(_,"promiseRejectedWith");function A(i,s,u){return f.call(i,s,u)}d(A,"PerformPromiseThen");function R(i,s,u){A(A(i,s,u),void 0,o)}d(R,"uponPromise");function L(i,s){R(i,s)}d(L,"uponFulfillment");function F(i,s){R(i,void 0,s)}d(F,"uponRejection");function x(i,s,u){return A(i,s,u)}d(x,"transformPromiseWith");function te(i){A(i,void 0,o)}d(te,"setPromiseIsHandledToTrue");let K=d(i=>{if(typeof queueMicrotask=="function")K=queueMicrotask;else{let s=b(void 0);K=d(u=>A(s,u),"_queueMicrotask")}return K(i)},"_queueMicrotask");function j(i,s,u){if(typeof i!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(i,s,u)}d(j,"reflectCall");function z(i,s,u){try{return b(j(i,s,u))}catch(g){return _(g)}}d(z,"promiseCall");let G=16384,V=class{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(s){let u=this._back,g=u;u._elements.length===G-1&&(g={_elements:[],_next:void 0}),u._elements.push(s),g!==u&&(this._back=g,u._next=g),++this._size}shift(){let s=this._front,u=s,g=this._cursor,y=g+1,v=s._elements,S=v[g];return y===G&&(u=s._next,y=0),--this._size,this._cursor=y,s!==u&&(this._front=u),v[g]=void 0,S}forEach(s){let u=this._cursor,g=this._front,y=g._elements;for(;(u!==y.length||g._next!==void 0)&&!(u===y.length&&(g=g._next,y=g._elements,u=0,y.length===0));)s(y[u]),++u}peek(){let s=this._front,u=this._cursor;return s._elements[u]}};d(V,"SimpleQueue");let ee=V,ie=Symbol("[[AbortSteps]]"),Ce=Symbol("[[ErrorSteps]]"),_e=Symbol("[[CancelSteps]]"),de=Symbol("[[PullSteps]]"),wt=Symbol("[[ReleaseSteps]]");function et(i,s){i._ownerReadableStream=s,s._reader=i,s._state==="readable"?dr(i):s._state==="closed"?oo(i):Pi(i,s._storedError)}d(et,"ReadableStreamReaderGenericInitialize");function pe(i,s){let u=i._ownerReadableStream;return Ve(u,s)}d(pe,"ReadableStreamReaderGenericCancel");function Ie(i){let s=i._ownerReadableStream;s._state==="readable"?Ai(i,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ql(i,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),s._readableStreamController[wt](),s._reader=void 0,i._ownerReadableStream=void 0}d(Ie,"ReadableStreamReaderGenericRelease");function He(i){return new TypeError("Cannot "+i+" a stream using a released reader")}d(He,"readerLockException");function dr(i){i._closedPromise=m((s,u)=>{i._closedPromise_resolve=s,i._closedPromise_reject=u})}d(dr,"defaultReaderClosedPromiseInitialize");function Pi(i,s){dr(i),Ai(i,s)}d(Pi,"defaultReaderClosedPromiseInitializeAsRejected");function oo(i){dr(i),so(i)}d(oo,"defaultReaderClosedPromiseInitializeAsResolved");function Ai(i,s){i._closedPromise_reject!==void 0&&(te(i._closedPromise),i._closedPromise_reject(s),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0)}d(Ai,"defaultReaderClosedPromiseReject");function ql(i,s){Pi(i,s)}d(ql,"defaultReaderClosedPromiseResetToRejected");function so(i){i._closedPromise_resolve!==void 0&&(i._closedPromise_resolve(void 0),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0)}d(so,"defaultReaderClosedPromiseResolve");let Dl=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},pp=Math.trunc||function(i){return i<0?Math.ceil(i):Math.floor(i)};function Fl(i){return typeof i=="object"||typeof i=="function"}d(Fl,"isDictionary");function tt(i,s){if(i!==void 0&&!Fl(i))throw new TypeError(`${s} is not an object.`)}d(tt,"assertDictionary");function De(i,s){if(typeof i!="function")throw new TypeError(`${s} is not a function.`)}d(De,"assertFunction");function Nl(i){return typeof i=="object"&&i!==null||typeof i=="function"}d(Nl,"isObject");function lo(i,s){if(!Nl(i))throw new TypeError(`${s} is not an object.`)}d(lo,"assertObject");function ct(i,s,u){if(i===void 0)throw new TypeError(`Parameter ${s} is required in '${u}'.`)}d(ct,"assertRequiredArgument");function ki(i,s,u){if(i===void 0)throw new TypeError(`${s} is required in '${u}'.`)}d(ki,"assertRequiredField");function Ci(i){return Number(i)}d(Ci,"convertUnrestrictedDouble");function co(i){return i===0?0:i}d(co,"censorNegativeZero");function Ml(i){return co(pp(i))}d(Ml,"integerPart");function Ii(i,s){let u=Number.MAX_SAFE_INTEGER,g=Number(i);if(g=co(g),!Dl(g))throw new TypeError(`${s} is not a finite number`);if(g=Ml(g),g<0||g>u)throw new TypeError(`${s} is outside the accepted range of 0 to ${u}, inclusive`);return!Dl(g)||g===0?0:g}d(Ii,"convertUnsignedLongLongWithEnforceRange");function Oi(i,s){if(!xt(i))throw new TypeError(`${s} is not a ReadableStream.`)}d(Oi,"assertReadableStream");function fr(i){return new Ft(i)}d(fr,"AcquireReadableStreamDefaultReader");function uo(i,s){i._reader._readRequests.push(s)}d(uo,"ReadableStreamAddReadRequest");function ji(i,s,u){let g=i._reader._readRequests.shift();u?g._closeSteps():g._chunkSteps(s)}d(ji,"ReadableStreamFulfillReadRequest");function jn(i){return i._reader._readRequests.length}d(jn,"ReadableStreamGetNumReadRequests");function fo(i){let s=i._reader;return!(s===void 0||!vt(s))}d(fo,"ReadableStreamHasDefaultReader");let Wl=class{constructor(s){if(ct(s,1,"ReadableStreamDefaultReader"),Oi(s,"First parameter"),Pt(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");et(this,s),this._readRequests=new ee}get closed(){return vt(this)?this._closedPromise:_(Bn("closed"))}cancel(s=void 0){return vt(this)?this._ownerReadableStream===void 0?_(He("cancel")):pe(this,s):_(Bn("cancel"))}read(){if(!vt(this))return _(Bn("read"));if(this._ownerReadableStream===void 0)return _(He("read from"));let s,u,g=m((y,v)=>{s=y,u=v});return Zr(this,{_chunkSteps:y=>s({value:y,done:!1}),_closeSteps:()=>s({value:void 0,done:!0}),_errorSteps:y=>u(y)}),g}releaseLock(){if(!vt(this))throw Bn("releaseLock");this._ownerReadableStream!==void 0&&zl(this)}};d(Wl,"ReadableStreamDefaultReader");let Ft=Wl;Object.defineProperties(Ft.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),l(Ft.prototype.cancel,"cancel"),l(Ft.prototype.read,"read"),l(Ft.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function vt(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_readRequests")?!1:i instanceof Ft}d(vt,"IsReadableStreamDefaultReader");function Zr(i,s){let u=i._ownerReadableStream;u._disturbed=!0,u._state==="closed"?s._closeSteps():u._state==="errored"?s._errorSteps(u._storedError):u._readableStreamController[de](s)}d(Zr,"ReadableStreamDefaultReaderRead");function zl(i){Ie(i);let s=new TypeError("Reader was released");ho(i,s)}d(zl,"ReadableStreamDefaultReaderRelease");function ho(i,s){let u=i._readRequests;i._readRequests=new ee,u.forEach(g=>{g._errorSteps(s)})}d(ho,"ReadableStreamDefaultReaderErrorReadRequests");function Bn(i){return new TypeError(`ReadableStreamDefaultReader.prototype.${i} can only be used on a ReadableStreamDefaultReader`)}d(Bn,"defaultReaderBrandCheckException");let gp=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),Ul=class{constructor(s,u){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=s,this._preventCancel=u}next(){let s=d(()=>this._nextSteps(),"nextSteps");return this._ongoingPromise=this._ongoingPromise?x(this._ongoingPromise,s,s):s(),this._ongoingPromise}return(s){let u=d(()=>this._returnSteps(s),"returnSteps");return this._ongoingPromise?x(this._ongoingPromise,u,u):u()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let s=this._reader,u,g,y=m((v,S)=>{u=v,g=S});return Zr(s,{_chunkSteps:v=>{this._ongoingPromise=void 0,K(()=>u({value:v,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Ie(s),u({value:void 0,done:!0})},_errorSteps:v=>{this._ongoingPromise=void 0,this._isFinished=!0,Ie(s),g(v)}}),y}_returnSteps(s){if(this._isFinished)return Promise.resolve({value:s,done:!0});this._isFinished=!0;let u=this._reader;if(!this._preventCancel){let g=pe(u,s);return Ie(u),x(g,()=>({value:s,done:!0}))}return Ie(u),b({value:s,done:!0})}};d(Ul,"ReadableStreamAsyncIteratorImpl");let Hl=Ul,Gl={next(){return mo(this)?this._asyncIteratorImpl.next():_(po("next"))},return(i){return mo(this)?this._asyncIteratorImpl.return(i):_(po("return"))}};Object.setPrototypeOf(Gl,gp);function Vl(i,s){let u=fr(i),g=new Hl(u,s),y=Object.create(Gl);return y._asyncIteratorImpl=g,y}d(Vl,"AcquireReadableStreamAsyncIterator");function mo(i){if(!a(i)||!Object.prototype.hasOwnProperty.call(i,"_asyncIteratorImpl"))return!1;try{return i._asyncIteratorImpl instanceof Hl}catch{return!1}}d(mo,"IsReadableStreamAsyncIterator");function po(i){return new TypeError(`ReadableStreamAsyncIterator.${i} can only be used on a ReadableSteamAsyncIterator`)}d(po,"streamAsyncIteratorBrandCheckException");let Zl=Number.isNaN||function(i){return i!==i};var go,bo,yo;function Qr(i){return i.slice()}d(Qr,"CreateArrayFromList");function wo(i,s,u,g,y){new Uint8Array(i).set(new Uint8Array(u,g,y),s)}d(wo,"CopyDataBlockBytes");let _t=d(i=>(typeof i.transfer=="function"?_t=d(s=>s.transfer(),"TransferArrayBuffer"):typeof structuredClone=="function"?_t=d(s=>structuredClone(s,{transfer:[s]}),"TransferArrayBuffer"):_t=d(s=>s,"TransferArrayBuffer"),_t(i)),"TransferArrayBuffer"),Nt=d(i=>(typeof i.detached=="boolean"?Nt=d(s=>s.detached,"IsDetachedBuffer"):Nt=d(s=>s.byteLength===0,"IsDetachedBuffer"),Nt(i)),"IsDetachedBuffer");function vo(i,s,u){if(i.slice)return i.slice(s,u);let g=u-s,y=new ArrayBuffer(g);return wo(y,0,i,s,g),y}d(vo,"ArrayBufferSlice");function Ln(i,s){let u=i[s];if(u!=null){if(typeof u!="function")throw new TypeError(`${String(s)} is not a function`);return u}}d(Ln,"GetMethod");function Ql(i){let s={[Symbol.iterator]:()=>i.iterator},u=async function*(){return yield*s}(),g=u.next;return{iterator:u,nextMethod:g,done:!1}}d(Ql,"CreateAsyncFromSyncIterator");let _o=(yo=(go=Symbol.asyncIterator)!==null&&go!==void 0?go:(bo=Symbol.for)===null||bo===void 0?void 0:bo.call(Symbol,"Symbol.asyncIterator"))!==null&&yo!==void 0?yo:"@@asyncIterator";function Eo(i,s="sync",u){if(u===void 0)if(s==="async"){if(u=Ln(i,_o),u===void 0){let v=Ln(i,Symbol.iterator),S=Eo(i,"sync",v);return Ql(S)}}else u=Ln(i,Symbol.iterator);if(u===void 0)throw new TypeError("The object is not iterable");let g=j(u,i,[]);if(!a(g))throw new TypeError("The iterator method must return an object");let y=g.next;return{iterator:g,nextMethod:y,done:!1}}d(Eo,"GetIterator");function Yl(i){let s=j(i.nextMethod,i.iterator,[]);if(!a(s))throw new TypeError("The iterator.next() method must return an object");return s}d(Yl,"IteratorNext");function Xl(i){return!!i.done}d(Xl,"IteratorComplete");function Jl(i){return i.value}d(Jl,"IteratorValue");function Kl(i){return!(typeof i!="number"||Zl(i)||i<0)}d(Kl,"IsNonNegativeNumber");function So(i){let s=vo(i.buffer,i.byteOffset,i.byteOffset+i.byteLength);return new Uint8Array(s)}d(So,"CloneAsUint8Array");function Bi(i){let s=i._queue.shift();return i._queueTotalSize-=s.size,i._queueTotalSize<0&&(i._queueTotalSize=0),s.value}d(Bi,"DequeueValue");function Li(i,s,u){if(!Kl(u)||u===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");i._queue.push({value:s,size:u}),i._queueTotalSize+=u}d(Li,"EnqueueValueWithSize");function ec(i){return i._queue.peek().value}d(ec,"PeekQueueValue");function Et(i){i._queue=new ee,i._queueTotalSize=0}d(Et,"ResetQueue");function Ro(i){return i===DataView}d(Ro,"isDataViewConstructor");function tc(i){return Ro(i.constructor)}d(tc,"isDataView");function rc(i){return Ro(i)?1:i.BYTES_PER_ELEMENT}d(rc,"arrayBufferViewElementSize");let nc=class{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!$i(this))throw Mi("view");return this._view}respond(s){if(!$i(this))throw Mi("respond");if(ct(s,1,"respond"),s=Ii(s,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Nt(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Fn(this._associatedReadableByteStreamController,s)}respondWithNewView(s){if(!$i(this))throw Mi("respondWithNewView");if(ct(s,1,"respondWithNewView"),!ArrayBuffer.isView(s))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Nt(s.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Nn(this._associatedReadableByteStreamController,s)}};d(nc,"ReadableStreamBYOBRequest");let hr=nc;Object.defineProperties(hr.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),l(hr.prototype.respond,"respond"),l(hr.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hr.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});let ic=class{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Mt(this))throw Xr("byobRequest");return Ni(this)}get desiredSize(){if(!Mt(this))throw Xr("desiredSize");return Bo(this)}close(){if(!Mt(this))throw Xr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be closed`);Yr(this)}enqueue(s){if(!Mt(this))throw Xr("enqueue");if(ct(s,1,"enqueue"),!ArrayBuffer.isView(s))throw new TypeError("chunk must be an array buffer view");if(s.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(s.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let u=this._controlledReadableByteStream._state;if(u!=="readable")throw new TypeError(`The stream (in ${u} state) is not in the readable state and cannot be enqueued to`);Dn(this,s)}error(s=void 0){if(!Mt(this))throw Xr("error");Fe(this,s)}[_e](s){To(this),Et(this);let u=this._cancelAlgorithm(s);return qn(this),u}[de](s){let u=this._controlledReadableByteStream;if(this._queueTotalSize>0){jo(this,s);return}let g=this._autoAllocateChunkSize;if(g!==void 0){let y;try{y=new ArrayBuffer(g)}catch(S){s._errorSteps(S);return}let v={buffer:y,bufferByteLength:g,byteOffset:0,byteLength:g,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(v)}uo(u,s),Wt(this)}[wt](){if(this._pendingPullIntos.length>0){let s=this._pendingPullIntos.peek();s.readerType="none",this._pendingPullIntos=new ee,this._pendingPullIntos.push(s)}}};d(ic,"ReadableByteStreamController");let St=ic;Object.defineProperties(St.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),l(St.prototype.close,"close"),l(St.prototype.enqueue,"enqueue"),l(St.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(St.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Mt(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledReadableByteStream")?!1:i instanceof St}d(Mt,"IsReadableByteStreamController");function $i(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_associatedReadableByteStreamController")?!1:i instanceof hr}d($i,"IsReadableStreamBYOBRequest");function Wt(i){if(!cc(i))return;if(i._pulling){i._pullAgain=!0;return}i._pulling=!0;let s=i._pullAlgorithm();R(s,()=>(i._pulling=!1,i._pullAgain&&(i._pullAgain=!1,Wt(i)),null),u=>(Fe(i,u),null))}d(Wt,"ReadableByteStreamControllerCallPullIfNeeded");function To(i){Di(i),i._pendingPullIntos=new ee}d(To,"ReadableByteStreamControllerClearPendingPullIntos");function qi(i,s){let u=!1;i._state==="closed"&&(u=!0);let g=xo(s);s.readerType==="default"?ji(i,g,u):pc(i,g,u)}d(qi,"ReadableByteStreamControllerCommitPullIntoDescriptor");function xo(i){let s=i.bytesFilled,u=i.elementSize;return new i.viewConstructor(i.buffer,i.byteOffset,s/u)}d(xo,"ReadableByteStreamControllerConvertPullIntoDescriptor");function $n(i,s,u,g){i._queue.push({buffer:s,byteOffset:u,byteLength:g}),i._queueTotalSize+=g}d($n,"ReadableByteStreamControllerEnqueueChunkToQueue");function Po(i,s,u,g){let y;try{y=vo(s,u,u+g)}catch(v){throw Fe(i,v),v}$n(i,y,0,g)}d(Po,"ReadableByteStreamControllerEnqueueClonedChunkToQueue");function Ao(i,s){s.bytesFilled>0&&Po(i,s.buffer,s.byteOffset,s.bytesFilled),mr(i)}d(Ao,"ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue");function ko(i,s){let u=Math.min(i._queueTotalSize,s.byteLength-s.bytesFilled),g=s.bytesFilled+u,y=u,v=!1,S=g%s.elementSize,C=g-S;C>=s.minimumFill&&(y=C-s.bytesFilled,v=!0);let q=i._queue;for(;y>0;){let M=q.peek(),X=Math.min(y,M.byteLength),J=s.byteOffset+s.bytesFilled;wo(s.buffer,J,M.buffer,M.byteOffset,X),M.byteLength===X?q.shift():(M.byteOffset+=X,M.byteLength-=X),i._queueTotalSize-=X,Co(i,X,s),y-=X}return v}d(ko,"ReadableByteStreamControllerFillPullIntoDescriptorFromQueue");function Co(i,s,u){u.bytesFilled+=s}d(Co,"ReadableByteStreamControllerFillHeadPullIntoDescriptor");function Io(i){i._queueTotalSize===0&&i._closeRequested?(qn(i),an(i._controlledReadableByteStream)):Wt(i)}d(Io,"ReadableByteStreamControllerHandleQueueDrain");function Di(i){i._byobRequest!==null&&(i._byobRequest._associatedReadableByteStreamController=void 0,i._byobRequest._view=null,i._byobRequest=null)}d(Di,"ReadableByteStreamControllerInvalidateBYOBRequest");function Fi(i){for(;i._pendingPullIntos.length>0;){if(i._queueTotalSize===0)return;let s=i._pendingPullIntos.peek();ko(i,s)&&(mr(i),qi(i._controlledReadableByteStream,s))}}d(Fi,"ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue");function ac(i){let s=i._controlledReadableByteStream._reader;for(;s._readRequests.length>0;){if(i._queueTotalSize===0)return;let u=s._readRequests.shift();jo(i,u)}}d(ac,"ReadableByteStreamControllerProcessReadRequestsUsingQueue");function oc(i,s,u,g){let y=i._controlledReadableByteStream,v=s.constructor,S=rc(v),{byteOffset:C,byteLength:q}=s,M=u*S,X;try{X=_t(s.buffer)}catch(se){g._errorSteps(se);return}let J={buffer:X,bufferByteLength:X.byteLength,byteOffset:C,byteLength:q,bytesFilled:0,minimumFill:M,elementSize:S,viewConstructor:v,readerType:"byob"};if(i._pendingPullIntos.length>0){i._pendingPullIntos.push(J),qo(y,g);return}if(y._state==="closed"){let se=new v(J.buffer,J.byteOffset,0);g._closeSteps(se);return}if(i._queueTotalSize>0){if(ko(i,J)){let se=xo(J);Io(i),g._chunkSteps(se);return}if(i._closeRequested){let se=new TypeError("Insufficient bytes to fill elements in the given buffer");Fe(i,se),g._errorSteps(se);return}}i._pendingPullIntos.push(J),qo(y,g),Wt(i)}d(oc,"ReadableByteStreamControllerPullInto");function sc(i,s){s.readerType==="none"&&mr(i);let u=i._controlledReadableByteStream;if(Wi(u))for(;Do(u)>0;){let g=mr(i);qi(u,g)}}d(sc,"ReadableByteStreamControllerRespondInClosedState");function lc(i,s,u){if(Co(i,s,u),u.readerType==="none"){Ao(i,u),Fi(i);return}if(u.bytesFilled<u.minimumFill)return;mr(i);let g=u.bytesFilled%u.elementSize;if(g>0){let y=u.byteOffset+u.bytesFilled;Po(i,u.buffer,y-g,g)}u.bytesFilled-=g,qi(i._controlledReadableByteStream,u),Fi(i)}d(lc,"ReadableByteStreamControllerRespondInReadableState");function Oo(i,s){let u=i._pendingPullIntos.peek();Di(i),i._controlledReadableByteStream._state==="closed"?sc(i,u):lc(i,s,u),Wt(i)}d(Oo,"ReadableByteStreamControllerRespondInternal");function mr(i){return i._pendingPullIntos.shift()}d(mr,"ReadableByteStreamControllerShiftPendingPullInto");function cc(i){let s=i._controlledReadableByteStream;return s._state!=="readable"||i._closeRequested||!i._started?!1:!!(fo(s)&&jn(s)>0||Wi(s)&&Do(s)>0||Bo(i)>0)}d(cc,"ReadableByteStreamControllerShouldCallPull");function qn(i){i._pullAlgorithm=void 0,i._cancelAlgorithm=void 0}d(qn,"ReadableByteStreamControllerClearAlgorithms");function Yr(i){let s=i._controlledReadableByteStream;if(!(i._closeRequested||s._state!=="readable")){if(i._queueTotalSize>0){i._closeRequested=!0;return}if(i._pendingPullIntos.length>0){let u=i._pendingPullIntos.peek();if(u.bytesFilled%u.elementSize!==0){let g=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Fe(i,g),g}}qn(i),an(s)}}d(Yr,"ReadableByteStreamControllerClose");function Dn(i,s){let u=i._controlledReadableByteStream;if(i._closeRequested||u._state!=="readable")return;let{buffer:g,byteOffset:y,byteLength:v}=s;if(Nt(g))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let S=_t(g);if(i._pendingPullIntos.length>0){let C=i._pendingPullIntos.peek();if(Nt(C.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Di(i),C.buffer=_t(C.buffer),C.readerType==="none"&&Ao(i,C)}if(fo(u))if(ac(i),jn(u)===0)$n(i,S,y,v);else{i._pendingPullIntos.length>0&&mr(i);let C=new Uint8Array(S,y,v);ji(u,C,!1)}else Wi(u)?($n(i,S,y,v),Fi(i)):$n(i,S,y,v);Wt(i)}d(Dn,"ReadableByteStreamControllerEnqueue");function Fe(i,s){let u=i._controlledReadableByteStream;u._state==="readable"&&(To(i),Et(i),qn(i),ss(u,s))}d(Fe,"ReadableByteStreamControllerError");function jo(i,s){let u=i._queue.shift();i._queueTotalSize-=u.byteLength,Io(i);let g=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);s._chunkSteps(g)}d(jo,"ReadableByteStreamControllerFillReadRequestFromQueue");function Ni(i){if(i._byobRequest===null&&i._pendingPullIntos.length>0){let s=i._pendingPullIntos.peek(),u=new Uint8Array(s.buffer,s.byteOffset+s.bytesFilled,s.byteLength-s.bytesFilled),g=Object.create(hr.prototype);dc(g,i,u),i._byobRequest=g}return i._byobRequest}d(Ni,"ReadableByteStreamControllerGetBYOBRequest");function Bo(i){let s=i._controlledReadableByteStream._state;return s==="errored"?null:s==="closed"?0:i._strategyHWM-i._queueTotalSize}d(Bo,"ReadableByteStreamControllerGetDesiredSize");function Fn(i,s){let u=i._pendingPullIntos.peek();if(i._controlledReadableByteStream._state==="closed"){if(s!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(s===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(u.bytesFilled+s>u.byteLength)throw new RangeError("bytesWritten out of range")}u.buffer=_t(u.buffer),Oo(i,s)}d(Fn,"ReadableByteStreamControllerRespond");function Nn(i,s){let u=i._pendingPullIntos.peek();if(i._controlledReadableByteStream._state==="closed"){if(s.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(s.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(u.byteOffset+u.bytesFilled!==s.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(u.bufferByteLength!==s.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(u.bytesFilled+s.byteLength>u.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let g=s.byteLength;u.buffer=_t(s.buffer),Oo(i,g)}d(Nn,"ReadableByteStreamControllerRespondWithNewView");function Lo(i,s,u,g,y,v,S){s._controlledReadableByteStream=i,s._pullAgain=!1,s._pulling=!1,s._byobRequest=null,s._queue=s._queueTotalSize=void 0,Et(s),s._closeRequested=!1,s._started=!1,s._strategyHWM=v,s._pullAlgorithm=g,s._cancelAlgorithm=y,s._autoAllocateChunkSize=S,s._pendingPullIntos=new ee,i._readableStreamController=s;let C=u();R(b(C),()=>(s._started=!0,Wt(s),null),q=>(Fe(s,q),null))}d(Lo,"SetUpReadableByteStreamController");function uc(i,s,u){let g=Object.create(St.prototype),y,v,S;s.start!==void 0?y=d(()=>s.start(g),"startAlgorithm"):y=d(()=>{},"startAlgorithm"),s.pull!==void 0?v=d(()=>s.pull(g),"pullAlgorithm"):v=d(()=>b(void 0),"pullAlgorithm"),s.cancel!==void 0?S=d(q=>s.cancel(q),"cancelAlgorithm"):S=d(()=>b(void 0),"cancelAlgorithm");let C=s.autoAllocateChunkSize;if(C===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Lo(i,g,y,v,S,u,C)}d(uc,"SetUpReadableByteStreamControllerFromUnderlyingSource");function dc(i,s,u){i._associatedReadableByteStreamController=s,i._view=u}d(dc,"SetUpReadableStreamBYOBRequest");function Mi(i){return new TypeError(`ReadableStreamBYOBRequest.prototype.${i} can only be used on a ReadableStreamBYOBRequest`)}d(Mi,"byobRequestBrandCheckException");function Xr(i){return new TypeError(`ReadableByteStreamController.prototype.${i} can only be used on a ReadableByteStreamController`)}d(Xr,"byteStreamControllerBrandCheckException");function fc(i,s){tt(i,s);let u=i?.mode;return{mode:u===void 0?void 0:hc(u,`${s} has member 'mode' that`)}}d(fc,"convertReaderOptions");function hc(i,s){if(i=`${i}`,i!=="byob")throw new TypeError(`${s} '${i}' is not a valid enumeration value for ReadableStreamReaderMode`);return i}d(hc,"convertReadableStreamReaderMode");function mc(i,s){var u;tt(i,s);let g=(u=i?.min)!==null&&u!==void 0?u:1;return{min:Ii(g,`${s} has member 'min' that`)}}d(mc,"convertByobReadOptions");function $o(i){return new zt(i)}d($o,"AcquireReadableStreamBYOBReader");function qo(i,s){i._reader._readIntoRequests.push(s)}d(qo,"ReadableStreamAddReadIntoRequest");function pc(i,s,u){let g=i._reader._readIntoRequests.shift();u?g._closeSteps(s):g._chunkSteps(s)}d(pc,"ReadableStreamFulfillReadIntoRequest");function Do(i){return i._reader._readIntoRequests.length}d(Do,"ReadableStreamGetNumReadIntoRequests");function Wi(i){let s=i._reader;return!(s===void 0||!Ut(s))}d(Wi,"ReadableStreamHasBYOBReader");let gc=class{constructor(s){if(ct(s,1,"ReadableStreamBYOBReader"),Oi(s,"First parameter"),Pt(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Mt(s._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");et(this,s),this._readIntoRequests=new ee}get closed(){return Ut(this)?this._closedPromise:_(Mn("closed"))}cancel(s=void 0){return Ut(this)?this._ownerReadableStream===void 0?_(He("cancel")):pe(this,s):_(Mn("cancel"))}read(s,u={}){if(!Ut(this))return _(Mn("read"));if(!ArrayBuffer.isView(s))return _(new TypeError("view must be an array buffer view"));if(s.byteLength===0)return _(new TypeError("view must have non-zero byteLength"));if(s.buffer.byteLength===0)return _(new TypeError("view's buffer must have non-zero byteLength"));if(Nt(s.buffer))return _(new TypeError("view's buffer has been detached"));let g;try{g=mc(u,"options")}catch(q){return _(q)}let y=g.min;if(y===0)return _(new TypeError("options.min must be greater than 0"));if(tc(s)){if(y>s.byteLength)return _(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(y>s.length)return _(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return _(He("read from"));let v,S,C=m((q,M)=>{v=q,S=M});return Fo(this,s,y,{_chunkSteps:q=>v({value:q,done:!1}),_closeSteps:q=>v({value:q,done:!0}),_errorSteps:q=>S(q)}),C}releaseLock(){if(!Ut(this))throw Mn("releaseLock");this._ownerReadableStream!==void 0&&bc(this)}};d(gc,"ReadableStreamBYOBReader");let zt=gc;Object.defineProperties(zt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),l(zt.prototype.cancel,"cancel"),l(zt.prototype.read,"read"),l(zt.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ut(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_readIntoRequests")?!1:i instanceof zt}d(Ut,"IsReadableStreamBYOBReader");function Fo(i,s,u,g){let y=i._ownerReadableStream;y._disturbed=!0,y._state==="errored"?g._errorSteps(y._storedError):oc(y._readableStreamController,s,u,g)}d(Fo,"ReadableStreamBYOBReaderRead");function bc(i){Ie(i);let s=new TypeError("Reader was released");No(i,s)}d(bc,"ReadableStreamBYOBReaderRelease");function No(i,s){let u=i._readIntoRequests;i._readIntoRequests=new ee,u.forEach(g=>{g._errorSteps(s)})}d(No,"ReadableStreamBYOBReaderErrorReadIntoRequests");function Mn(i){return new TypeError(`ReadableStreamBYOBReader.prototype.${i} can only be used on a ReadableStreamBYOBReader`)}d(Mn,"byobReaderBrandCheckException");function Jr(i,s){let{highWaterMark:u}=i;if(u===void 0)return s;if(Zl(u)||u<0)throw new RangeError("Invalid highWaterMark");return u}d(Jr,"ExtractHighWaterMark");function Wn(i){let{size:s}=i;return s||(()=>1)}d(Wn,"ExtractSizeAlgorithm");function zn(i,s){tt(i,s);let u=i?.highWaterMark,g=i?.size;return{highWaterMark:u===void 0?void 0:Ci(u),size:g===void 0?void 0:yc(g,`${s} has member 'size' that`)}}d(zn,"convertQueuingStrategy");function yc(i,s){return De(i,s),u=>Ci(i(u))}d(yc,"convertQueuingStrategySize");function wc(i,s){tt(i,s);let u=i?.abort,g=i?.close,y=i?.start,v=i?.type,S=i?.write;return{abort:u===void 0?void 0:vc(u,i,`${s} has member 'abort' that`),close:g===void 0?void 0:_c(g,i,`${s} has member 'close' that`),start:y===void 0?void 0:Ec(y,i,`${s} has member 'start' that`),write:S===void 0?void 0:Sc(S,i,`${s} has member 'write' that`),type:v}}d(wc,"convertUnderlyingSink");function vc(i,s,u){return De(i,u),g=>z(i,s,[g])}d(vc,"convertUnderlyingSinkAbortCallback");function _c(i,s,u){return De(i,u),()=>z(i,s,[])}d(_c,"convertUnderlyingSinkCloseCallback");function Ec(i,s,u){return De(i,u),g=>j(i,s,[g])}d(Ec,"convertUnderlyingSinkStartCallback");function Sc(i,s,u){return De(i,u),(g,y)=>z(i,s,[g,y])}d(Sc,"convertUnderlyingSinkWriteCallback");function Mo(i,s){if(!pr(i))throw new TypeError(`${s} is not a WritableStream.`)}d(Mo,"assertWritableStream");function Rc(i){if(typeof i!="object"||i===null)return!1;try{return typeof i.aborted=="boolean"}catch{return!1}}d(Rc,"isAbortSignal");let bp=typeof AbortController=="function";function Tc(){if(bp)return new AbortController}d(Tc,"createAbortController");let xc=class{constructor(s={},u={}){s===void 0?s=null:lo(s,"First parameter");let g=zn(u,"Second parameter"),y=wc(s,"First parameter");if(zo(this),y.type!==void 0)throw new RangeError("Invalid type is specified");let v=Wn(g),S=Jr(g,1);zc(this,y,S,v)}get locked(){if(!pr(this))throw Zn("locked");return gr(this)}abort(s=void 0){return pr(this)?gr(this)?_(new TypeError("Cannot abort a stream that already has a writer")):Un(this,s):_(Zn("abort"))}close(){return pr(this)?gr(this)?_(new TypeError("Cannot close a stream that already has a writer")):rt(this)?_(new TypeError("Cannot close an already-closing stream")):Uo(this):_(Zn("close"))}getWriter(){if(!pr(this))throw Zn("getWriter");return Wo(this)}};d(xc,"WritableStream");let Ht=xc;Object.defineProperties(Ht.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),l(Ht.prototype.abort,"abort"),l(Ht.prototype.close,"close"),l(Ht.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ht.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Wo(i){return new Rt(i)}d(Wo,"AcquireWritableStreamDefaultWriter");function Pc(i,s,u,g,y=1,v=()=>1){let S=Object.create(Ht.prototype);zo(S);let C=Object.create(Kr.prototype);return Qo(S,C,i,s,u,g,y,v),S}d(Pc,"CreateWritableStream");function zo(i){i._state="writable",i._storedError=void 0,i._writer=void 0,i._writableStreamController=void 0,i._writeRequests=new ee,i._inFlightWriteRequest=void 0,i._closeRequest=void 0,i._inFlightCloseRequest=void 0,i._pendingAbortRequest=void 0,i._backpressure=!1}d(zo,"InitializeWritableStream");function pr(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_writableStreamController")?!1:i instanceof Ht}d(pr,"IsWritableStream");function gr(i){return i._writer!==void 0}d(gr,"IsWritableStreamLocked");function Un(i,s){var u;if(i._state==="closed"||i._state==="errored")return b(void 0);i._writableStreamController._abortReason=s,(u=i._writableStreamController._abortController)===null||u===void 0||u.abort(s);let g=i._state;if(g==="closed"||g==="errored")return b(void 0);if(i._pendingAbortRequest!==void 0)return i._pendingAbortRequest._promise;let y=!1;g==="erroring"&&(y=!0,s=void 0);let v=m((S,C)=>{i._pendingAbortRequest={_promise:void 0,_resolve:S,_reject:C,_reason:s,_wasAlreadyErroring:y}});return i._pendingAbortRequest._promise=v,y||Ui(i,s),v}d(Un,"WritableStreamAbort");function Uo(i){let s=i._state;if(s==="closed"||s==="errored")return _(new TypeError(`The stream (in ${s} state) is not in the writable state and cannot be closed`));let u=m((y,v)=>{let S={_resolve:y,_reject:v};i._closeRequest=S}),g=i._writer;return g!==void 0&&i._backpressure&&s==="writable"&&Ji(g),Uc(i._writableStreamController),u}d(Uo,"WritableStreamClose");function Ac(i){return m((s,u)=>{let g={_resolve:s,_reject:u};i._writeRequests.push(g)})}d(Ac,"WritableStreamAddWriteRequest");function zi(i,s){if(i._state==="writable"){Ui(i,s);return}Hi(i)}d(zi,"WritableStreamDealWithRejection");function Ui(i,s){let u=i._writableStreamController;i._state="erroring",i._storedError=s;let g=i._writer;g!==void 0&&Go(g,s),!jc(i)&&u._started&&Hi(i)}d(Ui,"WritableStreamStartErroring");function Hi(i){i._state="errored",i._writableStreamController[Ce]();let s=i._storedError;if(i._writeRequests.forEach(y=>{y._reject(s)}),i._writeRequests=new ee,i._pendingAbortRequest===void 0){Hn(i);return}let u=i._pendingAbortRequest;if(i._pendingAbortRequest=void 0,u._wasAlreadyErroring){u._reject(s),Hn(i);return}let g=i._writableStreamController[ie](u._reason);R(g,()=>(u._resolve(),Hn(i),null),y=>(u._reject(y),Hn(i),null))}d(Hi,"WritableStreamFinishErroring");function kc(i){i._inFlightWriteRequest._resolve(void 0),i._inFlightWriteRequest=void 0}d(kc,"WritableStreamFinishInFlightWrite");function Cc(i,s){i._inFlightWriteRequest._reject(s),i._inFlightWriteRequest=void 0,zi(i,s)}d(Cc,"WritableStreamFinishInFlightWriteWithError");function Ic(i){i._inFlightCloseRequest._resolve(void 0),i._inFlightCloseRequest=void 0,i._state==="erroring"&&(i._storedError=void 0,i._pendingAbortRequest!==void 0&&(i._pendingAbortRequest._resolve(),i._pendingAbortRequest=void 0)),i._state="closed";let s=i._writer;s!==void 0&&Ko(s)}d(Ic,"WritableStreamFinishInFlightClose");function Oc(i,s){i._inFlightCloseRequest._reject(s),i._inFlightCloseRequest=void 0,i._pendingAbortRequest!==void 0&&(i._pendingAbortRequest._reject(s),i._pendingAbortRequest=void 0),zi(i,s)}d(Oc,"WritableStreamFinishInFlightCloseWithError");function rt(i){return!(i._closeRequest===void 0&&i._inFlightCloseRequest===void 0)}d(rt,"WritableStreamCloseQueuedOrInFlight");function jc(i){return!(i._inFlightWriteRequest===void 0&&i._inFlightCloseRequest===void 0)}d(jc,"WritableStreamHasOperationMarkedInFlight");function Bc(i){i._inFlightCloseRequest=i._closeRequest,i._closeRequest=void 0}d(Bc,"WritableStreamMarkCloseRequestInFlight");function Lc(i){i._inFlightWriteRequest=i._writeRequests.shift()}d(Lc,"WritableStreamMarkFirstWriteRequestInFlight");function Hn(i){i._closeRequest!==void 0&&(i._closeRequest._reject(i._storedError),i._closeRequest=void 0);let s=i._writer;s!==void 0&&Yi(s,i._storedError)}d(Hn,"WritableStreamRejectCloseAndClosedPromiseIfNeeded");function Gi(i,s){let u=i._writer;u!==void 0&&s!==i._backpressure&&(s?Xc(u):Ji(u)),i._backpressure=s}d(Gi,"WritableStreamUpdateBackpressure");let $c=class{constructor(s){if(ct(s,1,"WritableStreamDefaultWriter"),Mo(s,"First parameter"),gr(s))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=s,s._writer=this;let u=s._state;if(u==="writable")!rt(s)&&s._backpressure?Yn(this):es(this),Qn(this);else if(u==="erroring")Xi(this,s._storedError),Qn(this);else if(u==="closed")es(this),Qc(this);else{let g=s._storedError;Xi(this,g),Jo(this,g)}}get closed(){return Gt(this)?this._closedPromise:_(Vt("closed"))}get desiredSize(){if(!Gt(this))throw Vt("desiredSize");if(this._ownerWritableStream===void 0)throw tn("desiredSize");return Nc(this)}get ready(){return Gt(this)?this._readyPromise:_(Vt("ready"))}abort(s=void 0){return Gt(this)?this._ownerWritableStream===void 0?_(tn("abort")):qc(this,s):_(Vt("abort"))}close(){if(!Gt(this))return _(Vt("close"));let s=this._ownerWritableStream;return s===void 0?_(tn("close")):rt(s)?_(new TypeError("Cannot close an already-closing stream")):Ho(this)}releaseLock(){if(!Gt(this))throw Vt("releaseLock");this._ownerWritableStream!==void 0&&Vo(this)}write(s=void 0){return Gt(this)?this._ownerWritableStream===void 0?_(tn("write to")):Zo(this,s):_(Vt("write"))}};d($c,"WritableStreamDefaultWriter");let Rt=$c;Object.defineProperties(Rt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),l(Rt.prototype.abort,"abort"),l(Rt.prototype.close,"close"),l(Rt.prototype.releaseLock,"releaseLock"),l(Rt.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Gt(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_ownerWritableStream")?!1:i instanceof Rt}d(Gt,"IsWritableStreamDefaultWriter");function qc(i,s){let u=i._ownerWritableStream;return Un(u,s)}d(qc,"WritableStreamDefaultWriterAbort");function Ho(i){let s=i._ownerWritableStream;return Uo(s)}d(Ho,"WritableStreamDefaultWriterClose");function Dc(i){let s=i._ownerWritableStream,u=s._state;return rt(s)||u==="closed"?b(void 0):u==="errored"?_(s._storedError):Ho(i)}d(Dc,"WritableStreamDefaultWriterCloseWithErrorPropagation");function Fc(i,s){i._closedPromiseState==="pending"?Yi(i,s):Yc(i,s)}d(Fc,"WritableStreamDefaultWriterEnsureClosedPromiseRejected");function Go(i,s){i._readyPromiseState==="pending"?ts(i,s):Jc(i,s)}d(Go,"WritableStreamDefaultWriterEnsureReadyPromiseRejected");function Nc(i){let s=i._ownerWritableStream,u=s._state;return u==="errored"||u==="erroring"?null:u==="closed"?0:Yo(s._writableStreamController)}d(Nc,"WritableStreamDefaultWriterGetDesiredSize");function Vo(i){let s=i._ownerWritableStream,u=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Go(i,u),Fc(i,u),s._writer=void 0,i._ownerWritableStream=void 0}d(Vo,"WritableStreamDefaultWriterRelease");function Zo(i,s){let u=i._ownerWritableStream,g=u._writableStreamController,y=Hc(g,s);if(u!==i._ownerWritableStream)return _(tn("write to"));let v=u._state;if(v==="errored")return _(u._storedError);if(rt(u)||v==="closed")return _(new TypeError("The stream is closing or closed and cannot be written to"));if(v==="erroring")return _(u._storedError);let S=Ac(u);return Gc(g,s,y),S}d(Zo,"WritableStreamDefaultWriterWrite");let Mc={},Wc=class{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Vi(this))throw Qi("abortReason");return this._abortReason}get signal(){if(!Vi(this))throw Qi("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(s=void 0){if(!Vi(this))throw Qi("error");this._controlledWritableStream._state==="writable"&&Xo(this,s)}[ie](s){let u=this._abortAlgorithm(s);return Gn(this),u}[Ce](){Et(this)}};d(Wc,"WritableStreamDefaultController");let Kr=Wc;Object.defineProperties(Kr.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Kr.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Vi(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledWritableStream")?!1:i instanceof Kr}d(Vi,"IsWritableStreamDefaultController");function Qo(i,s,u,g,y,v,S,C){s._controlledWritableStream=i,i._writableStreamController=s,s._queue=void 0,s._queueTotalSize=void 0,Et(s),s._abortReason=void 0,s._abortController=Tc(),s._started=!1,s._strategySizeAlgorithm=C,s._strategyHWM=S,s._writeAlgorithm=g,s._closeAlgorithm=y,s._abortAlgorithm=v;let q=Zi(s);Gi(i,q);let M=u(),X=b(M);R(X,()=>(s._started=!0,Vn(s),null),J=>(s._started=!0,zi(i,J),null))}d(Qo,"SetUpWritableStreamDefaultController");function zc(i,s,u,g){let y=Object.create(Kr.prototype),v,S,C,q;s.start!==void 0?v=d(()=>s.start(y),"startAlgorithm"):v=d(()=>{},"startAlgorithm"),s.write!==void 0?S=d(M=>s.write(M,y),"writeAlgorithm"):S=d(()=>b(void 0),"writeAlgorithm"),s.close!==void 0?C=d(()=>s.close(),"closeAlgorithm"):C=d(()=>b(void 0),"closeAlgorithm"),s.abort!==void 0?q=d(M=>s.abort(M),"abortAlgorithm"):q=d(()=>b(void 0),"abortAlgorithm"),Qo(i,y,v,S,C,q,u,g)}d(zc,"SetUpWritableStreamDefaultControllerFromUnderlyingSink");function Gn(i){i._writeAlgorithm=void 0,i._closeAlgorithm=void 0,i._abortAlgorithm=void 0,i._strategySizeAlgorithm=void 0}d(Gn,"WritableStreamDefaultControllerClearAlgorithms");function Uc(i){Li(i,Mc,0),Vn(i)}d(Uc,"WritableStreamDefaultControllerClose");function Hc(i,s){try{return i._strategySizeAlgorithm(s)}catch(u){return en(i,u),1}}d(Hc,"WritableStreamDefaultControllerGetChunkSize");function Yo(i){return i._strategyHWM-i._queueTotalSize}d(Yo,"WritableStreamDefaultControllerGetDesiredSize");function Gc(i,s,u){try{Li(i,s,u)}catch(y){en(i,y);return}let g=i._controlledWritableStream;if(!rt(g)&&g._state==="writable"){let y=Zi(i);Gi(g,y)}Vn(i)}d(Gc,"WritableStreamDefaultControllerWrite");function Vn(i){let s=i._controlledWritableStream;if(!i._started||s._inFlightWriteRequest!==void 0)return;if(s._state==="erroring"){Hi(s);return}if(i._queue.length===0)return;let u=ec(i);u===Mc?Vc(i):Zc(i,u)}d(Vn,"WritableStreamDefaultControllerAdvanceQueueIfNeeded");function en(i,s){i._controlledWritableStream._state==="writable"&&Xo(i,s)}d(en,"WritableStreamDefaultControllerErrorIfNeeded");function Vc(i){let s=i._controlledWritableStream;Bc(s),Bi(i);let u=i._closeAlgorithm();Gn(i),R(u,()=>(Ic(s),null),g=>(Oc(s,g),null))}d(Vc,"WritableStreamDefaultControllerProcessClose");function Zc(i,s){let u=i._controlledWritableStream;Lc(u);let g=i._writeAlgorithm(s);R(g,()=>{kc(u);let y=u._state;if(Bi(i),!rt(u)&&y==="writable"){let v=Zi(i);Gi(u,v)}return Vn(i),null},y=>(u._state==="writable"&&Gn(i),Cc(u,y),null))}d(Zc,"WritableStreamDefaultControllerProcessWrite");function Zi(i){return Yo(i)<=0}d(Zi,"WritableStreamDefaultControllerGetBackpressure");function Xo(i,s){let u=i._controlledWritableStream;Gn(i),Ui(u,s)}d(Xo,"WritableStreamDefaultControllerError");function Zn(i){return new TypeError(`WritableStream.prototype.${i} can only be used on a WritableStream`)}d(Zn,"streamBrandCheckException$2");function Qi(i){return new TypeError(`WritableStreamDefaultController.prototype.${i} can only be used on a WritableStreamDefaultController`)}d(Qi,"defaultControllerBrandCheckException$2");function Vt(i){return new TypeError(`WritableStreamDefaultWriter.prototype.${i} can only be used on a WritableStreamDefaultWriter`)}d(Vt,"defaultWriterBrandCheckException");function tn(i){return new TypeError("Cannot "+i+" a stream using a released writer")}d(tn,"defaultWriterLockException");function Qn(i){i._closedPromise=m((s,u)=>{i._closedPromise_resolve=s,i._closedPromise_reject=u,i._closedPromiseState="pending"})}d(Qn,"defaultWriterClosedPromiseInitialize");function Jo(i,s){Qn(i),Yi(i,s)}d(Jo,"defaultWriterClosedPromiseInitializeAsRejected");function Qc(i){Qn(i),Ko(i)}d(Qc,"defaultWriterClosedPromiseInitializeAsResolved");function Yi(i,s){i._closedPromise_reject!==void 0&&(te(i._closedPromise),i._closedPromise_reject(s),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0,i._closedPromiseState="rejected")}d(Yi,"defaultWriterClosedPromiseReject");function Yc(i,s){Jo(i,s)}d(Yc,"defaultWriterClosedPromiseResetToRejected");function Ko(i){i._closedPromise_resolve!==void 0&&(i._closedPromise_resolve(void 0),i._closedPromise_resolve=void 0,i._closedPromise_reject=void 0,i._closedPromiseState="resolved")}d(Ko,"defaultWriterClosedPromiseResolve");function Yn(i){i._readyPromise=m((s,u)=>{i._readyPromise_resolve=s,i._readyPromise_reject=u}),i._readyPromiseState="pending"}d(Yn,"defaultWriterReadyPromiseInitialize");function Xi(i,s){Yn(i),ts(i,s)}d(Xi,"defaultWriterReadyPromiseInitializeAsRejected");function es(i){Yn(i),Ji(i)}d(es,"defaultWriterReadyPromiseInitializeAsResolved");function ts(i,s){i._readyPromise_reject!==void 0&&(te(i._readyPromise),i._readyPromise_reject(s),i._readyPromise_resolve=void 0,i._readyPromise_reject=void 0,i._readyPromiseState="rejected")}d(ts,"defaultWriterReadyPromiseReject");function Xc(i){Yn(i)}d(Xc,"defaultWriterReadyPromiseReset");function Jc(i,s){Xi(i,s)}d(Jc,"defaultWriterReadyPromiseResetToRejected");function Ji(i){i._readyPromise_resolve!==void 0&&(i._readyPromise_resolve(void 0),i._readyPromise_resolve=void 0,i._readyPromise_reject=void 0,i._readyPromiseState="fulfilled")}d(Ji,"defaultWriterReadyPromiseResolve");function Kc(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof Oa<"u")return Oa}d(Kc,"getGlobals");let yp=Kc();function eu(i){if(!(typeof i=="function"||typeof i=="object")||i.name!=="DOMException")return!1;try{return new i,!0}catch{return!1}}d(eu,"isDOMExceptionConstructor");function tu(){let i=yp?.DOMException;return eu(i)?i:void 0}d(tu,"getFromGlobal");function ru(){let i=d(function(s,u){this.message=s||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)},"DOMException");return l(i,"DOMException"),i.prototype=Object.create(Error.prototype),Object.defineProperty(i.prototype,"constructor",{value:i,writable:!0,configurable:!0}),i}d(ru,"createPolyfill");let wp=tu()||ru();function rs(i,s,u,g,y,v){let S=fr(i),C=Wo(s);i._disturbed=!0;let q=!1,M=b(void 0);return m((X,J)=>{let se;if(v!==void 0){if(se=d(()=>{let N=v.reason!==void 0?v.reason:new wp("Aborted","AbortError"),re=[];g||re.push(()=>s._state==="writable"?Un(s,N):b(void 0)),y||re.push(()=>i._state==="readable"?Ve(i,N):b(void 0)),Re(()=>Promise.all(re.map(ae=>ae())),!0,N)},"abortAlgorithm"),v.aborted){se();return}v.addEventListener("abort",se)}function Oe(){return m((N,re)=>{function ae(Te){Te?N():A(At(),ae,re)}d(ae,"next"),ae(!1)})}d(Oe,"pipeLoop");function At(){return q?b(!0):A(C._readyPromise,()=>m((N,re)=>{Zr(S,{_chunkSteps:ae=>{M=A(Zo(C,ae),void 0,n),N(!1)},_closeSteps:()=>N(!0),_errorSteps:re})}))}if(d(At,"pipeStep"),Ze(i,S._closedPromise,N=>(g?je(!0,N):Re(()=>Un(s,N),!0,N),null)),Ze(s,C._closedPromise,N=>(y?je(!0,N):Re(()=>Ve(i,N),!0,N),null)),ge(i,S._closedPromise,()=>(u?je():Re(()=>Dc(C)),null)),rt(s)||s._state==="closed"){let N=new TypeError("the destination writable stream closed before all data could be piped to it");y?je(!0,N):Re(()=>Ve(i,N),!0,N)}te(Oe());function nt(){let N=M;return A(M,()=>N!==M?nt():void 0)}d(nt,"waitForWritesToFinish");function Ze(N,re,ae){N._state==="errored"?ae(N._storedError):F(re,ae)}d(Ze,"isOrBecomesErrored");function ge(N,re,ae){N._state==="closed"?ae():L(re,ae)}d(ge,"isOrBecomesClosed");function Re(N,re,ae){if(q)return;q=!0,s._state==="writable"&&!rt(s)?L(nt(),Te):Te();function Te(){return R(N(),()=>kt(re,ae),Xt=>kt(!0,Xt)),null}d(Te,"doTheRest")}d(Re,"shutdownWithAction");function je(N,re){q||(q=!0,s._state==="writable"&&!rt(s)?L(nt(),()=>kt(N,re)):kt(N,re))}d(je,"shutdown");function kt(N,re){return Vo(C),Ie(S),v!==void 0&&v.removeEventListener("abort",se),N?J(re):X(void 0),null}d(kt,"finalize")})}d(rs,"ReadableStreamPipeTo");let nu=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Xn(this))throw Kn("desiredSize");return Ki(this)}close(){if(!Xn(this))throw Kn("close");if(!yr(this))throw new TypeError("The stream is not in a state that permits close");Zt(this)}enqueue(s=void 0){if(!Xn(this))throw Kn("enqueue");if(!yr(this))throw new TypeError("The stream is not in a state that permits enqueue");return br(this,s)}error(s=void 0){if(!Xn(this))throw Kn("error");Ge(this,s)}[_e](s){Et(this);let u=this._cancelAlgorithm(s);return Jn(this),u}[de](s){let u=this._controlledReadableStream;if(this._queue.length>0){let g=Bi(this);this._closeRequested&&this._queue.length===0?(Jn(this),an(u)):rn(this),s._chunkSteps(g)}else uo(u,s),rn(this)}[wt](){}};d(nu,"ReadableStreamDefaultController");let Tt=nu;Object.defineProperties(Tt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),l(Tt.prototype.close,"close"),l(Tt.prototype.enqueue,"enqueue"),l(Tt.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Xn(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledReadableStream")?!1:i instanceof Tt}d(Xn,"IsReadableStreamDefaultController");function rn(i){if(!ns(i))return;if(i._pulling){i._pullAgain=!0;return}i._pulling=!0;let s=i._pullAlgorithm();R(s,()=>(i._pulling=!1,i._pullAgain&&(i._pullAgain=!1,rn(i)),null),u=>(Ge(i,u),null))}d(rn,"ReadableStreamDefaultControllerCallPullIfNeeded");function ns(i){let s=i._controlledReadableStream;return!yr(i)||!i._started?!1:!!(Pt(s)&&jn(s)>0||Ki(i)>0)}d(ns,"ReadableStreamDefaultControllerShouldCallPull");function Jn(i){i._pullAlgorithm=void 0,i._cancelAlgorithm=void 0,i._strategySizeAlgorithm=void 0}d(Jn,"ReadableStreamDefaultControllerClearAlgorithms");function Zt(i){if(!yr(i))return;let s=i._controlledReadableStream;i._closeRequested=!0,i._queue.length===0&&(Jn(i),an(s))}d(Zt,"ReadableStreamDefaultControllerClose");function br(i,s){if(!yr(i))return;let u=i._controlledReadableStream;if(Pt(u)&&jn(u)>0)ji(u,s,!1);else{let g;try{g=i._strategySizeAlgorithm(s)}catch(y){throw Ge(i,y),y}try{Li(i,s,g)}catch(y){throw Ge(i,y),y}}rn(i)}d(br,"ReadableStreamDefaultControllerEnqueue");function Ge(i,s){let u=i._controlledReadableStream;u._state==="readable"&&(Et(i),Jn(i),ss(u,s))}d(Ge,"ReadableStreamDefaultControllerError");function Ki(i){let s=i._controlledReadableStream._state;return s==="errored"?null:s==="closed"?0:i._strategyHWM-i._queueTotalSize}d(Ki,"ReadableStreamDefaultControllerGetDesiredSize");function iu(i){return!ns(i)}d(iu,"ReadableStreamDefaultControllerHasBackpressure");function yr(i){let s=i._controlledReadableStream._state;return!i._closeRequested&&s==="readable"}d(yr,"ReadableStreamDefaultControllerCanCloseOrEnqueue");function is(i,s,u,g,y,v,S){s._controlledReadableStream=i,s._queue=void 0,s._queueTotalSize=void 0,Et(s),s._started=!1,s._closeRequested=!1,s._pullAgain=!1,s._pulling=!1,s._strategySizeAlgorithm=S,s._strategyHWM=v,s._pullAlgorithm=g,s._cancelAlgorithm=y,i._readableStreamController=s;let C=u();R(b(C),()=>(s._started=!0,rn(s),null),q=>(Ge(s,q),null))}d(is,"SetUpReadableStreamDefaultController");function au(i,s,u,g){let y=Object.create(Tt.prototype),v,S,C;s.start!==void 0?v=d(()=>s.start(y),"startAlgorithm"):v=d(()=>{},"startAlgorithm"),s.pull!==void 0?S=d(()=>s.pull(y),"pullAlgorithm"):S=d(()=>b(void 0),"pullAlgorithm"),s.cancel!==void 0?C=d(q=>s.cancel(q),"cancelAlgorithm"):C=d(()=>b(void 0),"cancelAlgorithm"),is(i,y,v,S,C,u,g)}d(au,"SetUpReadableStreamDefaultControllerFromUnderlyingSource");function Kn(i){return new TypeError(`ReadableStreamDefaultController.prototype.${i} can only be used on a ReadableStreamDefaultController`)}d(Kn,"defaultControllerBrandCheckException$1");function ou(i,s){return Mt(i._readableStreamController)?lu(i):su(i)}d(ou,"ReadableStreamTee");function su(i,s){let u=fr(i),g=!1,y=!1,v=!1,S=!1,C,q,M,X,J,se=m(ge=>{J=ge});function Oe(){return g?(y=!0,b(void 0)):(g=!0,Zr(u,{_chunkSteps:ge=>{K(()=>{y=!1;let Re=ge,je=ge;v||br(M._readableStreamController,Re),S||br(X._readableStreamController,je),g=!1,y&&Oe()})},_closeSteps:()=>{g=!1,v||Zt(M._readableStreamController),S||Zt(X._readableStreamController),(!v||!S)&&J(void 0)},_errorSteps:()=>{g=!1}}),b(void 0))}d(Oe,"pullAlgorithm");function At(ge){if(v=!0,C=ge,S){let Re=Qr([C,q]),je=Ve(i,Re);J(je)}return se}d(At,"cancel1Algorithm");function nt(ge){if(S=!0,q=ge,v){let Re=Qr([C,q]),je=Ve(i,Re);J(je)}return se}d(nt,"cancel2Algorithm");function Ze(){}return d(Ze,"startAlgorithm"),M=nn(Ze,Oe,At),X=nn(Ze,Oe,nt),F(u._closedPromise,ge=>(Ge(M._readableStreamController,ge),Ge(X._readableStreamController,ge),(!v||!S)&&J(void 0),null)),[M,X]}d(su,"ReadableStreamDefaultTee");function lu(i){let s=fr(i),u=!1,g=!1,y=!1,v=!1,S=!1,C,q,M,X,J,se=m(N=>{J=N});function Oe(N){F(N._closedPromise,re=>(N!==s||(Fe(M._readableStreamController,re),Fe(X._readableStreamController,re),(!v||!S)&&J(void 0)),null))}d(Oe,"forwardReaderError");function At(){Ut(s)&&(Ie(s),s=fr(i),Oe(s)),Zr(s,{_chunkSteps:N=>{K(()=>{g=!1,y=!1;let re=N,ae=N;if(!v&&!S)try{ae=So(N)}catch(Te){Fe(M._readableStreamController,Te),Fe(X._readableStreamController,Te),J(Ve(i,Te));return}v||Dn(M._readableStreamController,re),S||Dn(X._readableStreamController,ae),u=!1,g?Ze():y&&ge()})},_closeSteps:()=>{u=!1,v||Yr(M._readableStreamController),S||Yr(X._readableStreamController),M._readableStreamController._pendingPullIntos.length>0&&Fn(M._readableStreamController,0),X._readableStreamController._pendingPullIntos.length>0&&Fn(X._readableStreamController,0),(!v||!S)&&J(void 0)},_errorSteps:()=>{u=!1}})}d(At,"pullWithDefaultReader");function nt(N,re){vt(s)&&(Ie(s),s=$o(i),Oe(s));let ae=re?X:M,Te=re?M:X;Fo(s,N,1,{_chunkSteps:Xt=>{K(()=>{g=!1,y=!1;let on=re?S:v;if(re?v:S)on||Nn(ae._readableStreamController,Xt);else{let sn;try{sn=So(Xt)}catch(ys){Fe(ae._readableStreamController,ys),Fe(Te._readableStreamController,ys),J(Ve(i,ys));return}on||Nn(ae._readableStreamController,Xt),Dn(Te._readableStreamController,sn)}u=!1,g?Ze():y&&ge()})},_closeSteps:Xt=>{u=!1;let on=re?S:v,sn=re?v:S;on||Yr(ae._readableStreamController),sn||Yr(Te._readableStreamController),Xt!==void 0&&(on||Nn(ae._readableStreamController,Xt),!sn&&Te._readableStreamController._pendingPullIntos.length>0&&Fn(Te._readableStreamController,0)),(!on||!sn)&&J(void 0)},_errorSteps:()=>{u=!1}})}d(nt,"pullWithBYOBReader");function Ze(){if(u)return g=!0,b(void 0);u=!0;let N=Ni(M._readableStreamController);return N===null?At():nt(N._view,!1),b(void 0)}d(Ze,"pull1Algorithm");function ge(){if(u)return y=!0,b(void 0);u=!0;let N=Ni(X._readableStreamController);return N===null?At():nt(N._view,!0),b(void 0)}d(ge,"pull2Algorithm");function Re(N){if(v=!0,C=N,S){let re=Qr([C,q]),ae=Ve(i,re);J(ae)}return se}d(Re,"cancel1Algorithm");function je(N){if(S=!0,q=N,v){let re=Qr([C,q]),ae=Ve(i,re);J(ae)}return se}d(je,"cancel2Algorithm");function kt(){}return d(kt,"startAlgorithm"),M=os(kt,Ze,Re),X=os(kt,ge,je),Oe(s),[M,X]}d(lu,"ReadableByteStreamTee");function cu(i){return a(i)&&typeof i.getReader<"u"}d(cu,"isReadableStreamLike");function uu(i){return cu(i)?fu(i.getReader()):du(i)}d(uu,"ReadableStreamFrom");function du(i){let s,u=Eo(i,"async"),g=n;function y(){let S;try{S=Yl(u)}catch(q){return _(q)}let C=b(S);return x(C,q=>{if(!a(q))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Xl(q))Zt(s._readableStreamController);else{let M=Jl(q);br(s._readableStreamController,M)}})}d(y,"pullAlgorithm");function v(S){let C=u.iterator,q;try{q=Ln(C,"return")}catch(J){return _(J)}if(q===void 0)return b(void 0);let M;try{M=j(q,C,[S])}catch(J){return _(J)}let X=b(M);return x(X,J=>{if(!a(J))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return d(v,"cancelAlgorithm"),s=nn(g,y,v,0),s}d(du,"ReadableStreamFromIterable");function fu(i){let s,u=n;function g(){let v;try{v=i.read()}catch(S){return _(S)}return x(v,S=>{if(!a(S))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(S.done)Zt(s._readableStreamController);else{let C=S.value;br(s._readableStreamController,C)}})}d(g,"pullAlgorithm");function y(v){try{return b(i.cancel(v))}catch(S){return _(S)}}return d(y,"cancelAlgorithm"),s=nn(u,g,y,0),s}d(fu,"ReadableStreamFromDefaultReader");function hu(i,s){tt(i,s);let u=i,g=u?.autoAllocateChunkSize,y=u?.cancel,v=u?.pull,S=u?.start,C=u?.type;return{autoAllocateChunkSize:g===void 0?void 0:Ii(g,`${s} has member 'autoAllocateChunkSize' that`),cancel:y===void 0?void 0:mu(y,u,`${s} has member 'cancel' that`),pull:v===void 0?void 0:pu(v,u,`${s} has member 'pull' that`),start:S===void 0?void 0:gu(S,u,`${s} has member 'start' that`),type:C===void 0?void 0:bu(C,`${s} has member 'type' that`)}}d(hu,"convertUnderlyingDefaultOrByteSource");function mu(i,s,u){return De(i,u),g=>z(i,s,[g])}d(mu,"convertUnderlyingSourceCancelCallback");function pu(i,s,u){return De(i,u),g=>z(i,s,[g])}d(pu,"convertUnderlyingSourcePullCallback");function gu(i,s,u){return De(i,u),g=>j(i,s,[g])}d(gu,"convertUnderlyingSourceStartCallback");function bu(i,s){if(i=`${i}`,i!=="bytes")throw new TypeError(`${s} '${i}' is not a valid enumeration value for ReadableStreamType`);return i}d(bu,"convertReadableStreamType");function yu(i,s){return tt(i,s),{preventCancel:!!i?.preventCancel}}d(yu,"convertIteratorOptions");function as(i,s){tt(i,s);let u=i?.preventAbort,g=i?.preventCancel,y=i?.preventClose,v=i?.signal;return v!==void 0&&wu(v,`${s} has member 'signal' that`),{preventAbort:!!u,preventCancel:!!g,preventClose:!!y,signal:v}}d(as,"convertPipeOptions");function wu(i,s){if(!Rc(i))throw new TypeError(`${s} is not an AbortSignal.`)}d(wu,"assertAbortSignal");function vu(i,s){tt(i,s);let u=i?.readable;ki(u,"readable","ReadableWritablePair"),Oi(u,`${s} has member 'readable' that`);let g=i?.writable;return ki(g,"writable","ReadableWritablePair"),Mo(g,`${s} has member 'writable' that`),{readable:u,writable:g}}d(vu,"convertReadableWritablePair");let _u=class{constructor(s={},u={}){s===void 0?s=null:lo(s,"First parameter");let g=zn(u,"Second parameter"),y=hu(s,"First parameter");if(ea(this),y.type==="bytes"){if(g.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let v=Jr(g,0);uc(this,y,v)}else{let v=Wn(g),S=Jr(g,1);au(this,y,S,v)}}get locked(){if(!xt(this))throw Qt("locked");return Pt(this)}cancel(s=void 0){return xt(this)?Pt(this)?_(new TypeError("Cannot cancel a stream that already has a reader")):Ve(this,s):_(Qt("cancel"))}getReader(s=void 0){if(!xt(this))throw Qt("getReader");return fc(s,"First parameter").mode===void 0?fr(this):$o(this)}pipeThrough(s,u={}){if(!xt(this))throw Qt("pipeThrough");ct(s,1,"pipeThrough");let g=vu(s,"First parameter"),y=as(u,"Second parameter");if(Pt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(gr(g.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let v=rs(this,g.writable,y.preventClose,y.preventAbort,y.preventCancel,y.signal);return te(v),g.readable}pipeTo(s,u={}){if(!xt(this))return _(Qt("pipeTo"));if(s===void 0)return _("Parameter 1 is required in 'pipeTo'.");if(!pr(s))return _(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let g;try{g=as(u,"Second parameter")}catch(y){return _(y)}return Pt(this)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):gr(s)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):rs(this,s,g.preventClose,g.preventAbort,g.preventCancel,g.signal)}tee(){if(!xt(this))throw Qt("tee");let s=ou(this);return Qr(s)}values(s=void 0){if(!xt(this))throw Qt("values");let u=yu(s,"First parameter");return Vl(this,u.preventCancel)}[_o](s){return this.values(s)}static from(s){return uu(s)}};d(_u,"ReadableStream");let Ee=_u;Object.defineProperties(Ee,{from:{enumerable:!0}}),Object.defineProperties(Ee.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),l(Ee.from,"from"),l(Ee.prototype.cancel,"cancel"),l(Ee.prototype.getReader,"getReader"),l(Ee.prototype.pipeThrough,"pipeThrough"),l(Ee.prototype.pipeTo,"pipeTo"),l(Ee.prototype.tee,"tee"),l(Ee.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ee.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Ee.prototype,_o,{value:Ee.prototype.values,writable:!0,configurable:!0});function nn(i,s,u,g=1,y=()=>1){let v=Object.create(Ee.prototype);ea(v);let S=Object.create(Tt.prototype);return is(v,S,i,s,u,g,y),v}d(nn,"CreateReadableStream");function os(i,s,u){let g=Object.create(Ee.prototype);ea(g);let y=Object.create(St.prototype);return Lo(g,y,i,s,u,0,void 0),g}d(os,"CreateReadableByteStream");function ea(i){i._state="readable",i._reader=void 0,i._storedError=void 0,i._disturbed=!1}d(ea,"InitializeReadableStream");function xt(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_readableStreamController")?!1:i instanceof Ee}d(xt,"IsReadableStream");function Pt(i){return i._reader!==void 0}d(Pt,"IsReadableStreamLocked");function Ve(i,s){if(i._disturbed=!0,i._state==="closed")return b(void 0);if(i._state==="errored")return _(i._storedError);an(i);let u=i._reader;if(u!==void 0&&Ut(u)){let y=u._readIntoRequests;u._readIntoRequests=new ee,y.forEach(v=>{v._closeSteps(void 0)})}let g=i._readableStreamController[_e](s);return x(g,n)}d(Ve,"ReadableStreamCancel");function an(i){i._state="closed";let s=i._reader;if(s!==void 0&&(so(s),vt(s))){let u=s._readRequests;s._readRequests=new ee,u.forEach(g=>{g._closeSteps()})}}d(an,"ReadableStreamClose");function ss(i,s){i._state="errored",i._storedError=s;let u=i._reader;u!==void 0&&(Ai(u,s),vt(u)?ho(u,s):No(u,s))}d(ss,"ReadableStreamError");function Qt(i){return new TypeError(`ReadableStream.prototype.${i} can only be used on a ReadableStream`)}d(Qt,"streamBrandCheckException$1");function ls(i,s){tt(i,s);let u=i?.highWaterMark;return ki(u,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Ci(u)}}d(ls,"convertQueuingStrategyInit");let Eu=d(i=>i.byteLength,"byteLengthSizeFunction");l(Eu,"size");let Su=class{constructor(s){ct(s,1,"ByteLengthQueuingStrategy"),s=ls(s,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=s.highWaterMark}get highWaterMark(){if(!us(this))throw cs("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!us(this))throw cs("size");return Eu}};d(Su,"ByteLengthQueuingStrategy");let ta=Su;Object.defineProperties(ta.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ta.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function cs(i){return new TypeError(`ByteLengthQueuingStrategy.prototype.${i} can only be used on a ByteLengthQueuingStrategy`)}d(cs,"byteLengthBrandCheckException");function us(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_byteLengthQueuingStrategyHighWaterMark")?!1:i instanceof ta}d(us,"IsByteLengthQueuingStrategy");let Ru=d(()=>1,"countSizeFunction");l(Ru,"size");let Tu=class{constructor(s){ct(s,1,"CountQueuingStrategy"),s=ls(s,"First parameter"),this._countQueuingStrategyHighWaterMark=s.highWaterMark}get highWaterMark(){if(!fs(this))throw ds("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!fs(this))throw ds("size");return Ru}};d(Tu,"CountQueuingStrategy");let ra=Tu;Object.defineProperties(ra.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ra.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ds(i){return new TypeError(`CountQueuingStrategy.prototype.${i} can only be used on a CountQueuingStrategy`)}d(ds,"countBrandCheckException");function fs(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_countQueuingStrategyHighWaterMark")?!1:i instanceof ra}d(fs,"IsCountQueuingStrategy");function xu(i,s){tt(i,s);let u=i?.cancel,g=i?.flush,y=i?.readableType,v=i?.start,S=i?.transform,C=i?.writableType;return{cancel:u===void 0?void 0:Cu(u,i,`${s} has member 'cancel' that`),flush:g===void 0?void 0:Pu(g,i,`${s} has member 'flush' that`),readableType:y,start:v===void 0?void 0:Au(v,i,`${s} has member 'start' that`),transform:S===void 0?void 0:ku(S,i,`${s} has member 'transform' that`),writableType:C}}d(xu,"convertTransformer");function Pu(i,s,u){return De(i,u),g=>z(i,s,[g])}d(Pu,"convertTransformerFlushCallback");function Au(i,s,u){return De(i,u),g=>j(i,s,[g])}d(Au,"convertTransformerStartCallback");function ku(i,s,u){return De(i,u),(g,y)=>z(i,s,[g,y])}d(ku,"convertTransformerTransformCallback");function Cu(i,s,u){return De(i,u),g=>z(i,s,[g])}d(Cu,"convertTransformerCancelCallback");let Iu=class{constructor(s={},u={},g={}){s===void 0&&(s=null);let y=zn(u,"Second parameter"),v=zn(g,"Third parameter"),S=xu(s,"First parameter");if(S.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(S.writableType!==void 0)throw new RangeError("Invalid writableType specified");let C=Jr(v,0),q=Wn(v),M=Jr(y,1),X=Wn(y),J,se=m(Oe=>{J=Oe});Ou(this,se,M,X,C,q),Lu(this,S),S.start!==void 0?J(S.start(this._transformStreamController)):J(void 0)}get readable(){if(!hs(this))throw bs("readable");return this._readable}get writable(){if(!hs(this))throw bs("writable");return this._writable}};d(Iu,"TransformStream");let na=Iu;Object.defineProperties(na.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(na.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function Ou(i,s,u,g,y,v){function S(){return s}d(S,"startAlgorithm");function C(se){return Du(i,se)}d(C,"writeAlgorithm");function q(se){return Fu(i,se)}d(q,"abortAlgorithm");function M(){return Nu(i)}d(M,"closeAlgorithm"),i._writable=Pc(S,C,M,q,u,g);function X(){return Mu(i)}d(X,"pullAlgorithm");function J(se){return Wu(i,se)}d(J,"cancelAlgorithm"),i._readable=nn(S,X,J,y,v),i._backpressure=void 0,i._backpressureChangePromise=void 0,i._backpressureChangePromise_resolve=void 0,ei(i,!0),i._transformStreamController=void 0}d(Ou,"InitializeTransformStream");function hs(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_transformStreamController")?!1:i instanceof na}d(hs,"IsTransformStream");function ms(i,s){Ge(i._readable._readableStreamController,s),ia(i,s)}d(ms,"TransformStreamError");function ia(i,s){ri(i._transformStreamController),en(i._writable._writableStreamController,s),aa(i)}d(ia,"TransformStreamErrorWritableAndUnblockWrite");function aa(i){i._backpressure&&ei(i,!1)}d(aa,"TransformStreamUnblockWrite");function ei(i,s){i._backpressureChangePromise!==void 0&&i._backpressureChangePromise_resolve(),i._backpressureChangePromise=m(u=>{i._backpressureChangePromise_resolve=u}),i._backpressure=s}d(ei,"TransformStreamSetBackpressure");let ju=class{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ti(this))throw ni("desiredSize");let s=this._controlledTransformStream._readable._readableStreamController;return Ki(s)}enqueue(s=void 0){if(!ti(this))throw ni("enqueue");ps(this,s)}error(s=void 0){if(!ti(this))throw ni("error");$u(this,s)}terminate(){if(!ti(this))throw ni("terminate");qu(this)}};d(ju,"TransformStreamDefaultController");let Yt=ju;Object.defineProperties(Yt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),l(Yt.prototype.enqueue,"enqueue"),l(Yt.prototype.error,"error"),l(Yt.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Yt.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function ti(i){return!a(i)||!Object.prototype.hasOwnProperty.call(i,"_controlledTransformStream")?!1:i instanceof Yt}d(ti,"IsTransformStreamDefaultController");function Bu(i,s,u,g,y){s._controlledTransformStream=i,i._transformStreamController=s,s._transformAlgorithm=u,s._flushAlgorithm=g,s._cancelAlgorithm=y,s._finishPromise=void 0,s._finishPromise_resolve=void 0,s._finishPromise_reject=void 0}d(Bu,"SetUpTransformStreamDefaultController");function Lu(i,s){let u=Object.create(Yt.prototype),g,y,v;s.transform!==void 0?g=d(S=>s.transform(S,u),"transformAlgorithm"):g=d(S=>{try{return ps(u,S),b(void 0)}catch(C){return _(C)}},"transformAlgorithm"),s.flush!==void 0?y=d(()=>s.flush(u),"flushAlgorithm"):y=d(()=>b(void 0),"flushAlgorithm"),s.cancel!==void 0?v=d(S=>s.cancel(S),"cancelAlgorithm"):v=d(()=>b(void 0),"cancelAlgorithm"),Bu(i,u,g,y,v)}d(Lu,"SetUpTransformStreamDefaultControllerFromTransformer");function ri(i){i._transformAlgorithm=void 0,i._flushAlgorithm=void 0,i._cancelAlgorithm=void 0}d(ri,"TransformStreamDefaultControllerClearAlgorithms");function ps(i,s){let u=i._controlledTransformStream,g=u._readable._readableStreamController;if(!yr(g))throw new TypeError("Readable side is not in a state that permits enqueue");try{br(g,s)}catch(y){throw ia(u,y),u._readable._storedError}iu(g)!==u._backpressure&&ei(u,!0)}d(ps,"TransformStreamDefaultControllerEnqueue");function $u(i,s){ms(i._controlledTransformStream,s)}d($u,"TransformStreamDefaultControllerError");function gs(i,s){let u=i._transformAlgorithm(s);return x(u,void 0,g=>{throw ms(i._controlledTransformStream,g),g})}d(gs,"TransformStreamDefaultControllerPerformTransform");function qu(i){let s=i._controlledTransformStream,u=s._readable._readableStreamController;Zt(u);let g=new TypeError("TransformStream terminated");ia(s,g)}d(qu,"TransformStreamDefaultControllerTerminate");function Du(i,s){let u=i._transformStreamController;if(i._backpressure){let g=i._backpressureChangePromise;return x(g,()=>{let y=i._writable;if(y._state==="erroring")throw y._storedError;return gs(u,s)})}return gs(u,s)}d(Du,"TransformStreamDefaultSinkWriteAlgorithm");function Fu(i,s){let u=i._transformStreamController;if(u._finishPromise!==void 0)return u._finishPromise;let g=i._readable;u._finishPromise=m((v,S)=>{u._finishPromise_resolve=v,u._finishPromise_reject=S});let y=u._cancelAlgorithm(s);return ri(u),R(y,()=>(g._state==="errored"?wr(u,g._storedError):(Ge(g._readableStreamController,s),oa(u)),null),v=>(Ge(g._readableStreamController,v),wr(u,v),null)),u._finishPromise}d(Fu,"TransformStreamDefaultSinkAbortAlgorithm");function Nu(i){let s=i._transformStreamController;if(s._finishPromise!==void 0)return s._finishPromise;let u=i._readable;s._finishPromise=m((y,v)=>{s._finishPromise_resolve=y,s._finishPromise_reject=v});let g=s._flushAlgorithm();return ri(s),R(g,()=>(u._state==="errored"?wr(s,u._storedError):(Zt(u._readableStreamController),oa(s)),null),y=>(Ge(u._readableStreamController,y),wr(s,y),null)),s._finishPromise}d(Nu,"TransformStreamDefaultSinkCloseAlgorithm");function Mu(i){return ei(i,!1),i._backpressureChangePromise}d(Mu,"TransformStreamDefaultSourcePullAlgorithm");function Wu(i,s){let u=i._transformStreamController;if(u._finishPromise!==void 0)return u._finishPromise;let g=i._writable;u._finishPromise=m((v,S)=>{u._finishPromise_resolve=v,u._finishPromise_reject=S});let y=u._cancelAlgorithm(s);return ri(u),R(y,()=>(g._state==="errored"?wr(u,g._storedError):(en(g._writableStreamController,s),aa(i),oa(u)),null),v=>(en(g._writableStreamController,v),aa(i),wr(u,v),null)),u._finishPromise}d(Wu,"TransformStreamDefaultSourceCancelAlgorithm");function ni(i){return new TypeError(`TransformStreamDefaultController.prototype.${i} can only be used on a TransformStreamDefaultController`)}d(ni,"defaultControllerBrandCheckException");function oa(i){i._finishPromise_resolve!==void 0&&(i._finishPromise_resolve(),i._finishPromise_resolve=void 0,i._finishPromise_reject=void 0)}d(oa,"defaultControllerFinishPromiseResolve");function wr(i,s){i._finishPromise_reject!==void 0&&(te(i._finishPromise),i._finishPromise_reject(s),i._finishPromise_resolve=void 0,i._finishPromise_reject=void 0)}d(wr,"defaultControllerFinishPromiseReject");function bs(i){return new TypeError(`TransformStream.prototype.${i} can only be used on a TransformStream`)}d(bs,"streamBrandCheckException"),r.ByteLengthQueuingStrategy=ta,r.CountQueuingStrategy=ra,r.ReadableByteStreamController=St,r.ReadableStream=Ee,r.ReadableStreamBYOBReader=zt,r.ReadableStreamBYOBRequest=hr,r.ReadableStreamDefaultController=Tt,r.ReadableStreamDefaultReader=Ft,r.TransformStream=na,r.TransformStreamDefaultController=Yt,r.WritableStream=Ht,r.WritableStreamDefaultController=Kr,r.WritableStreamDefaultWriter=Rt})}(nl,nl.exports)),nl.exports}async function*Na(e,t=!0){for(let r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let n=r.byteOffset,a=r.byteOffset+r.byteLength;for(;n!==a;){let o=Math.min(a-n,Mh),l=r.buffer.slice(n,n+o);n+=l.byteLength,yield new Uint8Array(l)}}else yield r;else{let n=0,a=r;for(;n!==a.size;){let o=await a.slice(n,Math.min(a.size,n+Mh)).arrayBuffer();n+=o.byteLength,yield new Uint8Array(o)}}}function em(e,t=Cr){var r=`${Wh()}${Wh()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],a=`--${r}\r
Content-Disposition: form-data; name="`;return e.forEach((o,l)=>typeof o=="string"?n.push(a+il(l)+`"\r
\r
${o.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(a+il(l)+`"; filename="${il(o.name,1)}"\r
Content-Type: ${o.type||"application/octet-stream"}\r
\r
`,o,`\r
`)),n.push(`--${r}--`),new t(n,{type:"multipart/form-data; boundary="+r})}async function Ma(e){if(e[Le].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[Le].disturbed=!0,e[Le].error)throw e[Le].error;let{body:t}=e;if(t===null)return ve.Buffer.alloc(0);if(!(t instanceof he.default))return ve.Buffer.alloc(0);let r=[],n=0;try{for await(let a of t){if(e.size>0&&n+a.length>e.size){let o=new st(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(o),o}n+=a.length,r.push(a)}}catch(a){throw a instanceof Qa?a:new st(`Invalid response body while trying to fetch ${e.url}: ${a.message}`,"system",a)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return r.every(a=>typeof a=="string")?ve.Buffer.from(r.join("")):ve.Buffer.concat(r,n)}catch(a){throw new st(`Could not create Buffer from response body for ${e.url}: ${a.message}`,"system",a)}else throw new st(`Premature close of server response while trying to fetch ${e.url}`)}function lm(e=[]){return new Lt(e.reduce((t,r,n,a)=>(n%2===0&&t.push(a.slice(n,n+2)),t),[]).filter(([t,r])=>{try{return Wa(t),al(t,String(r)),!0}catch{return!1}}))}function ol(e,t=!1){return e==null||(e=new URL(e),/^(about|blob|data):$/.test(e.protocol))?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e)}function dm(e){if(!um.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}function fm(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;let t=e.host.replace(/(^\[)|(]$)/g,""),r=(0,Qh.isIP)(t);return r===4&&/^127\./.test(t)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:e.host==="localhost"||e.host.endsWith(".localhost")?!1:e.protocol==="file:"}function Ar(e){return/^about:(blank|srcdoc)$/.test(e)||e.protocol==="data:"||/^(blob|filesystem):$/.test(e.protocol)?!0:fm(e)}function hm(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if(e.referrer==="no-referrer"||e.referrerPolicy==="")return null;let n=e.referrerPolicy;if(e.referrer==="about:client")return"no-referrer";let a=e.referrer,o=ol(a),l=ol(a,!0);o.toString().length>4096&&(o=l),t&&(o=t(o)),r&&(l=r(l));let c=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return l;case"unsafe-url":return o;case"strict-origin":return Ar(o)&&!Ar(c)?"no-referrer":l.toString();case"strict-origin-when-cross-origin":return o.origin===c.origin?o:Ar(o)&&!Ar(c)?"no-referrer":l;case"same-origin":return o.origin===c.origin?o:"no-referrer";case"origin-when-cross-origin":return o.origin===c.origin?o:l;case"no-referrer-when-downgrade":return Ar(o)&&!Ar(c)?"no-referrer":o;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function mm(e){let t=(e.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of t)n&&um.has(n)&&(r=n);return r}async function gl(e,t){return new Promise((r,n)=>{let a=new wi(e,t),{parsedURL:o,options:l}=Cw(a);if(!qw.has(o.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${o.protocol.replace(/:$/,"")}" is not supported.`);if(o.protocol==="data:"){let R=Xh(a.url),L=new pt(R,{headers:{"Content-Type":R.typeFull}});r(L);return}let c=(o.protocol==="https:"?Vh.default:En.default).request,{signal:f}=a,p=null,m=d(()=>{let R=new ym("The operation was aborted.");n(R),a.body&&a.body instanceof he.default.Readable&&a.body.destroy(R),!(!p||!p.body)&&p.body.emit("error",R)},"abort");if(f&&f.aborted){m();return}let b=d(()=>{m(),A()},"abortAndFinalize"),_=c(o.toString(),l);f&&f.addEventListener("abort",b);let A=d(()=>{_.abort(),f&&f.removeEventListener("abort",b)},"finalize");_.on("error",R=>{n(new st(`request to ${a.url} failed, reason: ${R.message}`,"system",R)),A()}),Rm(_,R=>{p&&p.body&&p.body.destroy(R)}),process.version<"v14"&&_.on("socket",R=>{let L;R.prependListener("end",()=>{L=R._eventsCount}),R.prependListener("close",F=>{if(p&&L<R._eventsCount&&!F){let x=new Error("Premature close");x.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",x)}})}),_.on("response",R=>{_.setTimeout(0);let L=lm(R.rawHeaders);if(ml(R.statusCode)){let j=L.get("Location"),z=null;try{z=j===null?null:new URL(j,a.url)}catch{if(a.redirect!=="manual"){n(new st(`uri requested responds with an invalid redirect URL: ${j}`,"invalid-redirect")),A();return}}switch(a.redirect){case"error":n(new st(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),A();return;case"manual":break;case"follow":{if(z===null)break;if(a.counter>=a.follow){n(new st(`maximum redirect reached at: ${a.url}`,"max-redirect")),A();return}let G={headers:new Lt(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:hl(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!vw(a.url,z)||!_w(a.url,z))for(let ee of["authorization","www-authenticate","cookie","cookie2"])G.headers.delete(ee);if(R.statusCode!==303&&a.body&&t.body instanceof he.default.Readable){n(new st("Cannot follow redirect with body being a readable stream","unsupported-redirect")),A();return}(R.statusCode===303||(R.statusCode===301||R.statusCode===302)&&a.method==="POST")&&(G.method="GET",G.body=void 0,G.headers.delete("content-length"));let V=mm(L);V&&(G.referrerPolicy=V),r(gl(new wi(z,G))),A();return}default:return n(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}f&&R.once("end",()=>{f.removeEventListener("abort",b)});let F=(0,he.pipeline)(R,new he.PassThrough,j=>{j&&n(j)});process.version<"v12.10"&&R.on("aborted",b);let x={url:a.url,status:R.statusCode,statusText:R.statusMessage,headers:L,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},te=L.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||te===null||R.statusCode===204||R.statusCode===304){p=new pt(F,x),r(p);return}let K={flush:Pr.default.Z_SYNC_FLUSH,finishFlush:Pr.default.Z_SYNC_FLUSH};if(te==="gzip"||te==="x-gzip"){F=(0,he.pipeline)(F,Pr.default.createGunzip(K),j=>{j&&n(j)}),p=new pt(F,x),r(p);return}if(te==="deflate"||te==="x-deflate"){let j=(0,he.pipeline)(R,new he.PassThrough,z=>{z&&n(z)});j.once("data",z=>{(z[0]&15)===8?F=(0,he.pipeline)(F,Pr.default.createInflate(),G=>{G&&n(G)}):F=(0,he.pipeline)(F,Pr.default.createInflateRaw(),G=>{G&&n(G)}),p=new pt(F,x),r(p)}),j.once("end",()=>{p||(p=new pt(F,x),r(p))});return}if(te==="br"){F=(0,he.pipeline)(F,Pr.default.createBrotliDecompress(),j=>{j&&n(j)}),p=new pt(F,x),r(p);return}p=new pt(F,x),r(p)}),Tw(_,a).catch(n)})}function Rm(e,t){let r=ve.Buffer.from(`0\r
\r
`),n=!1,a=!1,o;e.on("response",l=>{let{headers:c}=l;n=c["transfer-encoding"]==="chunked"&&!c["content-length"]}),e.on("socket",l=>{let c=d(()=>{if(n&&!a){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",t(p)}},"onSocketClose"),f=d(p=>{a=ve.Buffer.compare(p.slice(-5),r)===0,!a&&o&&(a=ve.Buffer.compare(o.slice(-3),r.slice(0,3))===0&&ve.Buffer.compare(p.slice(-2),r.slice(3))===0),o=p},"onData");l.prependListener("close",c),l.on("data",f),e.on("close",()=>{l.removeListener("close",c),l.removeListener("data",f)})})}function ce(e){let t=Tm.get(e);return console.assert(t!=null,"'this' is expected an Event object, but got",e),t}function ll(e){if(e.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}e.event.cancelable&&(e.canceled=!0,typeof e.event.preventDefault=="function"&&e.event.preventDefault())}function kr(e,t){Tm.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(t);for(let n=0;n<r.length;++n){let a=r[n];a in this||Object.defineProperty(this,a,bl(a))}}function bl(e){return{get(){return ce(this).event[e]},set(t){ce(this).event[e]=t},configurable:!0,enumerable:!0}}function xm(e){return{value(){let t=ce(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function Pm(e,t){let r=Object.keys(t);if(r.length===0)return e;function n(a,o){e.call(this,a,o)}d(n,"CustomEvent"),n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let a=0;a<r.length;++a){let o=r[a];if(!(o in e.prototype)){let l=typeof Object.getOwnPropertyDescriptor(t,o).value=="function";Object.defineProperty(n.prototype,o,l?xm(o):bl(o))}}return n}function yl(e){if(e==null||e===Object.prototype)return kr;let t=sl.get(e);return t==null&&(t=Pm(yl(Object.getPrototypeOf(e)),e),sl.set(e,t)),t}function Am(e,t){let r=yl(Object.getPrototypeOf(t));return new r(e,t)}function km(e){return ce(e).immediateStopped}function Cm(e,t){ce(e).eventPhase=t}function Im(e,t){ce(e).currentTarget=t}function cl(e,t){ce(e).passiveListener=t}function yi(e){return e!==null&&typeof e=="object"}function _n(e){let t=Om.get(e);if(t==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function jm(e){return{get(){let t=_n(this).get(e);for(;t!=null;){if(t.listenerType===za)return t.listener;t=t.next}return null},set(t){typeof t!="function"&&!yi(t)&&(t=null);let r=_n(this),n=null,a=r.get(e);for(;a!=null;)a.listenerType===za?n!==null?n.next=a.next:a.next!==null?r.set(e,a.next):r.delete(e):n=a,a=a.next;if(t!==null){let o={listener:t,listenerType:za,passive:!1,once:!1,next:null};n===null?r.set(e,o):n.next=o}},configurable:!0,enumerable:!0}}function wl(e,t){Object.defineProperty(e,`on${t}`,jm(t))}function ul(e){function t(){gt.call(this)}d(t,"CustomEventTarget"),t.prototype=Object.create(gt.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)wl(t.prototype,e[r]);return t}function gt(){if(this instanceof gt){Om.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return ul(arguments[0]);if(arguments.length>0){let e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return ul(e)}throw new TypeError("Cannot call a class as a function")}function Lm(){let e=Object.create(Ga.prototype);return gt.call(e),Va.set(e,!1),e}function $m(e){Va.get(e)===!1&&(Va.set(e,!0),e.dispatchEvent({type:"abort"}))}function dl(e){let t=qm.get(e);if(t==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${e===null?"null":typeof e}`);return t}function fl(){!globalThis.process?.versions?.node&&!globalThis.process?.env.DISABLE_NODE_FETCH_NATIVE_WARN&&console.warn("[node-fetch-native] Node.js compatible build of `node-fetch-native` is being used in a non-Node.js environment. Please make sure you are using proper export conditions or report this issue to https://github.com/unjs/node-fetch-native. You can set `process.env.DISABLE_NODE_FETCH_NATIVE_WARN` to disable this warning.")}var En,Vh,Pr,he,ve,Ye,Zh,Qh,Ir,Yh,dw,d,Gh,fe,Bt,ot,ar,qa,yn,Ks,hi,Da,Fa,el,it,tl,wn,vn,rl,nl,Nh,fw,Mh,Kh,hw,Cr,mw,pw,bn,gi,gw,bw,Wh,yw,zh,il,xr,Tr,tm,Qa,rm,st,Ua,nm,Ha,ww,vw,_w,Ew,Le,im,bi,hl,Sw,am,Rw,Tw,Wa,al,om,Lt,xw,ml,at,cm,pt,Pw,um,Aw,we,mi,kw,pm,wi,Cw,bm,ym,Iw,Ow,pl,jw,Bw,Lw,$w,wm,vm,_m,Sm,qw,Tm,sl,Om,Uh,Hh,za,Bm,Ga,Va,Za,qm,Dw,Fw,Dm,$a=ws(()=>{En=Ct(require("node:http"),1),Vh=Ct(require("node:https"),1),Pr=Ct(require("node:zlib"),1),he=Ct(require("node:stream"),1),ve=require("node:buffer"),Ye=require("node:util");ja();Zh=require("node:url"),Qh=require("node:net"),Ir=require("node:fs"),Yh=require("node:path"),dw=Object.defineProperty,d=(e,t)=>dw(e,"name",{value:t,configurable:!0}),Gh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},fe=(e,t,r)=>(Gh(e,t,"read from private field"),r?r.call(e):t.get(e)),Bt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ot=(e,t,r,n)=>(Gh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);d(Xh,"dataUriToBuffer");nl={exports:{}};d(Jh,"requirePonyfill_es2018");fw=65536;if(!globalThis.ReadableStream)try{let e=require("node:process"),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch{Object.assign(globalThis,Jh())}try{let{Blob:e}=require("buffer");e&&!e.prototype.stream&&(e.prototype.stream=d(function(t){let r=0,n=this;return new ReadableStream({type:"bytes",async pull(a){let o=await n.slice(r,Math.min(n.size,r+fw)).arrayBuffer();r+=o.byteLength,a.enqueue(new Uint8Array(o)),r===n.size&&a.close()}})},"name"))}catch{}Mh=65536;d(Na,"toIterator");Kh=(hi=class{constructor(e=[],t={}){if(Bt(this,ar,[]),Bt(this,qa,""),Bt(this,yn,0),Bt(this,Ks,"transparent"),typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof t!="object"&&typeof t!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");t===null&&(t={});let r=new TextEncoder;for(let a of e){let o;ArrayBuffer.isView(a)?o=new Uint8Array(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)):a instanceof ArrayBuffer?o=new Uint8Array(a.slice(0)):a instanceof hi?o=a:o=r.encode(`${a}`),ot(this,yn,fe(this,yn)+(ArrayBuffer.isView(o)?o.byteLength:o.size)),fe(this,ar).push(o)}ot(this,Ks,`${t.endings===void 0?"transparent":t.endings}`);let n=t.type===void 0?"":String(t.type);ot(this,qa,/^[\x20-\x7E]*$/.test(n)?n:"")}get size(){return fe(this,yn)}get type(){return fe(this,qa)}async text(){let e=new TextDecoder,t="";for await(let r of Na(fe(this,ar),!1))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let r of Na(fe(this,ar),!1))e.set(r,t),t+=r.length;return e.buffer}stream(){let e=Na(fe(this,ar),!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){let r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(e=0,t=this.size,r=""){let{size:n}=this,a=e<0?Math.max(n+e,0):Math.min(e,n),o=t<0?Math.max(n+t,0):Math.min(t,n),l=Math.max(o-a,0),c=fe(this,ar),f=[],p=0;for(let b of c){if(p>=l)break;let _=ArrayBuffer.isView(b)?b.byteLength:b.size;if(a&&_<=a)a-=_,o-=_;else{let A;ArrayBuffer.isView(b)?(A=b.subarray(a,Math.min(_,o)),p+=A.byteLength):(A=b.slice(a,Math.min(_,o)),p+=A.size),o-=_,f.push(A),a=0}}let m=new hi([],{type:String(r).toLowerCase()});return ot(m,yn,l),ot(m,ar,f),m}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},ar=new WeakMap,qa=new WeakMap,yn=new WeakMap,Ks=new WeakMap,d(hi,"Blob"),hi);Object.defineProperties(Kh.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});hw=Kh,Cr=hw,mw=(el=class extends Cr{constructor(e,t,r={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r),Bt(this,Da,0),Bt(this,Fa,""),r===null&&(r={});let n=r.lastModified===void 0?Date.now():Number(r.lastModified);Number.isNaN(n)||ot(this,Da,n),ot(this,Fa,String(t))}get name(){return fe(this,Fa)}get lastModified(){return fe(this,Da)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Cr&&/^(File)$/.test(e[Symbol.toStringTag])}},Da=new WeakMap,Fa=new WeakMap,d(el,"File"),el),pw=mw,bn=pw;({toStringTag:gi,iterator:gw,hasInstance:bw}=Symbol),Wh=Math.random,yw="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),zh=d((e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[gi])?[(r=r!==void 0?r+"":t[gi]=="File"?t.name:"blob",e),t.name!==r||t[gi]=="blob"?new bn([t],r,t):t]:[e,t+""]),"f"),il=d((e,t)=>(t?e:e.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"e$1"),xr=d((e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)},"x"),Tr=(tl=class{constructor(...e){if(Bt(this,it,[]),e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[gi](){return"FormData"}[gw](){return this.entries()}static[bw](e){return e&&typeof e=="object"&&e[gi]==="FormData"&&!yw.some(t=>typeof e[t]!="function")}append(...e){xr("append",arguments,2),fe(this,it).push(zh(...e))}delete(e){xr("delete",arguments,1),e+="",ot(this,it,fe(this,it).filter(([t])=>t!==e))}get(e){xr("get",arguments,1),e+="";for(var t=fe(this,it),r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){return xr("getAll",arguments,1),t=[],e+="",fe(this,it).forEach(r=>r[0]===e&&t.push(r[1])),t}has(e){return xr("has",arguments,1),e+="",fe(this,it).some(t=>t[0]===e)}forEach(e,t){xr("forEach",arguments,1);for(var[r,n]of this)e.call(t,n,r,this)}set(...e){xr("set",arguments,2);var t=[],r=!0;e=zh(...e),fe(this,it).forEach(n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)}),r&&t.push(e),ot(this,it,t)}*entries(){yield*fe(this,it)}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}},it=new WeakMap,d(tl,"FormData"),tl);d(em,"formDataToBlob");tm=class extends Error{constructor(t,r){super(t),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};d(tm,"FetchBaseError");Qa=tm,rm=class extends Qa{constructor(t,r,n){super(t,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};d(rm,"FetchError");st=rm,Ua=Symbol.toStringTag,nm=d(e=>typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&typeof e.sort=="function"&&e[Ua]==="URLSearchParams","isURLSearchParameters"),Ha=d(e=>e&&typeof e=="object"&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.constructor=="function"&&/^(Blob|File)$/.test(e[Ua]),"isBlob"),ww=d(e=>typeof e=="object"&&(e[Ua]==="AbortSignal"||e[Ua]==="EventTarget"),"isAbortSignal"),vw=d((e,t)=>{let r=new URL(t).hostname,n=new URL(e).hostname;return r===n||r.endsWith(`.${n}`)},"isDomainOrSubdomain"),_w=d((e,t)=>{let r=new URL(t).protocol,n=new URL(e).protocol;return r===n},"isSameProtocol"),Ew=(0,Ye.promisify)(he.default.pipeline),Le=Symbol("Body internals"),im=class{constructor(t,{size:r=0}={}){let n=null;t===null?t=null:nm(t)?t=ve.Buffer.from(t.toString()):Ha(t)||ve.Buffer.isBuffer(t)||(Ye.types.isAnyArrayBuffer(t)?t=ve.Buffer.from(t):ArrayBuffer.isView(t)?t=ve.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof he.default||(t instanceof Tr?(t=em(t),n=t.type.split("=")[1]):t=ve.Buffer.from(String(t))));let a=t;ve.Buffer.isBuffer(t)?a=he.default.Readable.from(t):Ha(t)&&(a=he.default.Readable.from(t.stream())),this[Le]={body:t,stream:a,boundary:n,disturbed:!1,error:null},this.size=r,t instanceof he.default&&t.on("error",o=>{let l=o instanceof Qa?o:new st(`Invalid response body while trying to fetch ${this.url}: ${o.message}`,"system",o);this[Le].error=l})}get body(){return this[Le].stream}get bodyUsed(){return this[Le].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:r,byteLength:n}=await Ma(this);return t.slice(r,r+n)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let n=new Tr,a=new URLSearchParams(await this.text());for(let[o,l]of a)n.append(o,l);return n}let{toFormData:r}=await Promise.resolve().then(()=>(Fh(),Dh));return r(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[Le].body&&this[Le].body.type||"",r=await this.arrayBuffer();return new Cr([r],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await Ma(this);return new TextDecoder().decode(t)}buffer(){return Ma(this)}};d(im,"Body");bi=im;bi.prototype.buffer=(0,Ye.deprecate)(bi.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(bi.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ye.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});d(Ma,"consumeBody");hl=d((e,t)=>{let r,n,{body:a}=e[Le];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof he.default&&typeof a.getBoundary!="function"&&(r=new he.PassThrough({highWaterMark:t}),n=new he.PassThrough({highWaterMark:t}),a.pipe(r),a.pipe(n),e[Le].stream=r,a=n),a},"clone"),Sw=(0,Ye.deprecate)(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),am=d((e,t)=>e===null?null:typeof e=="string"?"text/plain;charset=UTF-8":nm(e)?"application/x-www-form-urlencoded;charset=UTF-8":Ha(e)?e.type||null:ve.Buffer.isBuffer(e)||Ye.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof Tr?`multipart/form-data; boundary=${t[Le].boundary}`:e&&typeof e.getBoundary=="function"?`multipart/form-data;boundary=${Sw(e)}`:e instanceof he.default?null:"text/plain;charset=UTF-8","extractContentType"),Rw=d(e=>{let{body:t}=e[Le];return t===null?0:Ha(t)?t.size:ve.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},"getTotalBytes"),Tw=d(async(e,{body:t})=>{t===null?e.end():await Ew(t,e)},"writeToStream"),Wa=typeof En.default.validateHeaderName=="function"?En.default.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},al=typeof En.default.validateHeaderValue=="function"?En.default.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},om=class sm extends URLSearchParams{constructor(t){let r=[];if(t instanceof sm){let n=t.raw();for(let[a,o]of Object.entries(n))r.push(...o.map(l=>[a,l]))}else if(t!=null)if(typeof t=="object"&&!Ye.types.isBoxedPrimitive(t)){let n=t[Symbol.iterator];if(n==null)r.push(...Object.entries(t));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...t].map(a=>{if(typeof a!="object"||Ye.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,a])=>(Wa(n),al(n,String(a)),[String(n).toLowerCase(),String(a)])):void 0,super(r),new Proxy(this,{get(n,a,o){switch(a){case"append":case"set":return(l,c)=>(Wa(l),al(l,String(c)),URLSearchParams.prototype[a].call(n,String(l).toLowerCase(),String(c)));case"delete":case"has":case"getAll":return l=>(Wa(l),URLSearchParams.prototype[a].call(n,String(l).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,a,o)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let r=this.getAll(t);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(t)&&(n=n.toLowerCase()),n}forEach(t,r=void 0){for(let n of this.keys())Reflect.apply(t,r,[this.get(n),n,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,r)=>(t[r]=this.getAll(r),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,r)=>{let n=this.getAll(r);return r==="host"?t[r]=n[0]:t[r]=n.length>1?n:n[0],t},{})}};d(om,"Headers");Lt=om;Object.defineProperties(Lt.prototype,["get","entries","forEach","values"].reduce((e,t)=>(e[t]={enumerable:!0},e),{}));d(lm,"fromRawHeaders");xw=new Set([301,302,303,307,308]),ml=d(e=>xw.has(e),"isRedirect"),at=Symbol("Response internals"),cm=class pi extends bi{constructor(t=null,r={}){super(t,r);let n=r.status!=null?r.status:200,a=new Lt(r.headers);if(t!==null&&!a.has("Content-Type")){let o=am(t,this);o&&a.append("Content-Type",o)}this[at]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:a,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[at].type}get url(){return this[at].url||""}get status(){return this[at].status}get ok(){return this[at].status>=200&&this[at].status<300}get redirected(){return this[at].counter>0}get statusText(){return this[at].statusText}get headers(){return this[at].headers}get highWaterMark(){return this[at].highWaterMark}clone(){return new pi(hl(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,r=302){if(!ml(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new pi(null,{headers:{location:new URL(t).toString()},status:r})}static error(){let t=new pi(null,{status:0,statusText:""});return t[at].type="error",t}static json(t=void 0,r={}){let n=JSON.stringify(t);if(n===void 0)throw new TypeError("data is not JSON serializable");let a=new Lt(r&&r.headers);return a.has("content-type")||a.set("content-type","application/json"),new pi(n,{...r,headers:a})}get[Symbol.toStringTag](){return"Response"}};d(cm,"Response");pt=cm;Object.defineProperties(pt.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Pw=d(e=>{if(e.search)return e.search;let t=e.href.length-1,r=e.hash||(e.href[t]==="#"?"#":"");return e.href[t-r.length]==="?"?"?":""},"getSearch");d(ol,"stripURLForUseAsAReferrer");um=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Aw="strict-origin-when-cross-origin";d(dm,"validateReferrerPolicy");d(fm,"isOriginPotentiallyTrustworthy");d(Ar,"isUrlPotentiallyTrustworthy");d(hm,"determineRequestsReferrer");d(mm,"parseReferrerPolicyFromHeader");we=Symbol("Request internals"),mi=d(e=>typeof e=="object"&&typeof e[we]=="object","isRequest"),kw=(0,Ye.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),pm=class gm extends bi{constructor(t,r={}){let n;if(mi(t)?n=new URL(t.url):(n=new URL(t),t={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let a=r.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!mi(r)&&"data"in r&&kw(),(r.body!=null||mi(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let o=r.body?r.body:mi(t)&&t.body!==null?hl(t):null;super(o,{size:r.size||t.size||0});let l=new Lt(r.headers||t.headers||{});if(o!==null&&!l.has("Content-Type")){let p=am(o,this);p&&l.set("Content-Type",p)}let c=mi(t)?t.signal:null;if("signal"in r&&(c=r.signal),c!=null&&!ww(c))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let f=r.referrer==null?t.referrer:r.referrer;if(f==="")f="no-referrer";else if(f){let p=new URL(f);f=/^about:(\/\/)?client$/.test(p)?"client":p}else f=void 0;this[we]={method:a,redirect:r.redirect||t.redirect||"follow",headers:l,parsedURL:n,signal:c,referrer:f},this.follow=r.follow===void 0?t.follow===void 0?20:t.follow:r.follow,this.compress=r.compress===void 0?t.compress===void 0?!0:t.compress:r.compress,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent,this.highWaterMark=r.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||t.referrerPolicy||""}get method(){return this[we].method}get url(){return(0,Zh.format)(this[we].parsedURL)}get headers(){return this[we].headers}get redirect(){return this[we].redirect}get signal(){return this[we].signal}get referrer(){if(this[we].referrer==="no-referrer")return"";if(this[we].referrer==="client")return"about:client";if(this[we].referrer)return this[we].referrer.toString()}get referrerPolicy(){return this[we].referrerPolicy}set referrerPolicy(t){this[we].referrerPolicy=dm(t)}clone(){return new gm(this)}get[Symbol.toStringTag](){return"Request"}};d(pm,"Request");wi=pm;Object.defineProperties(wi.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});Cw=d(e=>{let{parsedURL:t}=e[we],r=new Lt(e[we].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(e.body===null&&/^(post|put)$/i.test(e.method)&&(n="0"),e.body!==null){let c=Rw(e);typeof c=="number"&&!Number.isNaN(c)&&(n=String(c))}n&&r.set("Content-Length",n),e.referrerPolicy===""&&(e.referrerPolicy=Aw),e.referrer&&e.referrer!=="no-referrer"?e[we].referrer=hm(e):e[we].referrer="no-referrer",e[we].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=e;typeof a=="function"&&(a=a(t));let o=Pw(t),l={path:t.pathname+o,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:a};return{parsedURL:t,options:l}},"getNodeRequestOptions"),bm=class extends Qa{constructor(t,r="aborted"){super(t,r)}};d(bm,"AbortError");ym=bm;if(!globalThis.DOMException)try{let{MessageChannel:e}=require("worker_threads"),t=new e().port1,r=new ArrayBuffer;t.postMessage(r,[r,r])}catch(e){e.constructor.name==="DOMException"&&(globalThis.DOMException=e.constructor)}Iw=globalThis.DOMException,Ow=Js(Iw),{stat:pl}=Ir.promises,jw=d((e,t)=>wm((0,Ir.statSync)(e),e,t),"blobFromSync"),Bw=d((e,t)=>pl(e).then(r=>wm(r,e,t)),"blobFrom"),Lw=d((e,t)=>pl(e).then(r=>vm(r,e,t)),"fileFrom"),$w=d((e,t)=>vm((0,Ir.statSync)(e),e,t),"fileFromSync"),wm=d((e,t,r="")=>new Cr([new Sm({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),"fromBlob"),vm=d((e,t,r="")=>new bn([new Sm({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,Yh.basename)(t),{type:r,lastModified:e.mtimeMs}),"fromFile"),_m=class Em{constructor(t){Bt(this,wn,void 0),Bt(this,vn,void 0),ot(this,wn,t.path),ot(this,vn,t.start),this.size=t.size,this.lastModified=t.lastModified}slice(t,r){return new Em({path:fe(this,wn),lastModified:this.lastModified,size:r-t,start:fe(this,vn)+t})}async*stream(){let{mtimeMs:t}=await pl(fe(this,wn));if(t>this.lastModified)throw new Ow("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Ir.createReadStream)(fe(this,wn),{start:fe(this,vn),end:fe(this,vn)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}};wn=new WeakMap,vn=new WeakMap,d(_m,"BlobDataItem");Sm=_m,qw=new Set(["data:","http:","https:"]);d(gl,"fetch$1");d(Rm,"fixResponseChunkedTransferBadEnding");Tm=new WeakMap,sl=new WeakMap;d(ce,"pd");d(ll,"setCancelFlag");d(kr,"Event"),kr.prototype={get type(){return ce(this).event.type},get target(){return ce(this).eventTarget},get currentTarget(){return ce(this).currentTarget},composedPath(){let e=ce(this).currentTarget;return e==null?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return ce(this).eventPhase},stopPropagation(){let e=ce(this);e.stopped=!0,typeof e.event.stopPropagation=="function"&&e.event.stopPropagation()},stopImmediatePropagation(){let e=ce(this);e.stopped=!0,e.immediateStopped=!0,typeof e.event.stopImmediatePropagation=="function"&&e.event.stopImmediatePropagation()},get bubbles(){return!!ce(this).event.bubbles},get cancelable(){return!!ce(this).event.cancelable},preventDefault(){ll(ce(this))},get defaultPrevented(){return ce(this).canceled},get composed(){return!!ce(this).event.composed},get timeStamp(){return ce(this).timeStamp},get srcElement(){return ce(this).eventTarget},get cancelBubble(){return ce(this).stopped},set cancelBubble(e){if(!e)return;let t=ce(this);t.stopped=!0,typeof t.event.cancelBubble=="boolean"&&(t.event.cancelBubble=!0)},get returnValue(){return!ce(this).canceled},set returnValue(e){e||ll(ce(this))},initEvent(){}},Object.defineProperty(kr.prototype,"constructor",{value:kr,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(kr.prototype,window.Event.prototype),sl.set(window.Event.prototype,kr));d(bl,"defineRedirectDescriptor");d(xm,"defineCallDescriptor");d(Pm,"defineWrapper");d(yl,"getWrapper");d(Am,"wrapEvent");d(km,"isStopped");d(Cm,"setEventPhase");d(Im,"setCurrentTarget");d(cl,"setPassiveListener");Om=new WeakMap,Uh=1,Hh=2,za=3;d(yi,"isObject");d(_n,"getListeners");d(jm,"defineEventAttributeDescriptor");d(wl,"defineEventAttribute");d(ul,"defineCustomEventTarget");d(gt,"EventTarget"),gt.prototype={addEventListener(e,t,r){if(t==null)return;if(typeof t!="function"&&!yi(t))throw new TypeError("'listener' should be a function or an object.");let n=_n(this),a=yi(r),o=(a?r.capture:r)?Uh:Hh,l={listener:t,listenerType:o,passive:a&&!!r.passive,once:a&&!!r.once,next:null},c=n.get(e);if(c===void 0){n.set(e,l);return}let f=null;for(;c!=null;){if(c.listener===t&&c.listenerType===o)return;f=c,c=c.next}f.next=l},removeEventListener(e,t,r){if(t==null)return;let n=_n(this),a=(yi(r)?r.capture:r)?Uh:Hh,o=null,l=n.get(e);for(;l!=null;){if(l.listener===t&&l.listenerType===a){o!==null?o.next=l.next:l.next!==null?n.set(e,l.next):n.delete(e);return}o=l,l=l.next}},dispatchEvent(e){if(e==null||typeof e.type!="string")throw new TypeError('"event.type" should be a string.');let t=_n(this),r=e.type,n=t.get(r);if(n==null)return!0;let a=Am(this,e),o=null;for(;n!=null;){if(n.once?o!==null?o.next=n.next:n.next!==null?t.set(r,n.next):t.delete(r):o=n,cl(a,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,a)}catch(l){typeof console<"u"&&typeof console.error=="function"&&console.error(l)}else n.listenerType!==za&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(a);if(km(a))break;n=n.next}return cl(a,null),Cm(a,0),Im(a,null),!a.defaultPrevented}},Object.defineProperty(gt.prototype,"constructor",{value:gt,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(gt.prototype,window.EventTarget.prototype);Bm=class extends gt{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=Va.get(this);if(typeof t!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}};d(Bm,"AbortSignal");Ga=Bm;wl(Ga.prototype,"abort");d(Lm,"createAbortSignal");d($m,"abortSignal");Va=new WeakMap;Object.defineProperties(Ga.prototype,{aborted:{enumerable:!0}}),typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ga.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});Za=(rl=class{constructor(){qm.set(this,Lm())}get signal(){return dl(this)}abort(){$m(dl(this))}},d(rl,"AbortController"),rl),qm=new WeakMap;d(dl,"getSignal"),Object.defineProperties(Za.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Za.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Dw=Object.defineProperty,Fw=d((e,t)=>Dw(e,"name",{value:t,configurable:!0}),"e"),Dm=gl;fl();d(fl,"s"),Fw(fl,"checkNodeEnvironment")});var G_={};zu(G_,{default:()=>mp});module.exports=Tp(G_);var qe=Ct(Gs(),1),hp=Ct(jh(),1),On=require("fs"),io=Ct(require("path"),1);var Jm=Ct(require("node:http"),1),Km=Ct(require("node:https"),1);$a();$a();ja();var Nw=Object.defineProperty,Fm=(e,t)=>Nw(e,"name",{value:t,configurable:!0}),Mw=Object.defineProperty,Ww=Fm((e,t)=>Mw(e,"name",{value:t,configurable:!0}),"e"),or=!!globalThis.process?.env?.FORCE_NODE_FETCH;function vl(){return!or&&globalThis.fetch?globalThis.fetch:Dm}Fm(vl,"p"),Ww(vl,"_getFetch");var _l=vl(),y1=!or&&globalThis.Blob||Cr,w1=!or&&globalThis.File||bn,v1=!or&&globalThis.FormData||Tr,Nm=!or&&globalThis.Headers||Lt,_1=!or&&globalThis.Request||wi,E1=!or&&globalThis.Response||pt,Mm=!or&&globalThis.AbortController||Za;var zw=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Uw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Hw=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Gw(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Vw(e);return}return t}function Vw(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Wm(e,t={}){if(typeof e!="string")return e;let r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){let n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!Hw.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(zw.test(e)||Uw.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Gw)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}var x1=String.fromCharCode;var Zw=/#/g,Qw=/&/g,Yw=/\//g,Xw=/=/g;var Tl=/\+/g,Jw=/%5e/gi,Kw=/%60/gi;var ev=/%7c/gi;var tv=/%20/gi;function rv(e){return encodeURI(""+e).replace(ev,"|")}function Sl(e){return rv(typeof e=="string"?e:JSON.stringify(e)).replace(Tl,"%2B").replace(tv,"+").replace(Zw,"%23").replace(Qw,"%26").replace(Kw,"`").replace(Jw,"^").replace(Yw,"%2F")}function El(e){return Sl(e).replace(Xw,"%3D")}function Um(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function nv(e){return Um(e.replace(Tl," "))}function iv(e){return Um(e.replace(Tl," "))}function av(e=""){let t={};e[0]==="?"&&(e=e.slice(1));for(let r of e.split("&")){let n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;let a=nv(n[1]);if(a==="__proto__"||a==="constructor")continue;let o=iv(n[2]||"");t[a]===void 0?t[a]=o:Array.isArray(t[a])?t[a].push(o):t[a]=[t[a],o]}return t}function ov(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(r=>`${El(e)}=${Sl(r)}`).join("&"):`${El(e)}=${Sl(t)}`:El(e)}function sv(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>ov(t,e[t])).filter(Boolean).join("&")}var lv=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,cv=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,uv=/^([/\\]\s*){2,}[^/\\]/;var dv=/\/$|\/\?|\/#/,fv=/^\.?\//;function Hm(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?lv.test(e):cv.test(e)||(t.acceptRelative?uv.test(e):!1)}function Rl(e="",t){return t?dv.test(e):e.endsWith("/")}function hv(e="",t){if(!t)return(Rl(e)?e.slice(0,-1):e)||"/";if(!Rl(e,!0))return e||"/";let r=e,n="",a=e.indexOf("#");a>=0&&(r=e.slice(0,a),n=e.slice(a));let[o,...l]=r.split("?");return((o.endsWith("/")?o.slice(0,-1):o)||"/")+(l.length>0?`?${l.join("?")}`:"")+n}function mv(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(Rl(e,!0))return e||"/";let r=e,n="",a=e.indexOf("#");if(a>=0&&(r=e.slice(0,a),n=e.slice(a),!r))return n;let[o,...l]=r.split("?");return o+"/"+(l.length>0?`?${l.join("?")}`:"")+n}function Gm(e,t){if(pv(t)||Hm(e))return e;let r=hv(t);return e.startsWith(r)?e:bv(r,e)}function Vm(e,t){let r=Qm(e),n={...av(r.search),...t};return r.search=sv(n),yv(r)}function pv(e){return!e||e==="/"}function gv(e){return e&&e!=="/"}function bv(e,...t){let r=e||"";for(let n of t.filter(a=>gv(a)))if(r){let a=n.replace(fv,"");r=mv(r)+a}else r=n;return r}var Zm=Symbol.for("ufo:protocolRelative");function Qm(e="",t){let r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){let[,b,_=""]=r;return{protocol:b.toLowerCase(),pathname:_,href:b+_,auth:"",host:"",search:"",hash:""}}if(!Hm(e,{acceptRelative:!0}))return t?Qm(t+e):zm(e);let[,n="",a,o=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,l="",c=""]=o.match(/([^#/?]*)(.*)?/)||[];n==="file:"&&(c=c.replace(/\/(?=[A-Za-z]:)/,""));let{pathname:f,search:p,hash:m}=zm(c);return{protocol:n.toLowerCase(),auth:a?a.slice(0,Math.max(0,a.length-1)):"",host:l,pathname:f,search:p,hash:m,[Zm]:!n}}function zm(e=""){let[t="",r="",n=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:n}}function yv(e){let t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",n=e.hash||"",a=e.auth?e.auth+"@":"",o=e.host||"";return(e.protocol||e[Zm]?(e.protocol||"")+"//":"")+a+o+t+r+n}var Sn=class extends Error{constructor(t,r){super(t,r),this.name="FetchError",r?.cause&&!this.cause&&(this.cause=r.cause)}};function Xm(e){let t=e.error?.message||e.error?.toString()||"",r=e.request?.method||e.options?.method||"GET",n=e.request?.url||String(e.request)||"/",a=`[${r}] ${JSON.stringify(n)}`,o=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",l=`${a}: ${o}${t?` ${t}`:""}`,c=new Sn(l,e.error?{cause:e.error}:void 0);for(let f of["request","options","response"])Object.defineProperty(c,f,{get(){return e[f]}});for(let[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(c,f,{get(){return e.response&&e.response[p]}});return c}var wv=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Ym(e="GET"){return wv.has(e.toUpperCase())}function vv(e){if(e===void 0)return!1;let t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}var _v=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Ev=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Sv(e=""){if(!e)return"json";let t=e.split(";").shift()||"";return Ev.test(t)?"json":_v.has(t)||t.startsWith("text/")?"text":"blob"}function Rv(e,t,r,n){let a=Tv(t?.headers??e?.headers,r?.headers,n),o;return(r?.query||r?.params||t?.params||t?.query)&&(o={...r?.params,...r?.query,...t?.params,...t?.query}),{...r,...t,query:o,params:o,headers:a}}function Tv(e,t,r){if(!t)return new r(e);let n=new r(t);if(e)for(let[a,o]of Symbol.iterator in e||Array.isArray(e)?e:new r(e))n.set(a,o);return n}async function Ya(e,t){if(t)if(Array.isArray(t))for(let r of t)await r(e);else await t(e)}var xv=new Set([408,409,425,429,500,502,503,504]),Pv=new Set([101,204,205,304]);function xl(e={}){let{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:n=globalThis.AbortController}=e;async function a(c){let f=c.error&&c.error.name==="AbortError"&&!c.options.timeout||!1;if(c.options.retry!==!1&&!f){let m;typeof c.options.retry=="number"?m=c.options.retry:m=Ym(c.options.method)?0:1;let b=c.response&&c.response.status||500;if(m>0&&(Array.isArray(c.options.retryStatusCodes)?c.options.retryStatusCodes.includes(b):xv.has(b))){let _=typeof c.options.retryDelay=="function"?c.options.retryDelay(c):c.options.retryDelay||0;return _>0&&await new Promise(A=>setTimeout(A,_)),o(c.request,{...c.options,retry:m-1})}}let p=Xm(c);throw Error.captureStackTrace&&Error.captureStackTrace(p,o),p}let o=async function(f,p={}){let m={request:f,options:Rv(f,p,e.defaults,r),response:void 0,error:void 0};m.options.method&&(m.options.method=m.options.method.toUpperCase()),m.options.onRequest&&await Ya(m,m.options.onRequest),typeof m.request=="string"&&(m.options.baseURL&&(m.request=Gm(m.request,m.options.baseURL)),m.options.query&&(m.request=Vm(m.request,m.options.query),delete m.options.query),"query"in m.options&&delete m.options.query,"params"in m.options&&delete m.options.params),m.options.body&&Ym(m.options.method)&&(vv(m.options.body)?(m.options.body=typeof m.options.body=="string"?m.options.body:JSON.stringify(m.options.body),m.options.headers=new r(m.options.headers||{}),m.options.headers.has("content-type")||m.options.headers.set("content-type","application/json"),m.options.headers.has("accept")||m.options.headers.set("accept","application/json")):("pipeTo"in m.options.body&&typeof m.options.body.pipeTo=="function"||typeof m.options.body.pipe=="function")&&("duplex"in m.options||(m.options.duplex="half")));let b;if(!m.options.signal&&m.options.timeout){let A=new n;b=setTimeout(()=>{let R=new Error("[TimeoutError]: The operation was aborted due to timeout");R.name="TimeoutError",R.code=23,A.abort(R)},m.options.timeout),m.options.signal=A.signal}try{m.response=await t(m.request,m.options)}catch(A){return m.error=A,m.options.onRequestError&&await Ya(m,m.options.onRequestError),await a(m)}finally{b&&clearTimeout(b)}if((m.response.body||m.response._bodyInit)&&!Pv.has(m.response.status)&&m.options.method!=="HEAD"){let A=(m.options.parseResponse?"json":m.options.responseType)||Sv(m.response.headers.get("content-type")||"");switch(A){case"json":{let R=await m.response.text(),L=m.options.parseResponse||Wm;m.response._data=L(R);break}case"stream":{m.response._data=m.response.body||m.response._bodyInit;break}default:m.response._data=await m.response[A]()}}return m.options.onResponse&&await Ya(m,m.options.onResponse),!m.options.ignoreResponseError&&m.response.status>=400&&m.response.status<600?(m.options.onResponseError&&await Ya(m,m.options.onResponseError),await a(m)):m.response},l=async function(f,p){return(await o(f,p))._data};return l.raw=o,l.native=(...c)=>t(...c),l.create=(c={},f={})=>xl({...e,...f,defaults:{...e.defaults,...f.defaults,...c}}),l}function Av(){if(!JSON.parse(process.env.FETCH_KEEP_ALIVE||"false"))return _l;let t={keepAlive:!0},r=new Jm.default.Agent(t),n=new Km.default.Agent(t),a={agent(o){return o.protocol==="http:"?r:n}};return function(l,c){return _l(l,{...a,...c})}}var kv=globalThis.fetch?(...e)=>globalThis.fetch(...e):Av(),Cv=globalThis.Headers||Nm,Iv=globalThis.AbortController||Mm,Xa=xl({fetch:kv,Headers:Cv,AbortController:Iv});var ne;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{let o={};for(let l of a)o[l]=l;return o},e.getValidEnumValues=a=>{let o=e.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),l={};for(let c of o)l[c]=a[c];return e.objectValues(l)},e.objectValues=a=>e.objectKeys(a).map(function(o){return a[o]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{let o=[];for(let l in a)Object.prototype.hasOwnProperty.call(a,l)&&o.push(l);return o},e.find=(a,o)=>{for(let l of a)if(o(l))return l},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,o=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}e.joinValues=n,e.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(ne||(ne={}));var Al;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Al||(Al={}));var k=ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sr=e=>{switch(typeof e){case"undefined":return k.undefined;case"string":return k.string;case"number":return isNaN(e)?k.nan:k.number;case"boolean":return k.boolean;case"function":return k.function;case"bigint":return k.bigint;case"symbol":return k.symbol;case"object":return Array.isArray(e)?k.array:e===null?k.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?k.promise:typeof Map<"u"&&e instanceof Map?k.map:typeof Set<"u"&&e instanceof Set?k.set:typeof Date<"u"&&e instanceof Date?k.date:k.object;default:return k.unknown}},T=ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ov=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ze=class e extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){let r=t||function(o){return o.message},n={_errors:[]},a=o=>{for(let l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let c=n,f=0;for(;f<l.path.length;){let p=l.path[f];f===l.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(r(l))):c[p]=c[p]||{_errors:[]},c=c[p],f++}}};return a(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ze.create=e=>new ze(e);var xn=(e,t)=>{let r;switch(e.code){case T.invalid_type:e.received===k.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case T.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ne.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:r=`Unrecognized key(s) in object: ${ne.joinValues(e.keys,", ")}`;break;case T.invalid_union:r="Invalid input";break;case T.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ne.joinValues(e.options)}`;break;case T.invalid_enum_value:r=`Invalid enum value. Expected ${ne.joinValues(e.options)}, received '${e.received}'`;break;case T.invalid_arguments:r="Invalid function arguments";break;case T.invalid_return_type:r="Invalid function return type";break;case T.invalid_date:r="Invalid date";break;case T.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ne.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case T.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case T.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case T.custom:r="Invalid input";break;case T.invalid_intersection_types:r="Intersection results could not be merged";break;case T.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case T.not_finite:r="Number must be finite";break;default:r=t.defaultError,ne.assertNever(e)}return{message:r}},rp=xn;function jv(e){rp=e}function Ja(){return rp}var Ka=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,o=[...r,...a.path||[]],l={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let c="",f=n.filter(p=>!!p).slice().reverse();for(let p of f)c=p(l,{data:t,defaultError:c}).message;return{...a,path:o,message:c}},Bv=[];function P(e,t){let r=Ja(),n=Ka({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===xn?void 0:xn].filter(a=>!!a)});e.common.issues.push(n)}var Se=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let a of r){if(a.status==="aborted")return U;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let a of r){let o=await a.key,l=await a.value;n.push({key:o,value:l})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let a of r){let{key:o,value:l}=a;if(o.status==="aborted"||l.status==="aborted")return U;o.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(n[o.value]=l.value)}return{status:t.value,value:n}}},U=Object.freeze({status:"aborted"}),Tn=e=>({status:"dirty",value:e}),ke=e=>({status:"valid",value:e}),kl=e=>e.status==="aborted",Cl=e=>e.status==="dirty",Ei=e=>e.status==="valid",Si=e=>typeof Promise<"u"&&e instanceof Promise;function eo(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function np(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}var D;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(D||(D={}));var vi,_i,Je=class{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ep=(e,t)=>{if(Ei(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ze(e.common.issues);return this._error=r,this._error}}};function Q(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(l,c)=>{var f,p;let{message:m}=e;return l.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(f=m??n)!==null&&f!==void 0?f:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(p=m??r)!==null&&p!==void 0?p:c.defaultError}},description:a}}var Y=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return sr(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:sr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Se,ctx:{common:t.parent.common,data:t.data,parsedType:sr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Si(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let a={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:sr(t)},o=this._parseSync({data:t,path:a.path,parent:a});return ep(a,o)}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:sr(t)},a=this._parse({data:t,path:n.path,parent:n}),o=await(Si(a)?a:Promise.resolve(a));return ep(n,o)}refine(t,r){let n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,o)=>{let l=t(a),c=()=>o.addIssue({code:T.custom,...n(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Ue({schema:this,typeName:W.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Xe.create(this,this._def)}nullable(){return yt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Dt.create(this,this._def)}promise(){return ur.create(this,this._def)}or(t){return Dr.create([this,t],this._def)}and(t){return Fr.create(this,t,this._def)}transform(t){return new Ue({...Q(this._def),schema:this,typeName:W.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Ur({...Q(this._def),innerType:this,defaultValue:r,typeName:W.ZodDefault})}brand(){return new Ri({typeName:W.ZodBranded,type:this,...Q(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new Hr({...Q(this._def),innerType:this,catchValue:r,typeName:W.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Ti.create(this,t)}readonly(){return Gr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Lv=/^c[^\s-]{8,}$/i,$v=/^[0-9a-z]+$/,qv=/^[0-9A-HJKMNP-TV-Z]{26}$/,Dv=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Fv=/^[a-z0-9_-]{21}$/i,Nv=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Mv=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Wv="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Pl,zv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Uv=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Hv=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ip="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Gv=new RegExp(`^${ip}$`);function ap(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Vv(e){return new RegExp(`^${ap(e)}$`)}function op(e){let t=`${ip}T${ap(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Zv(e,t){return!!((t==="v4"||!t)&&zv.test(e)||(t==="v6"||!t)&&Uv.test(e))}var lr=class e extends Y{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==k.string){let o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:k.string,received:o.parsedType}),U}let n=new Se,a;for(let o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(a=this._getOrReturnCtx(t,a),P(a,{code:T.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(a=this._getOrReturnCtx(t,a),P(a,{code:T.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let l=t.data.length>o.value,c=t.data.length<o.value;(l||c)&&(a=this._getOrReturnCtx(t,a),l?P(a,{code:T.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&P(a,{code:T.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Mv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"email",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Pl||(Pl=new RegExp(Wv,"u")),Pl.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"emoji",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Dv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"uuid",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Fv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"nanoid",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Lv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"cuid",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")$v.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"cuid2",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")qv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"ulid",code:T.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),P(a,{validation:"url",code:T.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"regex",code:T.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(t,a),P(a,{code:T.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(a=this._getOrReturnCtx(t,a),P(a,{code:T.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(a=this._getOrReturnCtx(t,a),P(a,{code:T.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?op(o).test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{code:T.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Gv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{code:T.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Vv(o).test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{code:T.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Nv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"duration",code:T.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Zv(t.data,o.version)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"ip",code:T.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Hv.test(t.data)||(a=this._getOrReturnCtx(t,a),P(a,{validation:"base64",code:T.invalid_string,message:o.message}),n.dirty()):ne.assertNever(o);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:T.invalid_string,...D.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...D.errToObj(t)})}url(t){return this._addCheck({kind:"url",...D.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...D.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...D.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...D.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...D.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...D.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...D.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...D.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...D.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(r=t?.offset)!==null&&r!==void 0?r:!1,local:(n=t?.local)!==null&&n!==void 0?n:!1,...D.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...D.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...D.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...D.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...D.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...D.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...D.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...D.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...D.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...D.errToObj(r)})}nonempty(t){return this.min(1,D.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};lr.create=e=>{var t;return new lr({checks:[],typeName:W.ZodString,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Q(e)})};function Qv(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,o=parseInt(e.toFixed(a).replace(".","")),l=parseInt(t.toFixed(a).replace(".",""));return o%l/Math.pow(10,a)}var Or=class e extends Y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==k.number){let o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:k.number,received:o.parsedType}),U}let n,a=new Se;for(let o of this._def.checks)o.kind==="int"?ne.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),P(n,{code:T.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),P(n,{code:T.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),P(n,{code:T.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?Qv(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),P(n,{code:T.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),P(n,{code:T.not_finite,message:o.message}),a.dirty()):ne.assertNever(o);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,D.toString(r))}gt(t,r){return this.setLimit("min",t,!1,D.toString(r))}lte(t,r){return this.setLimit("max",t,!0,D.toString(r))}lt(t,r){return this.setLimit("max",t,!1,D.toString(r))}setLimit(t,r,n,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:D.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:D.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:D.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:D.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:D.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:D.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:D.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:D.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:D.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:D.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ne.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Or.create=e=>new Or({checks:[],typeName:W.ZodNumber,coerce:e?.coerce||!1,...Q(e)});var jr=class e extends Y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==k.bigint){let o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:k.bigint,received:o.parsedType}),U}let n,a=new Se;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),P(n,{code:T.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),P(n,{code:T.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),P(n,{code:T.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):ne.assertNever(o);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,D.toString(r))}gt(t,r){return this.setLimit("min",t,!1,D.toString(r))}lte(t,r){return this.setLimit("max",t,!0,D.toString(r))}lt(t,r){return this.setLimit("max",t,!1,D.toString(r))}setLimit(t,r,n,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:D.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:D.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:D.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:D.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:D.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:D.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};jr.create=e=>{var t;return new jr({checks:[],typeName:W.ZodBigInt,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Q(e)})};var Br=class extends Y{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==k.boolean){let n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:k.boolean,received:n.parsedType}),U}return ke(t.data)}};Br.create=e=>new Br({typeName:W.ZodBoolean,coerce:e?.coerce||!1,...Q(e)});var Lr=class e extends Y{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==k.date){let o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_type,expected:k.date,received:o.parsedType}),U}if(isNaN(t.data.getTime())){let o=this._getOrReturnCtx(t);return P(o,{code:T.invalid_date}),U}let n=new Se,a;for(let o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(a=this._getOrReturnCtx(t,a),P(a,{code:T.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(a=this._getOrReturnCtx(t,a),P(a,{code:T.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):ne.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:D.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:D.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Lr.create=e=>new Lr({checks:[],coerce:e?.coerce||!1,typeName:W.ZodDate,...Q(e)});var Pn=class extends Y{_parse(t){if(this._getType(t)!==k.symbol){let n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:k.symbol,received:n.parsedType}),U}return ke(t.data)}};Pn.create=e=>new Pn({typeName:W.ZodSymbol,...Q(e)});var $r=class extends Y{_parse(t){if(this._getType(t)!==k.undefined){let n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:k.undefined,received:n.parsedType}),U}return ke(t.data)}};$r.create=e=>new $r({typeName:W.ZodUndefined,...Q(e)});var qr=class extends Y{_parse(t){if(this._getType(t)!==k.null){let n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:k.null,received:n.parsedType}),U}return ke(t.data)}};qr.create=e=>new qr({typeName:W.ZodNull,...Q(e)});var cr=class extends Y{constructor(){super(...arguments),this._any=!0}_parse(t){return ke(t.data)}};cr.create=e=>new cr({typeName:W.ZodAny,...Q(e)});var qt=class extends Y{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ke(t.data)}};qt.create=e=>new qt({typeName:W.ZodUnknown,...Q(e)});var lt=class extends Y{_parse(t){let r=this._getOrReturnCtx(t);return P(r,{code:T.invalid_type,expected:k.never,received:r.parsedType}),U}};lt.create=e=>new lt({typeName:W.ZodNever,...Q(e)});var An=class extends Y{_parse(t){if(this._getType(t)!==k.undefined){let n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:k.void,received:n.parsedType}),U}return ke(t.data)}};An.create=e=>new An({typeName:W.ZodVoid,...Q(e)});var Dt=class e extends Y{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==k.array)return P(r,{code:T.invalid_type,expected:k.array,received:r.parsedType}),U;if(a.exactLength!==null){let l=r.data.length>a.exactLength.value,c=r.data.length<a.exactLength.value;(l||c)&&(P(r,{code:l?T.too_big:T.too_small,minimum:c?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(P(r,{code:T.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(P(r,{code:T.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,c)=>a.type._parseAsync(new Je(r,l,r.path,c)))).then(l=>Se.mergeArray(n,l));let o=[...r.data].map((l,c)=>a.type._parseSync(new Je(r,l,r.path,c)));return Se.mergeArray(n,o)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:D.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:D.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:D.toString(r)}})}nonempty(t){return this.min(1,t)}};Dt.create=(e,t)=>new Dt({type:e,minLength:null,maxLength:null,exactLength:null,typeName:W.ZodArray,...Q(t)});function Rn(e){if(e instanceof $e){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=Xe.create(Rn(n))}return new $e({...e._def,shape:()=>t})}else return e instanceof Dt?new Dt({...e._def,type:Rn(e.element)}):e instanceof Xe?Xe.create(Rn(e.unwrap())):e instanceof yt?yt.create(Rn(e.unwrap())):e instanceof bt?bt.create(e.items.map(t=>Rn(t))):e}var $e=class e extends Y{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=ne.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==k.object){let p=this._getOrReturnCtx(t);return P(p,{code:T.invalid_type,expected:k.object,received:p.parsedType}),U}let{status:n,ctx:a}=this._processInputParams(t),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof lt&&this._def.unknownKeys==="strip"))for(let p in a.data)l.includes(p)||c.push(p);let f=[];for(let p of l){let m=o[p],b=a.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new Je(a,b,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof lt){let p=this._def.unknownKeys;if(p==="passthrough")for(let m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(p==="strict")c.length>0&&(P(a,{code:T.unrecognized_keys,keys:c}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let m of c){let b=a.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new Je(a,b,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let p=[];for(let m of f){let b=await m.key,_=await m.value;p.push({key:b,value:_,alwaysSet:m.alwaysSet})}return p}).then(p=>Se.mergeObjectSync(n,p)):Se.mergeObjectSync(n,f)}get shape(){return this._def.shape()}strict(t){return D.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var a,o,l,c;let f=(l=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,r,n).message)!==null&&l!==void 0?l:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=D.errToObj(t).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:W.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return ne.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return ne.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return Rn(this)}partial(t){let r={};return ne.objectKeys(this.shape).forEach(n=>{let a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return ne.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Xe;)o=o._def.innerType;r[n]=o}}),new e({...this._def,shape:()=>r})}keyof(){return sp(ne.objectKeys(this.shape))}};$e.create=(e,t)=>new $e({shape:()=>e,unknownKeys:"strip",catchall:lt.create(),typeName:W.ZodObject,...Q(t)});$e.strictCreate=(e,t)=>new $e({shape:()=>e,unknownKeys:"strict",catchall:lt.create(),typeName:W.ZodObject,...Q(t)});$e.lazycreate=(e,t)=>new $e({shape:e,unknownKeys:"strip",catchall:lt.create(),typeName:W.ZodObject,...Q(t)});var Dr=class extends Y{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function a(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let l=o.map(c=>new ze(c.ctx.common.issues));return P(r,{code:T.invalid_union,unionErrors:l}),U}if(r.common.async)return Promise.all(n.map(async o=>{let l={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(a);{let o,l=[];for(let f of n){let p={...r,common:{...r.common,issues:[]},parent:null},m=f._parseSync({data:r.data,path:r.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&l.push(p.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=l.map(f=>new ze(f));return P(r,{code:T.invalid_union,unionErrors:c}),U}}get options(){return this._def.options}};Dr.create=(e,t)=>new Dr({options:e,typeName:W.ZodUnion,...Q(t)});var $t=e=>e instanceof Nr?$t(e.schema):e instanceof Ue?$t(e.innerType()):e instanceof Mr?[e.value]:e instanceof Wr?e.options:e instanceof zr?ne.objectValues(e.enum):e instanceof Ur?$t(e._def.innerType):e instanceof $r?[void 0]:e instanceof qr?[null]:e instanceof Xe?[void 0,...$t(e.unwrap())]:e instanceof yt?[null,...$t(e.unwrap())]:e instanceof Ri||e instanceof Gr?$t(e.unwrap()):e instanceof Hr?$t(e._def.innerType):[],to=class e extends Y{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.object)return P(r,{code:T.invalid_type,expected:k.object,received:r.parsedType}),U;let n=this.discriminator,a=r.data[n],o=this.optionsMap.get(a);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(P(r,{code:T.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),U)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let a=new Map;for(let o of r){let l=$t(o.shape[t]);if(!l.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let c of l){if(a.has(c))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(c)}`);a.set(c,o)}}return new e({typeName:W.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:a,...Q(n)})}};function Il(e,t){let r=sr(e),n=sr(t);if(e===t)return{valid:!0,data:e};if(r===k.object&&n===k.object){let a=ne.objectKeys(t),o=ne.objectKeys(e).filter(c=>a.indexOf(c)!==-1),l={...e,...t};for(let c of o){let f=Il(e[c],t[c]);if(!f.valid)return{valid:!1};l[c]=f.data}return{valid:!0,data:l}}else if(r===k.array&&n===k.array){if(e.length!==t.length)return{valid:!1};let a=[];for(let o=0;o<e.length;o++){let l=e[o],c=t[o],f=Il(l,c);if(!f.valid)return{valid:!1};a.push(f.data)}return{valid:!0,data:a}}else return r===k.date&&n===k.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Fr=class extends Y{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),a=(o,l)=>{if(kl(o)||kl(l))return U;let c=Il(o.value,l.value);return c.valid?((Cl(o)||Cl(l))&&r.dirty(),{status:r.value,value:c.data}):(P(n,{code:T.invalid_intersection_types}),U)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,l])=>a(o,l)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Fr.create=(e,t,r)=>new Fr({left:e,right:t,typeName:W.ZodIntersection,...Q(r)});var bt=class e extends Y{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.array)return P(n,{code:T.invalid_type,expected:k.array,received:n.parsedType}),U;if(n.data.length<this._def.items.length)return P(n,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),U;!this._def.rest&&n.data.length>this._def.items.length&&(P(n,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((l,c)=>{let f=this._def.items[c]||this._def.rest;return f?f._parse(new Je(n,l,n.path,c)):null}).filter(l=>!!l);return n.common.async?Promise.all(o).then(l=>Se.mergeArray(r,l)):Se.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};bt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bt({items:e,typeName:W.ZodTuple,rest:null,...Q(t)})};var ro=class e extends Y{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.object)return P(n,{code:T.invalid_type,expected:k.object,received:n.parsedType}),U;let a=[],o=this._def.keyType,l=this._def.valueType;for(let c in n.data)a.push({key:o._parse(new Je(n,c,n.path,c)),value:l._parse(new Je(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Se.mergeObjectAsync(r,a):Se.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Y?new e({keyType:t,valueType:r,typeName:W.ZodRecord,...Q(n)}):new e({keyType:lr.create(),valueType:t,typeName:W.ZodRecord,...Q(r)})}},kn=class extends Y{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.map)return P(n,{code:T.invalid_type,expected:k.map,received:n.parsedType}),U;let a=this._def.keyType,o=this._def.valueType,l=[...n.data.entries()].map(([c,f],p)=>({key:a._parse(new Je(n,c,n.path,[p,"key"])),value:o._parse(new Je(n,f,n.path,[p,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let f of l){let p=await f.key,m=await f.value;if(p.status==="aborted"||m.status==="aborted")return U;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),c.set(p.value,m.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let f of l){let p=f.key,m=f.value;if(p.status==="aborted"||m.status==="aborted")return U;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),c.set(p.value,m.value)}return{status:r.value,value:c}}}};kn.create=(e,t,r)=>new kn({valueType:t,keyType:e,typeName:W.ZodMap,...Q(r)});var Cn=class e extends Y{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.set)return P(n,{code:T.invalid_type,expected:k.set,received:n.parsedType}),U;let a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(P(n,{code:T.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(P(n,{code:T.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());let o=this._def.valueType;function l(f){let p=new Set;for(let m of f){if(m.status==="aborted")return U;m.status==="dirty"&&r.dirty(),p.add(m.value)}return{status:r.value,value:p}}let c=[...n.data.values()].map((f,p)=>o._parse(new Je(n,f,n.path,p)));return n.common.async?Promise.all(c).then(f=>l(f)):l(c)}min(t,r){return new e({...this._def,minSize:{value:t,message:D.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:D.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Cn.create=(e,t)=>new Cn({valueType:e,minSize:null,maxSize:null,typeName:W.ZodSet,...Q(t)});var no=class e extends Y{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.function)return P(r,{code:T.invalid_type,expected:k.function,received:r.parsedType}),U;function n(c,f){return Ka({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ja(),xn].filter(p=>!!p),issueData:{code:T.invalid_arguments,argumentsError:f}})}function a(c,f){return Ka({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ja(),xn].filter(p=>!!p),issueData:{code:T.invalid_return_type,returnTypeError:f}})}let o={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof ur){let c=this;return ke(async function(...f){let p=new ze([]),m=await c._def.args.parseAsync(f,o).catch(A=>{throw p.addIssue(n(f,A)),p}),b=await Reflect.apply(l,this,m);return await c._def.returns._def.type.parseAsync(b,o).catch(A=>{throw p.addIssue(a(b,A)),p})})}else{let c=this;return ke(function(...f){let p=c._def.args.safeParse(f,o);if(!p.success)throw new ze([n(f,p.error)]);let m=Reflect.apply(l,this,p.data),b=c._def.returns.safeParse(m,o);if(!b.success)throw new ze([a(m,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:bt.create(t).rest(qt.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||bt.create([]).rest(qt.create()),returns:r||qt.create(),typeName:W.ZodFunction,...Q(n)})}},Nr=class extends Y{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Nr.create=(e,t)=>new Nr({getter:e,typeName:W.ZodLazy,...Q(t)});var Mr=class extends Y{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return P(r,{received:r.data,code:T.invalid_literal,expected:this._def.value}),U}return{status:"valid",value:t.data}}get value(){return this._def.value}};Mr.create=(e,t)=>new Mr({value:e,typeName:W.ZodLiteral,...Q(t)});function sp(e,t){return new Wr({values:e,typeName:W.ZodEnum,...Q(t)})}var Wr=class e extends Y{constructor(){super(...arguments),vi.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return P(r,{expected:ne.joinValues(n),received:r.parsedType,code:T.invalid_type}),U}if(eo(this,vi,"f")||np(this,vi,new Set(this._def.values),"f"),!eo(this,vi,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return P(r,{received:r.data,code:T.invalid_enum_value,options:n}),U}return ke(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};vi=new WeakMap;Wr.create=sp;var zr=class extends Y{constructor(){super(...arguments),_i.set(this,void 0)}_parse(t){let r=ne.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==k.string&&n.parsedType!==k.number){let a=ne.objectValues(r);return P(n,{expected:ne.joinValues(a),received:n.parsedType,code:T.invalid_type}),U}if(eo(this,_i,"f")||np(this,_i,new Set(ne.getValidEnumValues(this._def.values)),"f"),!eo(this,_i,"f").has(t.data)){let a=ne.objectValues(r);return P(n,{received:n.data,code:T.invalid_enum_value,options:a}),U}return ke(t.data)}get enum(){return this._def.values}};_i=new WeakMap;zr.create=(e,t)=>new zr({values:e,typeName:W.ZodNativeEnum,...Q(t)});var ur=class extends Y{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.promise&&r.common.async===!1)return P(r,{code:T.invalid_type,expected:k.promise,received:r.parsedType}),U;let n=r.parsedType===k.promise?r.data:Promise.resolve(r.data);return ke(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}};ur.create=(e,t)=>new ur({type:e,typeName:W.ZodPromise,...Q(t)});var Ue=class extends Y{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:l=>{P(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){let l=a.transform(n.data,o);if(n.common.async)return Promise.resolve(l).then(async c=>{if(r.value==="aborted")return U;let f=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return f.status==="aborted"?U:f.status==="dirty"||r.value==="dirty"?Tn(f.value):f});{if(r.value==="aborted")return U;let c=this._def.schema._parseSync({data:l,path:n.path,parent:n});return c.status==="aborted"?U:c.status==="dirty"||r.value==="dirty"?Tn(c.value):c}}if(a.type==="refinement"){let l=c=>{let f=a.refinement(c,o);if(n.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?U:(c.status==="dirty"&&r.dirty(),l(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?U:(c.status==="dirty"&&r.dirty(),l(c.value).then(()=>({status:r.value,value:c.value}))))}if(a.type==="transform")if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ei(l))return l;let c=a.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Ei(l)?Promise.resolve(a.transform(l.value,o)).then(c=>({status:r.value,value:c})):l);ne.assertNever(a)}};Ue.create=(e,t,r)=>new Ue({schema:e,typeName:W.ZodEffects,effect:t,...Q(r)});Ue.createWithPreprocess=(e,t,r)=>new Ue({schema:t,effect:{type:"preprocess",transform:e},typeName:W.ZodEffects,...Q(r)});var Xe=class extends Y{_parse(t){return this._getType(t)===k.undefined?ke(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Xe.create=(e,t)=>new Xe({innerType:e,typeName:W.ZodOptional,...Q(t)});var yt=class extends Y{_parse(t){return this._getType(t)===k.null?ke(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};yt.create=(e,t)=>new yt({innerType:e,typeName:W.ZodNullable,...Q(t)});var Ur=class extends Y{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===k.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ur.create=(e,t)=>new Ur({innerType:e,typeName:W.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Q(t)});var Hr=class extends Y{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Si(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ze(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ze(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Hr.create=(e,t)=>new Hr({innerType:e,typeName:W.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Q(t)});var In=class extends Y{_parse(t){if(this._getType(t)!==k.nan){let n=this._getOrReturnCtx(t);return P(n,{code:T.invalid_type,expected:k.nan,received:n.parsedType}),U}return{status:"valid",value:t.data}}};In.create=e=>new In({typeName:W.ZodNaN,...Q(e)});var Yv=Symbol("zod_brand"),Ri=class extends Y{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Ti=class e extends Y{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?U:o.status==="dirty"?(r.dirty(),Tn(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?U:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:W.ZodPipeline})}},Gr=class extends Y{_parse(t){let r=this._def.innerType._parse(t),n=a=>(Ei(a)&&(a.value=Object.freeze(a.value)),a);return Si(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}};Gr.create=(e,t)=>new Gr({innerType:e,typeName:W.ZodReadonly,...Q(t)});function lp(e,t={},r){return e?cr.create().superRefine((n,a)=>{var o,l;if(!e(n)){let c=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,f=(l=(o=c.fatal)!==null&&o!==void 0?o:r)!==null&&l!==void 0?l:!0,p=typeof c=="string"?{message:c}:c;a.addIssue({code:"custom",...p,fatal:f})}}):cr.create()}var Xv={object:$e.lazycreate},W;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(W||(W={}));var Jv=(e,t={message:`Input not instance of ${e.name}`})=>lp(r=>r instanceof e,t),cp=lr.create,up=Or.create,Kv=In.create,e_=jr.create,dp=Br.create,t_=Lr.create,r_=Pn.create,n_=$r.create,i_=qr.create,a_=cr.create,o_=qt.create,s_=lt.create,l_=An.create,c_=Dt.create,u_=$e.create,d_=$e.strictCreate,f_=Dr.create,h_=to.create,m_=Fr.create,p_=bt.create,g_=ro.create,b_=kn.create,y_=Cn.create,w_=no.create,v_=Nr.create,__=Mr.create,E_=Wr.create,S_=zr.create,R_=ur.create,tp=Ue.create,T_=Xe.create,x_=yt.create,P_=Ue.createWithPreprocess,A_=Ti.create,k_=()=>cp().optional(),C_=()=>up().optional(),I_=()=>dp().optional(),O_={string:e=>lr.create({...e,coerce:!0}),number:e=>Or.create({...e,coerce:!0}),boolean:e=>Br.create({...e,coerce:!0}),bigint:e=>jr.create({...e,coerce:!0}),date:e=>Lr.create({...e,coerce:!0})},j_=U,Ke=Object.freeze({__proto__:null,defaultErrorMap:xn,setErrorMap:jv,getErrorMap:Ja,makeIssue:Ka,EMPTY_PATH:Bv,addIssueToContext:P,ParseStatus:Se,INVALID:U,DIRTY:Tn,OK:ke,isAborted:kl,isDirty:Cl,isValid:Ei,isAsync:Si,get util(){return ne},get objectUtil(){return Al},ZodParsedType:k,getParsedType:sr,ZodType:Y,datetimeRegex:op,ZodString:lr,ZodNumber:Or,ZodBigInt:jr,ZodBoolean:Br,ZodDate:Lr,ZodSymbol:Pn,ZodUndefined:$r,ZodNull:qr,ZodAny:cr,ZodUnknown:qt,ZodNever:lt,ZodVoid:An,ZodArray:Dt,ZodObject:$e,ZodUnion:Dr,ZodDiscriminatedUnion:to,ZodIntersection:Fr,ZodTuple:bt,ZodRecord:ro,ZodMap:kn,ZodSet:Cn,ZodFunction:no,ZodLazy:Nr,ZodLiteral:Mr,ZodEnum:Wr,ZodNativeEnum:zr,ZodPromise:ur,ZodEffects:Ue,ZodTransformer:Ue,ZodOptional:Xe,ZodNullable:yt,ZodDefault:Ur,ZodCatch:Hr,ZodNaN:In,BRAND:Yv,ZodBranded:Ri,ZodPipeline:Ti,ZodReadonly:Gr,custom:lp,Schema:Y,ZodSchema:Y,late:Xv,get ZodFirstPartyTypeKind(){return W},coerce:O_,any:a_,array:c_,bigint:e_,boolean:dp,date:t_,discriminatedUnion:h_,effect:tp,enum:E_,function:w_,instanceof:Jv,intersection:m_,lazy:v_,literal:__,map:b_,nan:Kv,nativeEnum:S_,never:s_,null:i_,nullable:x_,number:up,object:u_,oboolean:I_,onumber:C_,optional:T_,ostring:k_,pipeline:A_,preprocess:P_,promise:R_,record:g_,set:y_,strictObject:d_,string:cp,symbol:r_,transformer:tp,tuple:p_,undefined:n_,union:f_,unknown:o_,void:l_,NEVER:j_,ZodIssueCode:T,quotelessJson:Ov,ZodError:ze});var B_={default:{labelColour:"#dff6f5",valueColour:"#f2bd59",usernameColour:"#dff6f5"},christmas:{labelColour:"#ffffff",valueColour:"#94edff",usernameColour:"#ffffff"}},Ol=Ke.string().regex(/^#[0-9a-f]{6}$/),D1=Ke.object({ext:Ke.union([Ke.literal(".gif"),Ke.literal(".webp")]).default(".gif"),stats:Ke.union([Ke.literal("dragons"),Ke.literal("garden")]).default("garden"),style:Ke.union([Ke.literal("default"),Ke.literal("christmas")]).default("default"),usernameColour:Ol.optional(),labelColour:Ol.optional(),valueColour:Ol.optional()}).transform(e=>({...B_[e.style],...e}));function jl(e){if(e.grow!=="0")return"Adult";if(e.grow==="0"&&e.hatch!=="0")return"Hatchling";if(e.hatch==="0")return"Egg"}function fp(e){let t=e.start==="0",r=e.hoursleft===-2,n=!t&&e.hoursleft===-1&&jl(e)!=="Adult";return{dead:r,hidden:t,frozen:n}}async function mp(e){let t=await(async()=>{switch(e.data.stats){case"dragons":return e.data.data=await W_(e.data),D_;case"garden":return q_;default:throw new Error("Invalid handler")}})(),r=await L_(e.data,n=>t(n,e.data));if(r.error&&console.error(r.error),r.error==="API Timeout")throw new Error(r.error);return{performanceData:r}}var Bl=327,Ll=61,xi=106;async function L_(e,t){let r={dragonsIncluded:null,dragonsOmitted:null,statGenTime:null,dragonFetchTime:null,dragonGenTime:null,frameGenTime:null,gifGenTime:null,totalTime:null,error:null},n=performance.now(),a=()=>n=performance.now(),o=()=>performance.now()-n;try{let l=io.default.dirname(e.filePath);await On.promises.mkdir(l,{recursive:!0});let c=n;a();let f=await $_(e),p=await ao(Bl,Ll).composite(await t(f)).png().toBuffer();if(r.statGenTime=o(),e.dragons.length>0){a();let{dragonsIncluded:m,dragonsOmitted:b,dragonBuffers:_}=await F_(e.dragons,e.secret);r.dragonFetchTime=o(),r.dragonsIncluded=m,r.dragonsOmitted=b,a();let{stripBuffer:A,stripWidth:R,stripHeight:L}=await N_(_);r.dragonGenTime=o(),a();let F=await M_(p,A,R,L);r.frameGenTime=o(),a(),await(await hp.default.createGif({delay:100,repeat:0,format:"rgb444"}).addFrame(F).toSharp()).toFile(`${e.filePath}.tmp`),r.gifGenTime=o()}else r.dragonsIncluded=[],r.dragonsOmitted=[],r.dragonFetchTime=0,r.dragonGenTime=0,r.frameGenTime=0,a(),await(0,qe.default)(p).gif().toFile(`${e.filePath}.tmp`),r.gifGenTime=o();r.totalTime=performance.now()-c,await U_(e.filePath)}catch(l){r.error=l===23?"API Timeout":l,await On.promises.unlink(`${e.filePath}.tmp`).catch(()=>{})}return r}async function $_(e){let t=[{input:io.default.resolve("/src/resources/public/share/scroll/",e.requestParameters.style+".webp"),top:0,left:0}],r=await $l(e.user.username,"16px Alkhemikal",`fill: ${e.requestParameters.usernameColour};`),{height:n,width:a}=await(0,qe.default)(r).metadata();if(t.push({input:r,top:25-(n??0),left:118}),e.user.flairPath){let o=io.default.resolve("/src/resources/public",e.user.flairPath),l=(0,qe.default)(o).greyscale().threshold(255).composite([{input:Buffer.from([255,255,255,Math.ceil(255/5)]),raw:{width:1,height:1,channels:4},tile:!0,blend:"dest-in"}]).extend({top:1,left:1,extendWith:"background",background:"transparent"}).png(),[{height:c},f]=await Promise.all([(0,qe.default)(o).png().metadata(),l.toBuffer()]),p=await(0,qe.default)(f).composite([{input:o,left:0,top:0}]).png().toBuffer();t.push({input:p,left:121+(a??0),top:16-Math.floor((c??0)/2)})}return t}async function q_(e,t){let r=c=>$l(`
        <tspan fill="${t.requestParameters.labelColour}">Ranked</tspan> 
        <tspan fill="${t.requestParameters.valueColour}">#${c}</tspan>
      `,"8px Nokia Cellphone FC",""),[n,a,o,l]=await Promise.all([Vr(t,"Weekly Clicks",t.data.weeklyClicks),t.data.weeklyRank?r(t.data.weeklyRank):null,Vr(t,"All-time Clicks",t.data.allTimeClicks),t.data.allTimeRank?r(t.data.allTimeRank):null]);return e.push({input:n,left:118,top:28},{input:o,left:118,top:40}),a&&e.push({input:a,left:245,top:29}),l&&e.push({input:l,left:245,top:41}),e}async function D_(e,t){let[r,n,a,o,l]=await Promise.all([Vr(t,"Total",t.data.total),Vr(t,"Frozen",t.data.frozen),Vr(t,"Eggs",t.data.eggs),Vr(t,"Hatch",t.data.hatch),Vr(t,"Adults",t.data.adult)]);return e.push({input:r,left:118,top:28},{input:n,left:118,top:40},{input:a,left:190,top:28},{input:o,left:190,top:40},{input:l,left:240,top:28}),e}async function F_(e,t){try{let n=[],a=[],{errors:o,dragons:l}=await Xa("https://dragcave.net/api/v2/dragons",{headers:{Authorization:`Bearer ${t}`},query:{ids:e.join(",")},retry:3,retryDelay:1e3,timeout:1e4});if(o.length>0)throw new Error("Errors getting bulk dragons: "+o);Object.keys(l).forEach(f=>{("hoursleft"in l[f]&&l[f].hoursleft>0?n:a).push(f)});let c=await Promise.all(n.map(async f=>Buffer.from(await Xa(`https://dragcave.net/image/${f}.gif`,{retry:3,retryDelay:1e3,timeout:1e4,responseType:"arrayBuffer"}))));return{dragonsIncluded:n,dragonsOmitted:a,dragonBuffers:c}}catch(r){throw r instanceof Sn&&(r.cause?.code??0)===23?23:r}}async function N_(e){let t=await Promise.all(e.map(p=>(0,qe.default)(p).metadata())),r=2,n=49,a=t.reduce((p,m)=>p+(m.width??0)+r,0),o=ao(a,n),l=[],c=[0];return t.forEach(p=>{let m=c[c.length-1];c.push(m+(p.width??0)+r)}),e.forEach((p,m)=>{l.push({input:p,top:n-(t[m].height??0),left:c[m]})}),{stripBuffer:await o.composite(l).png().toBuffer(),stripWidth:a,stripHeight:n}}async function M_(e,t,r,n){let a=[];if(r<xi){let o=await ao(Bl,Ll).composite([{input:e,top:0,left:0},{input:t,top:5,left:Math.floor(xi/2)-Math.floor(r/2)+5}]).png().toBuffer();a.push((0,qe.default)(o))}else for(let o=0;o<r;o+=2)a.push(z_(o,e,t,r,n));return Promise.all(a)}async function W_(e){let{errors:t,dragons:r}=await Xa("https://dragcave.net/api/v2/user",{headers:{Authorization:`Bearer ${e.secret}`},query:{username:e.user.username,limit:99999,filter:"ALL"},retry:3,retryDelay:1e3}),n={female:0,male:0,eggs:0,hatch:0,adult:0,frozen:0,total:0};for(let a in r){let o=r[a];o.gender==="Female"?n.female++:o.gender==="Male"&&n.male++;let l=jl(o),c=fp(o);n.total++,!c.hidden&&(c.frozen?n.frozen++:l==="Adult"?n.adult++:l==="Hatchling"&&!c.dead?n.hatch++:l==="Egg"&&!c.dead&&n.eggs++)}if(t.length>0)throw new Error("Errors getting stats: "+t);return n}function Vr(e,t,r){return $l(`
      <tspan fill="${e.requestParameters.labelColour}">${t}:</tspan> 
      <tspan fill="${e.requestParameters.valueColour}">${Intl.NumberFormat().format(r)}</tspan>
    `,"8px Nokia Cellphone FC","")}async function $l(e,t,r){let{width:n,height:a}=await(0,qe.default)(Buffer.from(`<svg>
        <text style="font: ${t};">${e}</text>
      </svg>`)).png().metadata();return(0,qe.default)(Buffer.from(`<svg width="${(n??0)+1}" height="${(a??0)+4}">
        <style>
          .text {
            font: ${t};
            filter: drop-shadow(1px 1px 0px rgba(0, 0, 0, 0.25));
            ${r}
          }
        </style>
        <text y="${(a??0)+1}" class="text">${e}</text>
      </svg>`)).png().toBuffer()}function ao(e,t){return(0,qe.default)({create:{width:e,height:t,channels:4,background:{r:0,g:0,b:0,alpha:0}}})}async function z_(e,t,r,n,a){let o=e%n,l=Math.min(xi,n-o),c=(0,qe.default)(r).extract({left:o,top:0,width:l,height:a}),f=ao(Bl,Ll),p=[{input:t,top:0,left:0},{input:await c.toBuffer(),top:5,left:5}];if(l<xi){let m=xi-l,b=Math.min(m,n),_=(0,qe.default)(r).extract({left:0,top:0,width:b,height:a});p.push({input:await _.toBuffer(),top:5,left:l+5})}return(0,qe.default)(await f.composite(p).png().toBuffer())}async function U_(e){await H_(e)&&await On.promises.unlink(e),await On.promises.rename(`${e}.tmp`,e)}async function H_(e){try{return await On.promises.stat(e),!0}catch{return!1}}
/*! Bundled license information:

node-fetch-native/dist/node.mjs:
  (**
  * @license
  * web-streams-polyfill v3.3.3
  * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
  * This code is released under the MIT license.
  * SPDX-License-Identifier: MIT
  *)
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
